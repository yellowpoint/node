<script>
	export default {
		data() {
			return {
			}
		},
		methods: {
			
		},
		onLaunch: function() {

		},
		onShow: function() {

		},
		onHide: function() {

		},
	}
</script>

<style lang='scss'>
	@import "./common/reset.css";
	@import "./common/common.scss";
</style>
import http from '@/common/http'
import {
	host,
	host_other
} from '@/common/config'

const api = {

	// 获取用户浏览记录
	getBrowseHistory: args => http.get(`${host}/browsing/getBrowseHistory`, args),

	/*登录相关接口 */
	// 获取验证码;参数 phone;smsTypeEnum :LOGIN=登录验证码 BINDING_PHONE=绑定手机号码 WITHDRAW_DEPOSIT=提现 PHONE_REGISTER_OR_LOGIN=手机号注册/登录
	// BIND_TO_MODIFY_ALIPAY_ACCOUNT =绑定支付宝验证码
	getCode: args => http.post(`${host}/sms/_tbk/code/send`, args),
	// 手机号登录接口
	login: args => http.post(`${host}/login/phoneLogin`, args),
	// 绑定手机号
	bindingPhone: args => http.post(`${host}/user/bindingPhone`, args),
	// 手机号注册/登录
	phoneRegisterLogin: args => http.post(`${host}/login/phoneRegisterLogin`, args),
 
	// 微信授权
	wechat: args => http.post(`${host}/party/tbk/wechat/code`, args),
	// 微信授权
	wechatLogin: args => http.get(`${host}/party/wechat/login`, args),
	// 退出登录
	exit: args => http.get(`${host}/login/app/exit`, args),

	/*首页接口 */
	//首页的接口
	getHome: args => http.get(`${host}/home/getHome`, args),
	//淘宝商品查询接口
	getBeInCommonUseQuery: args => http.post(`${host}/taobao/getBeInCommonUseQuery`, args),
	//商品详情
	productDetail: args => http.get(`${host}/taobao/getTaobaoZhetkProductDetail`, args),
	//九块九查询列表
	ninePiecesOfNineList: args => http.get(`${host}/taobao/ninePiecesOfNineList`, args),
	//淘抢购列表,无排序
	getTqgList: args => http.get(`${host}/taobao/getTqgList`, args),
	//天猫查询列表
	getTianMaoList: args => http.get(`${host}/taobao/getTianMaoList`, args),
	//今日热销列表
	getTodayHotSale: args => http.get(`${host}/taobao/getTodayHotSale`, args),
	// 拼多多热销榜单 
	getPddTopGoods: args => http.get(`${host}/pdd/getPddTopGoods`, args),
	
	

	//增加收藏
	doTaobaoCollectCommodity: args => http.get(`${host}/collect/doTaobaoCollectCommodity`, args),
	//取消收藏
	doTaobaoCancelCollect: args => http.get(`${host}/collect/doTaobaoCancelCollect`, args),

	//淘宝账号授权
	bindZheTaoKe: args => http.get(`${host}/taobao/bindZheTaoKe`, args),
	//淘宝转链接
	convertLink: args => http.get(`${host}/taobao/convertLink`, args),

	//淘宝账号授权
	bindTaoBao: args => http.post(`${host}/user/bindTaoBao`, args),
	//淘宝账号授权tooken
	getToken: args => http.get(`${host_other}`, args),
	//取消授权
	cancelTaobaoAuth: args => http.post(`${host}/user/cancelTaobaoAuth`, args),

	// //为你推荐
	getToYouRecommend: args => http.get(`${host}/taobao/getToYouRecommend`, args),

	//搜索
	//热门搜索列表，参数configEnum配置类型
	// ( CHOICENESS=精选、NOVICES_REWARD=新手奖励金额、WITHDRAWAL_CHARGE=提现手续费 、 
	// MINIMUM_WITHDRAWAL_AMOUNT=最低提现金额、GENERALIZE_COMMISSION=推广佣金比例、
	// CONFIRM_THE_NUMBER_OF_DAYS=确认收货天数、NUMBER_OF_DAYS_OF_PAYMENT=付款天数、
	// PASSWORD_POP_UP_CONTENT=口令弹框内容、HOT_SEARCH=热门搜索 )
	getByType: args => http.get(`${host}/config/getByType`, args),

	/*我的页面 */
	//收藏夹
	getCollectRecord: args => http.get(`${host}/collect/getCollectRecord`, args),
	//批量删除收藏夹
	doTaobaoBatchCancelCollectHtml: args => http.post(`${host}/collect/doTaobaoBatchCancelCollectHtml`, args),
	//浏览记录
	getBrowseHistory: args => http.get(`${host}/browsing/getBrowseHistory`, args),
	//清空浏览记录
	doWipeData: args => http.get(`${host}/browsing/doWipeData`, args),

	/*用户收益相关*/
	//获取用户资产
	getUserAsset: args => http.get(`${host}/user/getUserAsset`, args),
	//用户资产变更记录 参数 incomeExpenditureType 收支类型(1=收入/2=支出) 不传为全部，pageNum页码
	getRecordVo: args => http.get(`${host}/user/asset/change/getRecordVo`, args),
	// 获取可提现金额
	getWithdrawDepositVo: args => http.get(`${host}/user/getWithdrawDepositVo`, args),
	// 发起提现，参数userId用户ID、amount提现金额、verifCode手机号登录 验证码
	doWithdrawDeposit: args => http.post(`${host}/user/doWithdrawDeposit`, args),

	// 用户详情
	getTbkUserVo: args => http.get(`${host}/user/getTbkUserVo`, args),
	//订单
	getUserOrderList: args => http.get(`${host}/user/order/getUserOrderList`, args),

	/*我要赚 */
	//我要赚图片
	getIWantToMake: args => http.get(`${host}/home/getIWantToMake`, args),

	/*分类*/
	//获取一级类目
	getFirstClassList: args => http.get(`${host}/commodity/config/getFirstClassList`, args),
	//根据id获取子类目，参数parentId，来自于上面getFirstClassList接口的id
	getByParentIdList: args => http.get(`${host}/commodity/config/getByParentIdList`, args),

	//创建淘宝分享口令
	createTaoKouling: args => http.post(`${host}/taobao/createTaoKouling`, args),
	//快捷淘宝分享接口
	createTaoKoulingTwoInOne: args => http.post(`${host}/taobao/createTaoKoulingTwoInOne`, args),
	
	//猜你喜欢
	getGuessLikeProducts: args => http.get(`${host}/taobao/getGuessLikeProducts`, args),
	
	//新手攻略
	getNewStrategy: args => http.get(`${host}/home/getNewStrategy`, args),
	//联系我们
	getContactUs: args => http.get(`${host}/home/getContactUs`, args),
	
	//商品详情-拼多多
	productDetailPidd: args => http.get(`${host}/pdd/getGoodsDetail`, args),
	
	//分享口令-拼多多
	generatePddPhrase: args => http.get(`${host}/pdd/generatePddPhrase`, args),
	// 拼多多-生成普通商品推广链接
	generateGoodsPromUrl: args => http.get(`${host}/pdd/generateGoodsPromUrl`, args),
	// 拼多多-生成红包推广链接
	generatePromUrl: args => http.get(`${host}/pdd/generatePromUrl`, args),
	// 拼多多-多多客工具生成转盘抽免单url
	getLotteryUrl: args => http.get(`${host}/pdd/getLotteryUrl`, args),
	// 获取0元购列表 
	getZeroBuyList: args => http.get(`${host}/home/getZeroBuyList`, args),
	// 获取邀请码 
	getInviteCode: args => http.get(`${host}/taobao/getInviteCode `, args),
	
	// 首页广告
	getMainRecommendList: args => http.post(`${host}/recommend/getMainRecommendList`, args),
	// 首页广告2
	getByConfigType: args => http.post(`${host}/config/getByConfigType`, args),
	
	// 升级说明
	iWantToUpgrade: args => http.get(`${host}/share/iWantToUpgrade`, args),
	// 粉丝推广
	getPromotionPageInfo: args => http.get(`${host}/share/getPromotionPageInfo`, args),
	//拼多多商品查询接口
	getPddDdkGoods: args => http.get(`${host}/pdd/getPddDdkGoods`, args),
	//获取拼多多一级类目
	getPddTwoLevelCategory: args => http.get(`${host}/commodity/config/getPddTwoLevelCategory`, args),
	//绑定或者修改支付宝账号
	bindOrModifyAlipayAccount: args => http.post(`${host}/user/bindOrModifyAlipayAccount`, args),
	//获取品牌信息
	getPinpaiRankList: args => http.get(`${host}/pin/pai/getPinpaiRankList`, args),
	//双十一会场
	dobolT: args => http.get(`${host}/config/getById`, args),
	//双十一会场2
	getD11ProductList: args => http.get(`${host}/haodan/getD11ProductList`, args),
	//京东一级分类
	getGoodsCategory: args => http.get(`${host}/jd/getGoodsCategory`, args),
	//京东精选列表
	getChoicenessGoodsList: args => http.get(`${host}/jd/getChoicenessGoodsList`, args),
	//京东搜索
	getCateGoodList: args => http.get(`${host}/jd/getCateGoodList`, args),
	//京东转短链
	jdGenerateGoodsPromUrl: args => http.get(`${host}/jd/generateGoodsPromUrl`, args),
	//现金红包创建
	createRedPacket: args => http.get(`${host}/red/packet/createRedPacket`, args),
	//现金红包分享数据
	getRedPacketShare: args => http.get(`${host}/red/packet/getRedPacketShare`, args),
	//我的现金红包信息
	getUserRedPacketWithCash: args => http.get(`${host}/red/packet/getUserRedPacketWithCash`, args),
	//升级团长
	getUpgradeDelegationInfo: args => http.get(`${host}/share/getUpgradeDelegationInfo`, args),
	
	//淘宝活动页
	getFavoriteItems: args => http.get(`${host}/taobao/getFavoriteItems`, args),
	//淘宝活动页tar
	getTaobaoActivity: args => http.get(`${host}/home/getTaobaoActivity`, args),
	//分享红包第一次有钱接口
	doDismantledRedPacket: args => http.get(`${host}/red/packet/doDismantledRedPacket`, args),
	//黑五活动
	getBlackFridayActivity: args => http.get(`${host}/activity/getBlackFridayActivity`, args),
	
	//淘宝活动ID
	createActivityLink: args => http.get(`${host}/taobao/createActivityLink`, args),
	
	//拼多多转链 numid 没有的情况
	genCmsPromUrl: args => http.get(`${host}/pdd/genCmsPromUrl`, args),
	//拼多多转链 numid 有的情况
	genThemePromUrl: args => http.get(`${host}/pdd/genThemePromUrl`, args),
	
	

	 
}

export default api
import {
	host,
	host_other
} from '@/common/config'
//一些公共的工具方法
//Object.freeze，它做的事情是阻止这个对象在未来被修改。
let debounce_timeout = null
let common = Object.freeze({
	// 设置cookie方法,默认存在根目录，之前是为了区分在一个域名下的不同项目的存储，现在都是一个项目一个二级域名
	setCookie: function(name, value, days, path='/') {
		let expires = ""
		if (days) {
			//days兼容传入日期
			//如果传入days不能转为数字，则表示是具体日期,日期也可能会被转换为时间戳，故判断其长度
			if (+days && +days.toString().length < 8) {
				let date = new Date();
				date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
				expires = "; expires=" + date.toGMTString();

			} else {
				expires = "; expires=" + new Date(days).toGMTString();
			}

		}
		let _path = ''
		if (path) {
			_path = '; path=' + path
		}
		document.cookie = encodeURIComponent(name) + "=" + encodeURIComponent(value) + expires + _path;
	},

	// 获取cookie
	getCookie: function(name) {
		let nameEQ = encodeURIComponent(name) + "=";
		let ca = document.cookie.split(';');
		for (let i = 0; i < ca.length; i++) {
			let c = ca[i];
			while (c.charAt(0) == ' ') c = c.substring(1, c.length);
			if (c.indexOf(nameEQ) == 0) return decodeURIComponent(c.substring(nameEQ.length, c.length));
		}
		return null;
	},

	// 删除cookie方法
	deleteCookie: function(name) {
		//用于处理不同域的cookie删除，与项目版本相同
		this.setCookie(name, '', -1)
		this.setCookie(name, '', -1, '/')
	},

	getUrlParam: function(name) {
		return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.href) || [, ""])[
			1].replace(/\+/g, '%20')) || null;
	},

	isOpenInWeixin: function() {
		return navigator.userAgent.toLowerCase().match(/MicroMessenger/i) == "micromessenger"
	},

	isOpenInAiSi: function() {
		return navigator.userAgent.toLowerCase().match(/i4Tools/i) == "i4tools"
	},

	isOpenInWeibo: function() {
		return navigator.userAgent.toLowerCase().match(/WeiBo/i) == "weibo"
	},
	isInPc: function() {
		var sUserAgent = navigator.userAgent.toLowerCase();
		var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
		var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
		var bIsMidp = sUserAgent.match(/midp/i) == "midp";
		var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
		var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
		var bIsAndroid = sUserAgent.match(/android/i) == "android";
		var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
		var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
		if (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) {
			//		return "phone";
			return false;
		} else {
			//		return "pc";
			return true;
		}

	},
	//获取第二天零点的时间，可传几天后，默认是1天后
	getNextDate: function(next = 1) {
		let d = new Date(),
			year = d.getFullYear(),
			month = d.getMonth(),
			day = d.getDate(),
			nextDay = new Date(year, month, (day + next), '00', '00', '00');

		return nextDay;
	},
	//删除url上某个参数,返回url,可传入自定义链接，否则取location.href
	delUrlParam: function(name, myUrl) {
		var loca = myUrl || window.location.href;
		var baseUrl = loca.split('?')[0];
		var query = loca.split('?')[1];
		if (query && query.indexOf(name) > -1) {
			var obj = {}
			var arr = query.split("&");
			for (var i = 0; i < arr.length; i++) {
				arr[i] = arr[i].split("=");
				obj[arr[i][0]] = arr[i][1];
			};
			delete obj[name];
			var url = baseUrl + '?' + JSON.stringify(obj).replace(/[\"\{\}]/g, "").replace(/\:/g, "=").replace(/\,/g, "&");
			if (!url.split('?')[1]) {
				url = url.split('?')[0]
			}
			return url
		};
		return loca
	},
	isPhoneNumber(phone) {
		return /^1\d{10}$/.test(phone)
	},
	isCode(code) { //验证码的验证
		return /^\d{6}$/.test(code)
	},
	isEmail(code){//邮箱校验
		return /^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(code)
	},
	// 判断客户端系统clientOS
	clientOS() {
		var u = navigator.userAgent;
		var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //g
		if (isAndroid) {
			//这个是安卓操作系统
			return true
		} else {
			return false
		}
	},
	// 判断ios版本信息
	iosVersion() {
		var str = navigator.userAgent.toLowerCase();
		var ver = str.match(/cpu iphone os (.*?) like mac os/);
		if (ver) {
			return ver[1].split('_')[0];
		} else {
			return 0
		}
	},
	//获取元素距离顶部的距离
	getElementTop(element) {
		var actualTop = element.offsetTop;
		var current = element.offsetParent;
		while (current !== null) {
			actualTop += current.offsetTop;
			current = current.offsetParent;
		}
		return actualTop;
	},
	urlParse() {
		let url = window.location.href.substr(window.location.href.indexOf("?"));
		let obj = {};
		let reg = /[?&][^?&]+=[^?&]+/g;
		let arr = url.match(reg);
		if (arr) {
			arr.forEach(item => {
				let tempArr = item.substring(1).split("=");
				let key = decodeURIComponent(tempArr[0]);
				let val = decodeURIComponent(tempArr[1]);
				obj[key] = val;
			});
		}
		return obj;
	},
	// 防抖函数，一定时间间隔内没有再触发事件时，事件处理函数才会执行一次
	debounce(fn, wait) {
		if (debounce_timeout !== null) clearTimeout(debounce_timeout)
		debounce_timeout = setTimeout(fn, wait)
	},
	isWeiXin() {
		// window.navigator.userAgent属性包含了浏览器类型、版本、操作系统类型、浏览器引擎类型等信息，这个属性可以用来判断浏览器类型
		var ua = window.navigator.userAgent.toLowerCase();
		//通过正则表达式匹配ua中是否含有MicroMessenger字符串
		if(ua.match(/MicroMessenger/i) == "micromessenger") {
			return true;
		} else {
			return false;
		}
	},
	getRandom(n,m){  
		//n-m区间  
		let c = m-n+1 
		let timestamp = String(new Date().getTime())   
		let number = String(Math.floor(Math.random() * c + n))
		return timestamp+number
	},
	//得到图片验证码
	getImgCode() {
		//13位时间戳加十位随机数
		
		let random = this.getRandom(1000000000, 9999999999)
		//请求图片验证码
		
		let data={
			random:random,
			imgUrl:`${host}/other/validatecode?random=${random}`
		}
		return data
	},
	//刷新验证码
	freshCode() {
		this.getImgCode()
	},
	isImgCode(str){ //验证图形验证
		   var pattern=/^(\w)+$/;
			var len = escape(str).replace(/%u\w{2}/g,"").length;

			if(len==4 && pattern.test(str)){
				  return true
			}else{
				 return false
			}
	},
	formatDate(d){ 
		var now=new Date(d); 
	     var year=now.getFullYear(); 
	     var month=now.getMonth()+1; 
	     var date=now.getDate(); 
	     var hour=now.getHours(); 
	     var minute=now.getMinutes(); 
	     var second=now.getSeconds(); 
	     return year+"-"+month+"-"+date+" "+hour+":"+minute+":"+second; 
	} 


})



export default common
//与安卓IOS通信
const setupWebViewJavascriptBridge = function(callback) {
	if(window.WebViewJavascriptBridge) {
		return callback(WebViewJavascriptBridge);
	}
	if(window.WVJBCallbacks) {
		return window.WVJBCallbacks.push(callback);
	}
	window.WVJBCallbacks = [callback];
	var WVJBIframe = document.createElement('iframe');
	WVJBIframe.style.display = 'none';
	WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
	document.documentElement.appendChild(WVJBIframe);
	setTimeout(function() {
		document.documentElement.removeChild(WVJBIframe)
	}, 0)
}

//var params = {'order_no':'201511120981234','channel':'wx','amount':1,'subject':'粉色外套'};
const sending = function(params) {
	setupWebViewJavascriptBridge(function(bridge) {
		bridge.registerHandler('testJSFunction', function(data, responseCallback) {
			conosle('JS方法被调用:' + data);
			responseCallback('js执行过了');
		})
	})
	try {
		if(params != undefined) {
			window.webkit.messageHandlers.bridge.postMessage(params)
		}
	} catch(e) {
		console.log(params)
	}
}

export {
	sending
}
	uni-tabbar {/* 设置tabbar icon、字体大小 */
		.uni-tabbar__icon {
			width: 38upx;
			height: 38upx;
		}

		.uni-tabbar__label {
			font-size: 20upx;
		}
	}
	// 页面loading样式
	.bodyLoading::before {
		content: '';
		background: #fff;
		position: absolute;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		z-index: 99998;
	}

	.bodyLoading::after {
		content: '';
		background: url(http://file.diy.51app.cn/wp/icoImg/loading.gif) no-repeat;
		background-size: 100%;
		width: 20px;
		height: 20px;
		position: absolute;
		top: 50%;
		left: 50%;
		margin-left: -10px;
		margin-top: -10px;
		z-index: 99999;
	}
	/*
		全局公共样式和字体图标
	*/
	@font-face {
		font-family: yticon;
		font-weight: normal;
		font-style: normal;
		src: url('https://at.alicdn.com/t/font_1078604_w4kpxh0rafi.ttf') format('truetype');
	}

	.yticon {
		font-family: "yticon" !important;
		font-size: 16px;
		font-style: normal;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}

	.icon-yiguoqi1:before {
		content: "\e700";
	}

	.icon-iconfontshanchu1:before {
		content: "\e619";
	}

	.icon-iconfontweixin:before {
		content: "\e611";
	}

	.icon-alipay:before {
		content: "\e636";
	}

	.icon-shang:before {
		content: "\e624";
	}

	.icon-shouye:before {
		content: "\e626";
	}

	.icon-shanchu4:before {
		content: "\e622";
	}

	.icon-xiaoxi:before {
		content: "\e618";
	}

	.icon-jiantour-copy:before {
		content: "\e600";
	}

	.icon-fenxiang2:before {
		content: "\e61e";
	}

	.icon-pingjia:before {
		content: "\e67b";
	}

	.icon-daifukuan:before {
		content: "\e68f";
	}

	.icon-pinglun-copy:before {
		content: "\e612";
	}

	.icon-dianhua-copy:before {
		content: "\e621";
	}

	.icon-shoucang:before {
		content: "\e645";
	}

	.icon-xuanzhong2:before {
		content: "\e62f";
	}

	.icon-gouwuche_:before {
		content: "\e630";
	}

	.icon-icon-test:before {
		content: "\e60c";
	}

	.icon-icon-test1:before {
		content: "\e632";
	}

	.icon-bianji:before {
		content: "\e646";
	}

	.icon-jiazailoading-A:before {
		content: "\e8fc";
	}

	.icon-zuoshang:before {
		content: "\e613";
	}

	.icon-jia2:before {
		content: "\e60a";
	}

	.icon-huifu:before {
		content: "\e68b";
	}

	.icon-sousuo:before {
		content: "\e7ce";
	}

	.icon-arrow-fine-up:before {
		content: "\e601";
	}

	.icon-hot:before {
		content: "\e60e";
	}

	.icon-lishijilu:before {
		content: "\e6b9";
	}

	.icon-zhengxinchaxun-zhifubaoceping-:before {
		content: "\e616";
	}

	.icon-naozhong:before {
		content: "\e64a";
	}

	.icon-xiatubiao--copy:before {
		content: "\e608";
	}

	.icon-shoucang_xuanzhongzhuangtai:before {
		content: "\e6a9";
	}

	.icon-jia1:before {
		content: "\e61c";
	}

	.icon-bangzhu1:before {
		content: "\e63d";
	}

	.icon-arrow-left-bottom:before {
		content: "\e602";
	}

	.icon-arrow-right-bottom:before {
		content: "\e603";
	}

	.icon-arrow-left-top:before {
		content: "\e604";
	}

	.icon-icon--:before {
		content: "\e744";
	}

	.icon-zuojiantou-up:before {
		content: "\e605";
	}

	.icon-xia:before {
		content: "\e62d";
	}

	.icon--jianhao:before {
		content: "\e60b";
	}

	.icon-weixinzhifu:before {
		content: "\e61a";
	}

	.icon-comment:before {
		content: "\e64f";
	}

	.icon-weixin:before {
		content: "\e61f";
	}

	.icon-fenlei1:before {
		content: "\e620";
	}

	.icon-erjiye-yucunkuan:before {
		content: "\e623";
	}

	.icon-Group-:before {
		content: "\e688";
	}

	.icon-you:before {
		content: "\e606";
	}

	.icon-forward:before {
		content: "\e607";
	}

	.icon-tuijian:before {
		content: "\e610";
	}

	.icon-bangzhu:before {
		content: "\e679";
	}

	.icon-share:before {
		content: "\e656";
	}

	.icon-yiguoqi:before {
		content: "\e997";
	}

	.icon-shezhi1:before {
		content: "\e61d";
	}

	.icon-fork:before {
		content: "\e61b";
	}

	.icon-kafei:before {
		content: "\e66a";
	}

	.icon-iLinkapp-:before {
		content: "\e654";
	}

	.icon-saomiao:before {
		content: "\e60d";
	}

	.icon-shezhi:before {
		content: "\e60f";
	}

	.icon-shouhoutuikuan:before {
		content: "\e631";
	}

	.icon-gouwuche:before {
		content: "\e609";
	}

	.icon-dizhi:before {
		content: "\e614";
	}

	.icon-fenlei:before {
		content: "\e706";
	}

	.icon-xingxing:before {
		content: "\e70b";
	}

	.icon-tuandui:before {
		content: "\e633";
	}

	.icon-zuanshi:before {
		content: "\e615";
	}

	.icon-zuo:before {
		content: "\e63c";
	}

	.icon-shoucang2:before {
		content: "\e62e";
	}

	.icon-shouhuodizhi:before {
		content: "\e712";
	}

	.icon-yishouhuo:before {
		content: "\e71a";
	}

	.icon-dianzan-ash:before {
		content: "\e617";
	}





	view,
	scroll-view,
	swiper,
	swiper-item,
	cover-view,
	cover-image,
	icon,
	text,
	rich-text,
	progress,
	button,
	checkbox,
	form,
	input,
	label,
	radio,
	slider,
	switch,
	textarea,
	navigator,
	audio,
	camera,
	image,
	video {
		box-sizing: border-box;
	}

	/* 骨架屏替代方案 */
	.Skeleton {
		background: #f3f3f3;
		padding: 20upx 0;
		border-radius: 8upx;
	}

	/* 图片载入替代方案 */
	.image-wrapper {
		font-size: 0;
		background: #f3f3f3;
		border-radius: 4px;

		image {
			width: 100%;
			height: 100%;
			transition: .6s;
			opacity: 0;

			&.loaded {
				opacity: 1;
			}
		}
	}

	.clamp {
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
		display: block;
	}

	.common-hover {
		background: #f5f5f5;
	}

	/*边框*/
	.b-b:after,
	.b-t:after {
		position: absolute;
		z-index: 3;
		left: 0;
		right: 0;
		height: 0;
		content: '';
		transform: scaleY(.5);
		border-bottom: 1px solid $border-color-base;
	}

	.b-b:after {
		bottom: 0;
	}

	.b-t:after {
		top: 0;
	}

	/* button样式改写 */
	uni-button,
	button {
		height: 80upx;
		line-height: 80upx;
		font-size: $font-lg + 2upx;
		font-weight: normal;

		&.no-border:before,
		&.no-border:after {
			border: 0;
		}
	}

	uni-button[type=default],
	button[type=default] {
		color: $font-color-dark;
	}

	/* input 样式 */
	.input-placeholder {
		color: #999999;
	}

	.placeholder {
		color: #999999;
	}
	// 修复 更新2.1.1后input的placeholder垂直居中了，但输入框未垂直居中
	.uni-input-form{
		height: 100%;
	}
	uni-input{
		padding-right: 66upx;
		line-height: normal; //修改input placeholder偏上的问题
	}
	
	
		// 弹窗公共样式
		.pop-window{
			position: fixed;
			top: 0;
			left: 0;
			bottom: 0;
			right: 0;
			z-index: 999;
			.mask{
				width: 100%;
				height: 100%;
				background: #000;
				opacity: .5;
			}
			.pop-main{
				position: absolute;
				z-index: 1000;
			}
		}
	// uni-showModal 弹窗样式
	.uni-modal{
		width:60% !important;
		.uni-modal__title{
			font-size: 28upx;
			// font-weight: 700;
		}
		.uni-modal__hd{
			background: #BF3627;
			padding: 10upx;
			color:#fff;
		}
		.uni-modal__bd{
			padding: 10upx 50upx;
			border-radius: 3px 3px 0 0;
			font-size:24upx;
			text-align: left;
		}
		.uni-modal__btn{
			font-size:24upx;
		}
	}//一些公共的业务逻辑方法
//Object.freeze，它做的事情是阻止这个对象在未来被修改。
import sha1 from './sha1'
import store from '@/store/index'

let commonLogic = Object.freeze({
	//获取请求头，用户登录信息
	getAjaxHeaders() {
		//默认的请求头信息 
		let headers = {
			//所有接口的鉴权需要加上版本号区别于老项目
			'x-version': '2.1',
			'x-system': 'tbk',
			'channelType': 'HTML5',
			'tbk-version': '3.0' //版本号
		}
		//若参数不全 里面报错的话就设为空
		try {
			let timestamp = new Date().getTime().toString()
			let userInfo = store.getters.userInfo
			if (!userInfo) {
				return headers
			}
			let sign = sha1.hex_sha1(timestamp + userInfo.userToken + userInfo.secret)
			// 请求头加上登录相关信息
			Object.assign(headers, {
				'x-sign': sign,
				'x-user-token': userInfo.userToken,
				'x-timestamp': timestamp
			})

		} catch (e) {
			console.log(e)

		}

		return headers

	},
	verifyLogin() {
		if (!store.getters.userInfo) {
			let wUrl=encodeURIComponent(`${window.location.href}`)
			uni.navigateTo({
				url: `/pages/public/login?url=${wUrl}`
			});
			return false
		}
		return true
	},
	// 由于uni对location.href限制，故做如下处理
	href(url) {
		// 没有链接的话就返回上一页，再刷新
		if (!url) {
			uni.navigateBack();
			setTimeout(() => {
				location.reload()
			}, 10)
			return
		}

		/*
		 * 同源tabBar页面未刷新的跳转；由于未刷新后面的reload还是会执行;处理后刷新跳转，且加了一个历史记录，需要返回两下；
		 * 同源非tabBar页面不跳转；处理后刷新跳转
		 * 非同源所有页面正常刷新跳转
		 * 
		 * 最好还是要刷新跳转，防止store里的登录信息没有更新到页面
		 * 理论上应该都是同源的链接
		 * */
		// 由于uni对与同源的非tabbar的链接不跳转，故通过pushState设置后再reload
		location.href = url;
		// 新URL必须与当前URL同源，否则 pushState() 会抛出一个异常。
		history.pushState({}, "", url);
		location.reload()
	},
	randomWX(data){
		// 微信号随机从接口数组中取,兼容传过来还是string
		let wxCodeArr = data.toString().split(',')
		return wxCodeArr[Math.floor(Math.random() * wxCodeArr.length)];
	}


})

export default commonLogic
/**
 * 配置本地开发与线上生产的接口前缀
 * 
 * **/
//开发接口前缀

// 罗尧超 本机接口
// const devHost = '//192.168.3.212:8092'
const devHost = '//api-tdd.51app.cn'

// 120服务器
// const devHost = "//192.168.119.120:9240";
//罗新齐 本机接口
// const devHost = '//192.168.100.50:8090'
//孙卫民 本机接口
// const devHost = '//192.168.100.11:8093'
//袁琪 本机接口
// const devHost = "//192.168.100.7:8090";

//生产接口前缀
// const proHost = '//api-tdd.51app.cn'
const proHost = '//192.168.119.120:9240'
// const proHost = "//resume.51app.cn/resumeapi/test";

const  proHost_other = 'https://tdd.51app.cn/tbkauth2ndstepandbindtb' //淘宝授权线上
const  devHost_other = '//192.168.100.105:7777' //淘宝授权线下

const  proHost_iWantUp = '//tdd.51app.cn' //我要升级线上
const  devHost_iWantUp = '//192.168.100.13:8080' //我要升级线下

const host = process.env.NODE_ENV === "production" ? proHost : devHost;
const host_other = process.env.NODE_ENV === "production" ? proHost_other : devHost_other;

const host_iWantUp = process.env.NODE_ENV === "production" ? proHost_iWantUp : devHost_iWantUp;




export {
  host,
  host_other,
  host_iWantUp
};
import Vue from 'vue'
// 添加图片后缀，如果添加后图片不存在则使用原图，如果原图不存在则使用图片默认图
Vue.directive('img', async function(el, binding) {
	let imgURL = binding.value; //获取图片地址
	let size = 180;
	let suffix
	if(imgURL.indexOf('bao')!=-1){
		suffix = imgURL + `_${size}x${size}.jpg`
	}
	if (imgURL) {
		let exist = await imageIsExist(suffix);
		if (exist) {
			el.setAttribute('src', suffix);
		} else {
			let exist2 = await imageIsExist(imgURL);
			if (exist2) {
				el.setAttribute('src', imgURL);
			} else {
				el.setAttribute('src', require('@/static/errorImage.jpg'));

			}

		}
	}
})
/**
 * 检测图片是否存在
 * @param url
 */
let imageIsExist = function(url) {
	return new Promise((resolve) => {
		var img = new Image();
		img.onload = function() {
			if (this.complete == true && this.width > 2) {
				resolve(true);
			} else {
				resolve(false);
			}
			img = null;
		}
		img.onerror = function() {
			resolve(false);
			img = null;
		}
		img.src = url;
	})
}

export default {}
const vFilter = {
	// format:传入格式 默认是y/M/d ,还可以是y-M-d h:m:s;请注意大写M表示月，小写m表示分钟，格式可自定义，是替换里面的关键字
	moment: function(time, format) {
		if(!time){
			return
		}
		let Time = parseInt(time).toString().length > 11 ? +time : +time * 1000;
		let date = new Date(Time);
		let result = format || 'y/M/d '; //设置默认格式
		let box = {
			'y': date.getFullYear(),
			'M': date.getMonth() + 1,
			'd': date.getDate(),
			'h': date.getHours(),
			'm': date.getMinutes(),
			's': date.getSeconds()
		}

		function add0(data) {
			return +data < 10 ? ('0' + data) : data
		}

		for (let key in box) {
			box[key] = add0(box[key]).toString()
			//月为大写M，分钟为小写m,此时需要去掉i，区分大小写
			result = result.replace(new RegExp(key + '+', (key === 'M' || key === 'm') ? 'g' : 'ig'), box[key])
		}
		return result
	},
	//用星号隐藏手机号 如186****1054
	//参数 mobile： 手机；default：没有手机号码时的默认文字
	hideMobile: function(mobile, defaultText = '幸运用户') {
		if (typeof mobile === 'string' || typeof mobile === 'number') {
			return mobile ? String(mobile).substring(0, 3) + "****" + String(mobile).substring(7, 11) : defaultText
		} else {
			return defaultText
		}

	},
	//格式化金额，该项目是以元为单位，传出元为单位的两位小数
	money(money) {
		if (!money) {
			money = 0
		}
	
		money = money.toFixed(2)
		return Number(money)
	},
	imgSuffix(src,size=180){
		//淘宝的图片加 _180x180.jpg 
		//自己的图片加 ?x-oss-process=image/resize,w_400 
		if(src.indexOf('bao')!=-1){
			let suffix = `_${size}x${size}.jpg`
			return src+suffix
		}else{
			return src
		}
	}
}

export default vFilter
/**
 * 通用uni-app网络请求
 *
 */
import $commonLogic from '@/common/commonLogic'
import store from '@/store/index'
//加上pos请求的请求头
let postConfig = {}



let toast = (title = "网络繁忙，请稍后再试~") => {
	uni.showToast({
		title: title,
		duration: 2000,
		icon: 'none'
	});
}

let http = {
	config: {
		baseUrl: '',
		header: {
			// 'Content-Type': 'application/json;charset=UTF-8',
			'Content-Type': 'application/x-www-form-urlencoded',
		},
		data: {},
		method: "GET",
		dataType: "json",
		/* 如设为json，会对返回的数据做一次 JSON.parse */
		responseType: "text",
		success() {},
		fail() {},
		complete() {}
	},
	interceptor: {
		request: null,
		response: null
	},
	request(options) {
	
		// uni.showLoading({
		// 	title: '加载中'
		// });
		if (!options) {
			options = {}
		}
		this.resetHeaders()
		options.baseUrl = options.baseUrl || this.config.baseUrl
		options.dataType = options.dataType || this.config.dataType
		options.url = options.baseUrl + options.url
		options.data = options.data || {}
		options.method = options.method || this.config.method
		options.header = Object.assign({}, this.config.header, postConfig)

		return new Promise((resolve, reject) => {
			let _config = null

			options.complete = (response) => {
				let statusCode = response.statusCode
				response.config = _config
				const r = response.data;

				if (this.interceptor.response) {
					let newResponse = this.interceptor.response(response)
					if (newResponse) {
						response = newResponse
					}
				}
				
				// uni.hideLoading();
				
				if (statusCode === 200) {
					//成功
					if (r.code == 200) {
						resolve(r);
					} else {
						if (['1000', '1001', '1002'].includes(r.code)) {
							uni.showModal({
								title: '提示',
								content: '未登录或登录已过期，请登录!',
								cancelText: '取消',
								confirmText: '去登录',
								success: function(res) {
									//清除登录信息,cookie清除了，但在这里面没有触发store登录状态变化
									store.dispatch('userInfo', null)
									if (res.confirm) {
										let wUrl=encodeURIComponent(`${window.location.href}`)
										uni.navigateTo({
											url: `/pages/public/login?url=${wUrl}`,
										});
									} else if (res.cancel) {
										location.reload()
									}
								}
							});
						}
						toast(r.msg || '哎呀，接口出错了')
						reject(r)
					}

				} else {
					ajaxErr(response)
					//有点纠结当http的状态码不是200的时候是否要把错误抛出去
					//业务上一般是不会处理这种错误的
					//不抛出的话，业务代码里请求后面的就不会执行了,好处是业务上catch的时候就不用区分是http请求的问题还是接口自定义的问题
					// reject(response)
				}
				
			}

			_config = Object.assign({}, this.config, options)
			_config.requestId = new Date().getTime()

			if (this.interceptor.request) {
				this.interceptor.request(_config)
			}


			uni.request(_config);
		});
	},
	get(url, data, options) {
		if (!options) {
			options = {}
		}
		options.url = url
		options.data = data
		options.method = 'GET'
		return this.request(options)
	},
	post(url, data, options) {
		if (!options) {
			options = {}
		}

		options.url = url
		options.data = data
		options.method = 'POST'
		return this.request(options)
	},
	put(url, data, options) {
		if (!options) {
			options = {}
		}
		options.url = url
		options.data = data
		options.method = 'PUT'
		return this.request(options)
	},
	delete(url, data, options) {
		if (!options) {
			options = {}
		}
		options.url = url
		options.data = data
		options.method = 'DELETE'
		return this.request(options)
	},
	resetHeaders() {
		postConfig = $commonLogic.getAjaxHeaders() || {}

	}
}

function ajaxErr(err) {

	let message = '网络繁忙，请稍后再试~'
	if (err && err.statusCode) {
		switch (err.statusCode) {
			case 400:
				message = "请求错误";
				break;

			case 401:
				message = "未授权，请登录";
				break;

			case 403:
				message = "拒绝访问";
				break;

			case 404:
				message = `请求地址出错`;
				break;
			case 408:
				message = "请求超时";
				break;

			case 500:
				message = "服务器内部错误";
				break;

			case 501:
				message = "服务未实现";
				break;

			case 502:
				message = "网关错误";
				break;

			case 503:
				message = "服务不可用";
				break;

			case 504:
				message = "网关超时";
				break;

			case 505:
				message = "HTTP版本不受支持";
				break;

			default:
		}
	}
	toast(message)
}


export default http
let  popMixins={//弹窗
	data() {
		return {
			isShowPop:false
		}
	},
	onLoad(options){
	},
	methods: {
		closePop(){
			this.isShowPop=false;
		},
		openPop(){
			this.isShowPop=true
		}
	}
}
export default popMixins;html,
body,
div,
header,
article,
footer,
section,
aside,
nav,
hgroup,
ul,
ol,
li,
h1,
h2,
h3,
h4,
h5,
h6,
dl,
dt,
dd,
p,
a,
span,
i,
em,
strong,
b,
img,
input,
textarea {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
}


/*初始化标题加粗*/

h1,
h2,
h3,
h4,
h5,
h6,
b,
strong {
	font-weight: normal
}

a,
img,
input {
	border: none 0;
	text-decoration: none;
	outline: none;
	-webkit-appearance: none;
}

img {
	display: block;
	width: 100%;
}

a:hover {
	text-decoration: none;
}

a:focus,
input:focus {
	outline: 0 none;
}


/*获取焦点时，不显示外框*/

li {
	list-style: none;
}

i,
em,
cite {
	font-style: normal;
}

a {
	text-decoration: none;
	outline: none;
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

input,
textarea,
li {
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}


/*消除点击高光*/

textarea,
button {
	resize: none;
	font-size: 13px;
	padding: 0;
	outline: none 0;
	border: none 0;
}


/*去掉火狐和谷歌浏览器的Textarea改变尺寸大小功能*/
input[type="button"],
input[type="submit"],
input[type="reset"],
textarea {
	-webkit-appearance: none;
	line-height: normal；
}

input::-webkit-input-placeholder,
textarea::-webkit-input-placeholder {
	color: #ddd;
	font-size: 26upx;
}


/*定义placeholder字体样式*/

body {
	/* background-color: #f7f7f7; */
	color: #333;
	font-family: "Helvetica Neue", Helvetica, Arial, "PingFang SC", "Hiragino Sans GB", "Heiti SC", "Microsoft YaHei", "WenQuanYi Micro Hei", sans-serif;
	font-size: 13px;
	/*滚动顺滑*/
	-webkit-overflow-scrolling: touch;
	/*取消ios上链接长按出现的半透明黑色遮罩*/
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
	user-select: auto;
}

/*公共样式开始*/

/*清除浮动*/

.clearfix {
	clear: both;
}

.clearfix::after,
.clearfix::before {
	content: " ";
	display: table;
}

.clearfix::after {
	clear: both;
}

/*公共样式结束*/

/* 适配iphoneX 

uni会自动给有tabbar的页面加上，故有些地方无法统一，需要注意
.uni-app--showtabbar uni-page-wrapper{
	height: calc(100% - 50px);
    height: calc(100% - 50px - constant(safe-area-inset-bottom));
    height: calc(100% - 50px - env(safe-area-inset-bottom));
}

*/
/* https://aotu.io/notes/2017/11/27/iphonex/index.html */
@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {

	body {
		/* body默认高度100%，iphonex上会让i4加上底部，
		故将其高度设置为100vh，但其100vh一般大于100%，可能对布局有影响，需注意 
		加了固定高度，padding就没作用了
		*/
	    position: relative;
		height: 100vh;
	}

	uni-tabbar {
		padding-bottom: constant(safe-area-inset-bottom) !important;
		padding-bottom: env(safe-area-inset-bottom) !important;
	}

	.payFooter {
		height: calc(98upx + constant(safe-area-inset-bottom)) !important;
		height: calc(98upx + env(safe-area-inset-bottom)) !important;
		padding-bottom: constant(safe-area-inset-bottom) !important;
		padding-bottom: env(safe-area-inset-bottom) !important;
	}
}
/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS PUB 180-1
 * Version 2.1a Copyright Paul Johnston 2000 - 2002.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */

/*
 * Configurable variables. You may need to tweak these to be compatible with
 * the server-side, but the defaults work in most cases.
 */
var hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase        */
var b64pad = ""; /* base-64 pad character. "=" for strict RFC compliance   */
var chrsz = 8; /* bits per input character. 8 - ASCII; 16 - Unicode      */

/*
 * These are the functions you'll usually want to call
 * They take string arguments and return either hex or base-64 encoded strings
 */
function hex_sha1(s) {
	return binb2hex(core_sha1(str2binb(s), s.length * chrsz));
}

function b64_sha1(s) {
	return binb2b64(core_sha1(str2binb(s), s.length * chrsz));
}

function str_sha1(s) {
	return binb2str(core_sha1(str2binb(s), s.length * chrsz));
}

function hex_hmac_sha1(key, data) {
	return binb2hex(core_hmac_sha1(key, data));
}

function b64_hmac_sha1(key, data) {
	return binb2b64(core_hmac_sha1(key, data));
}

function str_hmac_sha1(key, data) {
	return binb2str(core_hmac_sha1(key, data));
}

/*
 * Perform a simple self-test to see if the VM is working
 */
function sha1_vm_test() {
	return hex_sha1("abc") == "a9993e364706816aba3e25717850c26c9cd0d89d";
}

/*
 * Calculate the SHA-1 of an array of big-endian words, and a bit length
 */
function core_sha1(x, len) {
	/* append padding */
	x[len >> 5] |= 0x80 << (24 - len % 32);
	x[((len + 64 >> 9) << 4) + 15] = len;

	var w = Array(80);
	var a = 1732584193;
	var b = -271733879;
	var c = -1732584194;
	var d = 271733878;
	var e = -1009589776;

	for(var i = 0; i < x.length; i += 16) {
		var olda = a;
		var oldb = b;
		var oldc = c;
		var oldd = d;
		var olde = e;

		for(var j = 0; j < 80; j++) {
			if(j < 16) w[j] = x[i + j];
			else w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);
			var t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)),
				safe_add(safe_add(e, w[j]), sha1_kt(j)));
			e = d;
			d = c;
			c = rol(b, 30);
			b = a;
			a = t;
		}

		a = safe_add(a, olda);
		b = safe_add(b, oldb);
		c = safe_add(c, oldc);
		d = safe_add(d, oldd);
		e = safe_add(e, olde);
	}
	return Array(a, b, c, d, e);

}

/*
 * Perform the appropriate triplet combination function for the current
 * iteration
 */
function sha1_ft(t, b, c, d) {
	if(t < 20) return(b & c) | ((~b) & d);
	if(t < 40) return b ^ c ^ d;
	if(t < 60) return(b & c) | (b & d) | (c & d);
	return b ^ c ^ d;
}

/*
 * Determine the appropriate additive constant for the current iteration
 */
function sha1_kt(t) {
	return(t < 20) ? 1518500249 : (t < 40) ? 1859775393 :
		(t < 60) ? -1894007588 : -899497514;
}

/*
 * Calculate the HMAC-SHA1 of a key and some data
 */
function core_hmac_sha1(key, data) {
	var bkey = str2binb(key);
	if(bkey.length > 16) bkey = core_sha1(bkey, key.length * chrsz);

	var ipad = Array(16),
		opad = Array(16);
	for(var i = 0; i < 16; i++) {
		ipad[i] = bkey[i] ^ 0x36363636;
		opad[i] = bkey[i] ^ 0x5C5C5C5C;
	}

	var hash = core_sha1(ipad.concat(str2binb(data)), 512 + data.length * chrsz);
	return core_sha1(opad.concat(hash), 512 + 160);
}

/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */
function safe_add(x, y) {
	var lsw = (x & 0xFFFF) + (y & 0xFFFF);
	var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
	return(msw << 16) | (lsw & 0xFFFF);
}

/*
 * Bitwise rotate a 32-bit number to the left.
 */
function rol(num, cnt) {
	return(num << cnt) | (num >>> (32 - cnt));
}

/*
 * Convert an 8-bit or 16-bit string to an array of big-endian words
 * In 8-bit function, characters >255 have their hi-byte silently ignored.
 */
function str2binb(str) {
	var bin = Array();
	var mask = (1 << chrsz) - 1;
	for(var i = 0; i < str.length * chrsz; i += chrsz)
		bin[i >> 5] |= (str.charCodeAt(i / chrsz) & mask) << (32 - chrsz - i % 32);
	return bin;
}

/*
 * Convert an array of big-endian words to a string
 */
function binb2str(bin) {
	var str = "";
	var mask = (1 << chrsz) - 1;
	for(var i = 0; i < bin.length * 32; i += chrsz)
		str += String.fromCharCode((bin[i >> 5] >>> (32 - chrsz - i % 32)) & mask);
	return str;
}

/*
 * Convert an array of big-endian words to a hex string.
 */
function binb2hex(binarray) {
	var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
	var str = "";
	for(var i = 0; i < binarray.length * 4; i++) {
		str += hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8 + 4)) & 0xF) +
			hex_tab.charAt((binarray[i >> 2] >> ((3 - i % 4) * 8)) & 0xF);
	}
	return str;
}

/*
 * Convert an array of big-endian words to a base-64 string
 */
function binb2b64(binarray) {
	var tab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
	var str = "";
	for(var i = 0; i < binarray.length * 4; i += 3) {
		var triplet = (((binarray[i >> 2] >> 8 * (3 - i % 4)) & 0xFF) << 16) |
			(((binarray[i + 1 >> 2] >> 8 * (3 - (i + 1) % 4)) & 0xFF) << 8) |
			((binarray[i + 2 >> 2] >> 8 * (3 - (i + 2) % 4)) & 0xFF);
		for(var j = 0; j < 4; j++) {
			if(i * 8 + j * 6 > binarray.length * 32) str += b64pad;
			else str += tab.charAt((triplet >> 6 * (3 - j)) & 0x3F);
		}
	}
	return str;
};

export default{
	hex_sha1,
	b64_sha1,
	str_sha1,
	hex_hmac_sha1,
	b64_hmac_sha1,
	str_hmac_sha1
}<template>
  <view>
    <!-- #ifdef H5 -->
    <transition :name="'cmd-'+name">
      <slot></slot>
    </transition>
    <!-- #endif -->
    <!-- #ifndef H5 -->
    <view :class="'cmd-'+name">
      <slot></slot>
    </view>
    <!-- #endif -->
  </view>
</template>

<script>
  /**  
   * 动画组件  
   * @description 复用动画切换组件,可自行拆取动画。  
   * @tutorial https://ext.dcloud.net.cn/plugin?id=211 
   * @property {String} name 动画名 - 默认：fade  
   * @example <cmd-transition name="fade">你好，uni-app</cmd-transition>  
   */
  export default {
    name: 'cmd-transition',

    props: {
      /**
       * 使用动画名
       * 淡入淡出 - fade、fade-up、fade-down、fade-left、fade-right
       * 滑动 - slide-up、slide-down、slide-left、slide-right
       * 弹动 bounce
       * 中部弹出 zoom
       * 中部弹入 punch
       * 飞入 fly
       */
      name: {
        type: String,
        default: 'fade'
      }
    }

  }
</script>

<style>
  /* #ifdef H5 */
  .cmd-bounce-enter-active {
    -webkit-animation: bounce-in .3s linear;
    animation: bounce-in 0.3s linear;
  }

  .cmd-bounce-leave-active {
    -webkit-animation: zoom-out .25s linear;
    animation: zoom-out 0.25s linear;
  }

  .cmd-zoom-enter,
  .cmd-zoom-leave-to {
    opacity: .01;
    -webkit-transform: scale(0.75);
    transform: scale(0.75);
  }

  .cmd-zoom-enter-active {
    -webkit-transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
    transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  .cmd-zoom-leave-active {
    -webkit-transition: all .25s linear;
    transition: all 0.25s linear;
  }

  .cmd-punch-enter,
  .cmd-punch-leave-to {
    opacity: .01;
    -webkit-transform: scale(1.35);
    transform: scale(1.35);
  }

  .cmd-punch-enter-active {
    -webkit-transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
    transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  .cmd-punch-leave-active {
    -webkit-transition: all .25s linear;
    transition: all 0.25s linear;
  }

  .cmd-slide-up-enter,
  .cmd-slide-up-leave-to {
    -webkit-transform: translate3d(0, 100%, 0);
    transform: translate3d(0, 100%, 0);
  }

  .cmd-slide-up-enter-active {
    -webkit-transition: -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1), -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .cmd-slide-up-leave-active {
    -webkit-transition: -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1), -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .cmd-slide-right-enter,
  .cmd-slide-right-leave-to {
    -webkit-transform: translate3d(-100%, 0, 0);
    transform: translate3d(-100%, 0, 0);
  }

  .cmd-slide-right-enter-active {
    -webkit-transition: -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1), -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .cmd-slide-right-leave-active {
    -webkit-transition: -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1), -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .cmd-slide-left-enter,
  .cmd-slide-left-leave-to {
    -webkit-transform: translate3d(100%, 0, 0);
    transform: translate3d(100%, 0, 0);
  }

  .cmd-slide-left-enter-active {
    -webkit-transition: -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1), -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .cmd-slide-left-leave-active {
    -webkit-transition: -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1), -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .cmd-slide-down-enter,
  .cmd-slide-down-leave-to {
    -webkit-transform: translate3d(0, -100%, 0);
    transform: translate3d(0, -100%, 0);
  }

  .cmd-slide-down-enter-active {
    -webkit-transition: -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1), -webkit-transform 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .cmd-slide-down-leave-active {
    -webkit-transition: -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1), -webkit-transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
  }

  .cmd-fade-enter,
  .cmd-fade-leave-to {
    opacity: 0.01;
  }

  .cmd-fade-enter-active {
    -webkit-transition: opacity 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
    transition: opacity 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  .cmd-fade-leave-active {
    -webkit-transition: opacity .25s linear;
    transition: opacity 0.25s linear;
  }

  .cmd-fade-up-enter,
  .cmd-fade-up-leave-to {
    opacity: .01;
    -webkit-transform: translate3d(0, 20%, 0);
    transform: translate3d(0, 20%, 0);
  }

  .cmd-fade-up-enter-active {
    -webkit-transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
    transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  .cmd-fade-up-leave-active {
    -webkit-transition: all .25s linear;
    transition: all 0.25s linear;
  }

  .cmd-fade-down-enter,
  .cmd-fade-down-leave-to {
    opacity: .01;
    -webkit-transform: translate3d(0, -20%, 0);
    transform: translate3d(0, -20%, 0);
  }

  .cmd-fade-down-enter-active {
    -webkit-transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
    transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  .cmd-fade-down-leave-active {
    -webkit-transition: all .25s linear;
    transition: all 0.25s linear;
  }

  .cmd-fade-right-enter,
  .cmd-fade-right-leave-to {
    opacity: .01;
    -webkit-transform: translate3d(-20%, 0, 0);
    transform: translate3d(-20%, 0, 0);
  }

  .cmd-fade-right-enter-active {
    -webkit-transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
    transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  .cmd-fade-right-leave-active {
    -webkit-transition: all .25s linear;
    transition: all 0.25s linear;
  }

  .cmd-fade-left-enter,
  .cmd-fade-left-leave-to {
    opacity: .01;
    -webkit-transform: translate3d(20%, 0, 0);
    transform: translate3d(20%, 0, 0);
  }

  .cmd-fade-left-enter-active {
    -webkit-transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
    transition: all 0.3s cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  .cmd-fade-left-leave-active {
    -webkit-transition: all .25s linear;
    transition: all 0.25s linear;
  }

  .cmd-fly-enter-active {
    -webkit-animation: fly-in .6s;
    animation: fly-in .6s;
    -webkit-animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  .cmd-fly-leave-active {
    -webkit-animation: zoom-out .25s;
    animation: zoom-out 0.25s;
  }

  @-webkit-keyframes fly-in {
    0% {
      opacity: .5;
      -webkit-transform: scale(0.5) translate3d(0, 0.5rem, 0);
      transform: scale(0.5) translate3d(0, 0.5rem, 0);
    }

    45% {
      opacity: 1;
      -webkit-transform: scale(1.05) translate3d(0, -0.5rem, 0);
      transform: scale(1.05) translate3d(0, -0.5rem, 0);
    }

    to {
      -webkit-transform: scale(1) translateZ(0);
      transform: scale(1) translateZ(0);
    }
  }


  @keyframes fly-in {
    0% {
      opacity: .5;
      -webkit-transform: scale(0.5) translate3d(0, 0.5rem, 0);
      transform: scale(0.5) translate3d(0, 0.5rem, 0);
    }

    45% {
      opacity: 1;
      -webkit-transform: scale(1.05) translate3d(0, -0.5rem, 0);
      transform: scale(1.05) translate3d(0, -0.5rem, 0);
    }

    to {
      -webkit-transform: scale(1) translateZ(0);
      transform: scale(1) translateZ(0);
    }
  }


  @-webkit-keyframes bounce-in {
    0% {
      -webkit-transform: scale(0.5);
      transform: scale(0.5);
    }

    45% {
      -webkit-transform: scale(1.05);
      transform: scale(1.05);
    }

    80% {
      -webkit-transform: scale(0.95);
      transform: scale(0.95);
    }

    to {
      -webkit-transform: scale(1);
      transform: scale(1);
    }
  }


  @keyframes bounce-in {
    0% {
      -webkit-transform: scale(0.5);
      transform: scale(0.5);
    }

    45% {
      -webkit-transform: scale(1.05);
      transform: scale(1.05);
    }

    80% {
      -webkit-transform: scale(0.95);
      transform: scale(0.95);
    }

    to {
      -webkit-transform: scale(1);
      transform: scale(1);
    }
  }


  @-webkit-keyframes zoom-out {
    to {
      opacity: .01;
      -webkit-transform: scale(0.75);
      transform: scale(0.75);
    }
  }


  @keyframes zoom-out {
    to {
      opacity: .01;
      -webkit-transform: scale(0.75);
      transform: scale(0.75);
    }
  }

  /* #endif */
  /* #ifndef H5 */
  .cmd-zoom {
    animation: zoom-in 0.3s;
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  @keyframes zoom-in {
    from {
      opacity: 0.01;
      transform: scale(0.75);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .cmd-punch {
    animation: punch-in 0.3s;
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  @keyframes punch-in {
    from {
      opacity: 0.01;
      transform: scale(1.35);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .cmd-fade {
    animation: fade .3s 1;
  }

  @keyframes fade {
    from {
      opacity: 0.01;
    }

    to {
      opacity: 1;
    }
  }

  .cmd-fade-left {
    animation: fade-left .3s 1;
  }

  @keyframes fade-left {
    from {
      opacity: 0;
      transform: scale(.8);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .cmd-fade-right {
    animation: fade-right .3s 1;
    animation-fill-mode: forwards;
  }

  @keyframes fade-right {
    from {
      transform: scale(1.2);
      opacity: 0;
    }

    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  .cmd-fade-up {
    animation: fade-up .3s 1;
  }

  @keyframes fade-up {
    from {
      transform: translate3d(0, 20%, 0);
      opacity: 0;
    }

    to {
      transform: translate3d(0, 0, 0);
      opacity: 1;
    }
  }

  .cmd-fade-down {
    animation: fade-down .3s 1;
  }

  @keyframes fade-down {
    from {
      transform: translate3d(0, -20%, 0);
      opacity: 0;
    }

    to {
      transform: translate3d(0, 0, 0);
      opacity: 1;
    }
  }

  .cmd-slide-right {
    animation: slide-right .3s 1;
  }

  @keyframes slide-right {
    from {
      transform: translateX(100%);
    }

    to {
      transform: translateX(0);
    }
  }

  .cmd-slide-left {
    animation: slide-left .3s 1;
  }

  @keyframes slide-left {
    from {
      transform: translateX(-100%);
    }

    to {
      transform: translateX(0);
    }
  }

  .cmd-slide-up {
    animation: slide-up .3s 1;
  }

  @keyframes slide-up {
    from {
      transform: translateY(-100%);
      opacity: 0;
    }

    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .cmd-slide-down {
    animation: slide-down .3s 1;
  }

  @keyframes slide-down {
    from {
      transform: translateY(100%);
      opacity: 0;
    }

    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .cmd-fly {
    animation: fly-in .6s;
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  @keyframes fly-in {
    0% {
      opacity: .5;
      -webkit-transform: scale(0.5) translate3d(0, 0.5rem, 0);
      transform: scale(0.5) translate3d(0, 0.5rem, 0);
    }

    45% {
      opacity: 1;
      -webkit-transform: scale(1.05) translate3d(0, -0.5rem, 0);
      transform: scale(1.05) translate3d(0, -0.5rem, 0);
    }

    to {
      -webkit-transform: scale(1) translateZ(0);
      transform: scale(1) translateZ(0);
    }
  }

  .cmd-bounce {
    animation: bounce-in 0.3s linear;
  }

  @keyframes bounce-in {
    0% {
      -webkit-transform: scale(0.5);
      transform: scale(0.5);
    }

    45% {
      -webkit-transform: scale(1.05);
      transform: scale(1.05);
    }

    80% {
      -webkit-transform: scale(0.95);
      transform: scale(0.95);
    }

    to {
      -webkit-transform: scale(1);
      transform: scale(1);
    }
  }

  /* #endif */
</style>
<template>
	<view class="empty-content">
		<image class="empty-content-image" :src="setSrc" mode="aspectFit"></image>
	</view>
</template>

<script>
	export default {
		props: {
			src: {
				type: String,
				default: 'empty'
			},
		},

		data() {
			return {
				typeSrc: {
					empty: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAACtCAYAAAANgcuAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Rjk5MjI3NjM1NUJGMTFFOThGRTZGQUIxMjY1ODk1QTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Rjk5MjI3NjQ1NUJGMTFFOThGRTZGQUIxMjY1ODk1QTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGOTkyMjc2MTU1QkYxMUU5OEZFNkZBQjEyNjU4OTVBOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGOTkyMjc2MjU1QkYxMUU5OEZFNkZBQjEyNjU4OTVBOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvBPHdgAAEY/SURBVHja7H3bkiTH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'
				},
			}
		},

		computed: {
			setSrc() {
				return this.typeSrc[this.src];
			},
		}
	}
</script>

<style lang="scss">
	.empty-content {
		display: flex;
		align-items: center;
		justify-content: center;
		flex-direction: column;
		
		position: fixed;
		left: 0;
		top: 0;
		right: 0;
		bottom: 0;
		background: $page-color-base;
		padding-bottom: 120upx;

		&-image {
			width: 200upx;
			height: 200upx;
		}
	}
</style>
<template>
	<view class="serach">
		<view class="content" :style="{'border-radius':radius+'px'}">
			<!-- HM修改 增加进入输入状态的点击范围 -->
			<view class="content-box" :class="{'center':mode === 2}" @click="getFocus">
				<text class="icon icon-serach">&#xe61c;</text>
				<!-- HM修改 增加placeholder input confirm-type confirm-->
				<input  :placeholder="placeholder" @input="inputChange" confirm-type="search" @confirm="triggerConfirm" class="input" :class="{'center':!active && mode === 2}" :focus="isFocus" v-model="inputVal" @focus="focus" @blur="blur"/>
				<!-- <view v-if="!active && mode === 2" class="input sub" @click="getFocus">请输入搜索内容</view> -->
				<!-- HM修改 @click换成@click.stop阻止冒泡 -->
				<text v-if="isDelShow" class="icon icon-del"  @click.stop="clear">&#xe644;</text>
			</view>
			<view v-show="(active&&show&&button === 'inside')||(isDelShow && button === 'inside')" class="serachBtn" @click="search">
				搜索
			</view>
		</view>
		<view  v-if="button === 'outside'" class="button" :class="{'active':show||active}" @click="search">
			<view class="button-item">{{!show?searchName:'搜索'}}</view>
		</view>
	</view>
</template>

<script>
export default {
	props: {
		mode: {
			value: Number,
			default: 1
		},
		//HM修改 定义默认搜索关键词(水印文字)
		placeholder:{
			value: String,
			default: '请输入搜索内容'
		},
		value: {
			type: String,
			default:false
		},
		button: {
			value: String,
			default: 'outside'
		},
		show: {
			value: Boolean,
			default: true
		},
		radius: {
			value: String,
			default: 60
		}
	},
	data() {
		return {
			active: false,
			inputVal: '',
			searchName: '取消',
			isDelShow: false,
			isFocus: false
		};
	},
	methods: {
		//HM修改 触发组件confirm事件
		triggerConfirm(){
			this.$emit('confirm', false);
		},
		//HM修改 触发组件input事件
		inputChange(event){
			var keyword = event.detail.value;
			this.$emit('input', keyword);
			if (this.inputVal) {
				this.isDelShow = true;
			}
		},
		focus() {
			this.active = true;
			//HM修改 增加获取焦点判断
			if (this.inputVal) {
				this.isDelShow = true;
			}
		},
		blur() {
			this.isFocus = false;
			if (!this.inputVal) {
				this.active = false;
			}
		},
		clear() {
			//HM修改 收起键盘
			uni.hideKeyboard();
			this.isFocus = false;
			this.inputVal = '';
			this.active = false;
			//HM修改 清空内容时候触发组件input
			this.$emit('input', '');
			//this.$emit('search', '');//HM修改 清空内容时候不进行搜索
			
		},
		getFocus() {
			this.isFocus = true;
		},
		search() {
			//HM修改 增加点击取消时候退出输入状态，内容为空时，输入默认关键字
			if (!this.inputVal) {
				if(!this.show&&this.searchName == '取消'){
					uni.hideKeyboard();
					this.isFocus = false;
					this.active = false;
					return;
				}
			}
			this.$emit('search', this.inputVal?this.inputVal:this.placeholder);
		}
	},
	watch: {
		inputVal(newVal) {
			if (newVal) {
				this.searchName = '搜索';
				//this.isDelShow = true; //HM修改 直接点击页面预设关键字样式异常，注销
			} else {
				this.searchName = '取消';
				this.isDelShow = false;
			}
		},
		//HM修改 双向绑定
		value(val) {
			this.inputVal = val;
		},
	}
};
</script>

<style lang="scss" scoped>
.serach {
	display: flex;
	width: 100%;
	//border-bottom: 1px #f5f5f5 solid; //HM修改 去掉边框
	box-sizing: border-box;
	font-size: $uni-font-size-base;
	.content {
		display: flex;
		align-items: center;
		width: 100%;
		height: 60upx;
		//border: 1px #ccc solid; //HM修改 去掉边框
		background: #fff;
		overflow: hidden;
		transition: all 0.2s linear;
		border-radius: 30px;

		.content-box {
			width: 100%;
			display: flex;
			align-items: center;
			&.center {
				justify-content: center;
			}
			.icon {
				padding: 0 15upx;
				&.icon-del {
					font-size: 38upx;
				}
			}
			.input {
				width: 100%;
				max-width: 100%;
				line-height: 60upx;
				height: 60upx;
				transition: all 0.2s linear;
				&.center {
					width: 200upx;
				}
				&.sub {
					// position: absolute;
					width: auto;
					color: grey;
				}
			}
		}
		.serachBtn {
			height: 100%;
			flex-shrink: 0;
			padding: 0 30upx;
			//HM修改 按钮背景色
			background:linear-gradient(to right,#ff9801,#ff570a);
			//background: $uni-color-success;
			line-height: 60upx;
			color: #fff;
			//border-left: 1px #ccc solid; //HM修改 去掉边框
			transition: all 0.3s;
		}
	}

	.button {
		display: flex;
		align-items: center;
		justify-content: center;
		position: relative;
		flex-shrink: 0;
		width: 0;
		transition: all 0.2s linear;
		white-space: nowrap;
		overflow: hidden;
		&.active {
			padding-left: 15upx;
			width: 100upx;
		}
	}
}
//HM修改 把字体改成本地加载
@font-face {font-family:"iconfont";src:url('data:application/x-font-woff;charset=utf-8;base64,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');}


.icon {
	font-family: iconfont;
	font-size: 32upx;
	font-style: normal;
	color: #999;
}
</style>
<template>
	<view>
		<view v-show="ifshow" @tap="ableClose" @touchmove.stop.prevent class="popup-layer" >
			
		</view>
		<view ref="popRef"  class="popup-content"   @tap.stop="stopEvent" :style="_location">
			<slot></slot>
		</view>
	</view>
</template>

<script>
	export default {
		name: 'popup-layer',
		model: {
			prop: "showPop",
			event: "change"
		},
		props: {
			showPop:{
				type:Boolean,
				default:false,
			},
			direction: {
				type: String,
				default: 'top', // 方向  top，bottom，left，right 
			},
			autoClose: {
				type: Boolean,
				default: true,
			}
		},
		data() {
			return {
				ifshow: false, // 是否展示,
				translateValue: -100, // 位移距离
				site:-100,
				timer: null,
				iftoggle: false,

			};
		},
		computed: {
			_translate() {
				const transformObj = {
					'top': `transform:translateY(${-this.translateValue}%)`,
					'bottom': `transform:translateY(${this.translateValue}%)`,
					'left': `transform:translateX(${-this.translateValue}%)`,
					'right': `transform:translateX(${this.translateValue}%)`
				};
				return transformObj[this.direction]
			},
			_location() {
				const positionValue = {
					'top': `bottom:${this.site}%;width:100%;`,
					'bottom': `top:${this.site}%;width:100%;`,
					'left': `right:0px;top:0;height:100%;`,
					'right': `left:0px;top:0;height:100%;`,
				};
				return positionValue[this.direction]+ this._translate;
			}
		},
		mounted(){
			if(this.showPop){
				this.show();
			}
		},
		watch:{
			showPop(value){
				if(value){
					this.show();
				}else{
					this.close();
				}
			}	
		},
		methods: {
			stopMove(event){
				return;
			},
			show(events) {
				this.ifshow = true;
				this.site=0;
				let _open = setTimeout(() => {
					this.translateValue = 0;
					_open = null;
				}, 100)
				let _toggle = setTimeout(() => {
					this.iftoggle = true;
					_toggle = null;
				}, 300);
			},
			close() {
				if (this.timer !== null || !this.iftoggle) {
					return;
				}
				this.translateValue = -100;
				this.timer = setTimeout(() => {
					this.ifshow = false;
					this.timer = null;
					this.iftoggle = false;
					this.$emit('closeCallBack', null);
					this.$emit('change',false)
				}, 300);
			},
			ableClose() {
				if (this.autoClose) {
					this.close();
				}
			},
			stopEvent(event) {},
			doSome(){
			}

		}
	}
</script>

<style lang="scss">
	.popup-layer {
		position: fixed;
		z-index: 999999;
		background: rgba(0, 0, 0, .3);
		height: 100%;
		width: 100%;
		top: 0px;
		left: 0px;
		overflow: hidden;
	}

	.popup-content {
		position: fixed;
		z-index: 1000000;
		// background: #FFFFFF;
		transition: transform .3s ease;
		overflow: hidden;
		// border:1px solid red;
	}
</style>
<template>
	<view v-if="show" class="mask" @click="toggleMask" @touchmove.stop.prevent="stopPrevent"
		:style="{backgroundColor: backgroundColor}"
	>
		<view 
			class="mask-content"
			@click.stop.prevent="stopPrevent"
			:style="[{
				height: config.height, 
				transform: transform
			}]"
		>
			<scroll-view class="view-content" scroll-y>
				<view class="share-header">
					分享到
				</view>
				<view class="share-list">
					<view 
						v-for="(item, index) in shareList" :key="index"
						class="share-item" 
						v-clipboard:copy="copyData"
					  v-clipboard:success="onCopy"
					  v-clipboard:error="onError"
						@click="shareToFriend(item)"
					>
						<image :src="item.icon" mode=""></image>
						<text>{{item.text}}</text>
					</view>
				</view>
			</scroll-view>
			<view class="bottom b-t" @click="toggleMask">取消</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				transform: 'translateY(50vh)',
				timer: 0,
				backgroundColor: 'rgba(0,0,0,0)',
				show: false,
				config: {},
				item:""
			};
		},
		props:{
			contentHeight:{
				type: Number,
				default: 0
			},
			//是否是tabbar页面
			hasTabbar:{
				type: Boolean,
				default: false
			},
			shareList:{
				type: Array,
				default: function(){
					return [];
				}
			},
			copyData:{//淘宝分享的字段
				type:String,
				default:""
			}
		},
		created() {
			const height = uni.upx2px(this.contentHeight) + 'px';
			this.config = {
				height: height,
				transform: `translateY(${height})`,
				backgroundColor: 'rgba(0,0,0,.4)',
			}
			this.transform = this.config.transform;
		},
		onLoad(options){//跳转带参
			this.inint();
		},
		methods:{
			toggleMask(){
				//防止高频点击
				if(this.timer == 1){
					return;
				}
				this.timer = 1;
				setTimeout(()=>{
					this.timer = 0;
				}, 500)
				
				if(this.show){
					this.transform = this.config.transform;
					this.backgroundColor = 'rgba(0,0,0,0)';
					setTimeout(()=>{
						this.show = false;
						this.hasTabbar && uni.showTabBar();
					}, 200)
					return;
				}
				
				this.show = true;
				//等待mask重绘完成执行
				if(this.hasTabbar){
					uni.hideTabBar({
						success: () => {
							setTimeout(()=>{
								this.backgroundColor = this.config.backgroundColor;
								this.transform = 'translateY(0px)';
							}, 10)
						}
					});
				}else{
					setTimeout(()=>{
						this.backgroundColor = this.config.backgroundColor;
						this.transform = 'translateY(0px)';
					}, 10)
				}
			},
			//防止冒泡和滚动穿透
			stopPrevent(){},
			//分享操作
			async shareToFriend(item){
				this.item=item;
				this.toggleMask();
			},
			 onCopy: function (e) {
					 let that = this;
					 let title=`复制口令成功，是否分享到${this.item.text}？`
					 uni.showModal({
						content: title,
						success: (res) => {
							if (res.confirm) {
								if(that.item.type==3){
									window.open("mqqwpa://im/chat?chat_type=wpa&uin=1247558534&version=1&src_type=web&web_src=oicqzone.com");
								}else{
									window.open("weixin://");
								}
								
							} else if (res.cancel) {
					 
							}
						}
					 });
			},
			onError: function (e) {
				this.$toast("复制失败");
			}
		}
	}
</script>

<style lang='scss'>
	.mask{
		position:fixed;
		left: 0;
		top: 0;
		right: 0;
		bottom: 0;
		display:flex;
		justify-content: center;
		align-items: flex-end;
		z-index: 998;
		transition: .3s;
		.bottom{
			position:absolute;
			left: 0;
			bottom: 0;
			display:flex;
			justify-content: center;
			align-items: center;
			width: 100%;
			height: 90upx;
			background: #fff;
			z-index: 9;
			font-size: $font-base + 2upx;
			color: $font-color-dark;
		}
	}
	
	.mask-content{
		width: 100%;
		height: 580upx;
		transition: .3s;
		background: #fff;
		border-radius: 20upx 20upx 0 0;
		&.has-bottom{
			padding-bottom: 90upx;
		}
		.view-content{
			height: 100%;
		}
	}
	.share-header{
		height: 110upx;
		font-size: $font-base+2upx;
		color: font-color-dark;
		display:flex;
		align-items:center;
		justify-content: center;
		padding-top: 10upx;
		&:before, &:after{
			content: '';
			width: 240upx;
			heighg: 0;
			border-top: 1px solid $border-color-base;
			transform: scaleY(.5);
			margin-right: 30upx;
		}
		 &:after{
			 margin-left: 30upx;
			 margin-right: 0;
		 }
	}
	.share-list{
		display:flex;
		flex-wrap: wrap;
	}
	.share-item{
		min-width: 33.33%;
		display:flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		height: 180upx;
		image{
			width: 80upx;
			height: 80upx;
			margin-bottom: 16upx;
		}
		text{
			font-size: $font-base;
			color: $font-color-base;
		}
	}
</style>
<template>
	<view class="uni-load-more">
		<view class="uni-load-more__img" v-show="status === 'loading' && showIcon">
			<view class="load1">
				<view :style="{background:color}"></view>
				<view :style="{background:color}"></view>
				<view :style="{background:color}"></view>
				<view :style="{background:color}"></view>
			</view>
			<view class="load2">
				<view :style="{background:color}"></view>
				<view :style="{background:color}"></view>
				<view :style="{background:color}"></view>
				<view :style="{background:color}"></view>
			</view>
			<view class="load3">
				<view :style="{background:color}"></view>
				<view :style="{background:color}"></view>
				<view :style="{background:color}"></view>
				<view :style="{background:color}"></view>
			</view>
		</view>
		<text class="uni-load-more__text" :style="{color:color}">{{status === 'more' ? contentText.contentdown : (status === 'loading' ? contentText.contentrefresh : contentText.contentnomore)}}</text>
	</view>
</template>

<script>
	export default {
		name: "uni-load-more",
		props: {
			status: {
				//上拉的状态：more-loading前；loading-loading中；noMore-没有更多了
				type: String,
				default: 'more'
			},
			showIcon: {
				type: Boolean,
				default: true
			},
			color: {
				type: String,
				default: "#777777"
			},
			contentText: {
				type: Object,
				default () {
					return {
						contentdown: "上拉显示更多",
						contentrefresh: "正在加载...",
						contentnomore: "到底啦~~"
					};
				}
			}
		},
		data() {
			return {}
		}
	}
</script>

<style>
	@charset "UTF-8";

	.uni-load-more {
		display: flex;
		flex-direction: row;
		height: 80upx;
		align-items: center;
		justify-content: center
	}

	.uni-load-more__text {
		font-size: 28upx;
		color: #999
	}

	.uni-load-more__img {
		height: 24px;
		width: 24px;
		margin-right: 10px
	}

	.uni-load-more__img>view {
		position: absolute
	}

	.uni-load-more__img>view view {
		width: 6px;
		height: 2px;
		border-top-left-radius: 1px;
		border-bottom-left-radius: 1px;
		background: #999;
		position: absolute;
		opacity: .2;
		transform-origin: 50%;
		animation: load 1.56s ease infinite
	}

	.uni-load-more__img>view view:nth-child(1) {
		transform: rotate(90deg);
		top: 2px;
		left: 9px
	}

	.uni-load-more__img>view view:nth-child(2) {
		transform: rotate(180deg);
		top: 11px;
		right: 0
	}

	.uni-load-more__img>view view:nth-child(3) {
		transform: rotate(270deg);
		bottom: 2px;
		left: 9px
	}

	.uni-load-more__img>view view:nth-child(4) {
		top: 11px;
		left: 0
	}

	.load1,
	.load2,
	.load3 {
		height: 24px;
		width: 24px
	}

	.load2 {
		transform: rotate(30deg)
	}

	.load3 {
		transform: rotate(60deg)
	}

	.load1 view:nth-child(1) {
		animation-delay: 0s
	}

	.load2 view:nth-child(1) {
		animation-delay: .13s
	}

	.load3 view:nth-child(1) {
		animation-delay: .26s
	}

	.load1 view:nth-child(2) {
		animation-delay: .39s
	}

	.load2 view:nth-child(2) {
		animation-delay: .52s
	}

	.load3 view:nth-child(2) {
		animation-delay: .65s
	}

	.load1 view:nth-child(3) {
		animation-delay: .78s
	}

	.load2 view:nth-child(3) {
		animation-delay: .91s
	}

	.load3 view:nth-child(3) {
		animation-delay: 1.04s
	}

	.load1 view:nth-child(4) {
		animation-delay: 1.17s
	}

	.load2 view:nth-child(4) {
		animation-delay: 1.3s
	}

	.load3 view:nth-child(4) {
		animation-delay: 1.43s
	}

	@-webkit-keyframes load {
		0% {
			opacity: 1
		}

		100% {
			opacity: .2
		}
	}
</style><!-- 底部loading，用于上拉加载 -->
<template>
	<view class="VBottomloading">
		<view v-if="finish" class="lastTips"><i class="left-line"></i>我们是有底线的<i class="right-line"></i></view>
		<view v-else class="infinite-scroll-preloader"></view>
	</view>
</template>

<script>
	export default {
		data() {
			return {

			}
		},
		props: {
			finish: {
				type: Boolean,
				default: false
			},
		},
		mounted() {

		},
		methods: {

		}
	}
</script>

<style lang="scss">
	.infinite-scroll-preloader {
		width: 36upx;
		height: 96upx;
		overflow: hidden;
		margin: 20upx auto 0;
		background: url("http://file.diy.51app.cn/wp/icoImg/loading.gif") no-repeat;
		background-size: 100%;
	}

	.lastTips {
		width: 100%;
		padding-bottom: 70upx;
		margin: 20upx 0 0;
		color: #a7a5a5;
		text-align: center;
		font-size: 28upx;
	}

	.lastTips i {
		display: inline-block;
		width: 200upx;
		height: 2upx;
		margin: 0 10upx 10upx;
	}

	.lastTips .left-line {
		background: linear-gradient(to right, #d9d9d9, #f0f0f0);
		background: -webkit-linear-gradient(right, #d9d9d9, #f0f0f0);
	}

	.lastTips .right-line {
		background: linear-gradient(to left, #d9d9d9, #f0f0f0);
		background: -webkit-linear-gradient(left, #d9d9d9, #f0f0f0);
	}
</style>
<template>
	<view class="changeType">
		<view class='leftsider'>
			<text  >全部分类</text>
			<!-- <text @click="toggle" :class='upOrDown?"icon-up":"icon-down"'></text> -->
		</view>
		<view class='rightsider' v-if='isChange' @click='change()'>
			<view class='icon-change'></view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				upOrDown:false

			};
		},
		methods: {
			change(){
				this.$emit("changeType")
			}
		},
		props: {
			value: {
				type: String,
				default: ""
			},
			isChange:{
				type: Boolean,
				default: true
			}
			
		},
	}
</script>

<style lang='scss'>
	.changeType{
		@include allCenter();
		padding:35upx 30upx;
		display: flex;
		align-items: center;
		justify-content: space-between;
		.leftsider{
			flex: 0 0 80%;
			display: flex;
			align-items: center;
			font-size:28upx;
			font-weight:bold;
			color:rgba(51,51,51,1);
			text-align: left;
			.icon-down{
				width:12upx;
				height:12upx;
				background:url(/static/my/icon-down.png) no-repeat;
				background-size: 100%;
				margin-left: 18upx;
			}
			.icon-up{
				width:12upx;
				height:12upx;
				background:url(/static/my/icon-up.png) no-repeat;
				background-size: 100%;
				margin-left: 18upx;
			}
		}
		.rightsider{
			flex: 0 0 20%;
			display: flex;
			align-items: center;
			flex-direction: row-reverse;
			justify-items: right;
			.icon-change{
				width:30upx;
				height:30upx;
				background:url(/static/my/icon-change.png) no-repeat;
				background-size: 100%;
			}
		}
		
	}
</style>
<!-- 无数据时的展示，可传入图片地址 img -->
<template>
	<view class="VEmpty">
		<image class="VEmpty-image" :src="img" mode="aspectFit"></image>
	</view>
</template>

<script>
	export default {
		props: {
			img: {
				type: String,
				default: '/static/common/empty.png'
			},
		},

		data() {
			return {

			}
		},

		computed: {

		}
	}
</script>

<style lang="scss">
	.VEmpty {
		display: flex;
		align-items: center;
		justify-content: center;
		flex-direction: column;
		padding: 50upx;
		&-image {
			width: 270upx;
			height: 324upx;
			// margin: 40upx auto;
		}
	}
	
</style>
<template>
	<view class="VGoods" >
		<view v-for="(item, index) in goodsList" :key="index" :class="[type==1?'VGoods-item itemType1':'VGoods-item itemType2',className]"
		 @tap="clickGoods(item)">
			<view class='leftCheck checkW' v-if='type==2&&isDelect' @click.stop='check(item.numIid)'>
				<view :class='item.isCheck?"icon-check icon":"icon-unCheck icon"'></view>
			</view>
			<view :class='{"rightCheck":isDelect}'>
				<view class='checkW' v-if='type==1&&isDelect' @click.stop='check(item.numIid)'>
					<view :class='item.isCheck?"icon-check icon":"icon-unCheck icon"'></view>
				</view>
				<view class="image-wrapper ">
					<!-- src="@/static/imgLoading.gif" -->
					<img v-img="item.pictUrl" alt="">
				</view>
				<view class='content'>
					<view class='detail' v-if='type==2'>
						<view class='comeFrom icon-taobao' v-if='item.userType==0'></view>
						<view class='comeFrom icon-tianmao' v-if='item.userType==1'></view>
						<view class='comeFrom icon-pidd' v-if='item.userType==3'></view>
						<view class='comeFrom icon-jd' v-if='item.userType==4'></view>
						<view class="title">{{item.title}}</view>
					</view>
					<view class='detail' v-if='type==1'>
						<view class='comeFrom icon-jd' v-if='item.userType==4'></view>
						<view class="title" :class="[item.userType==4?'title titleJd':'title']">{{item.title}}</view>
					</view>
					 <view v-if='type==2'> <!--横-->
						<text class='shipping' v-if='type==2&&item.userType!=4'>包邮</text>
						<view class="price">
							<view class='spellGroup' v-if='item.userType==4&&item.pinGou'></view>
							<text class='nowP'>￥{{item.zkFinalPrice}}</text>
							<!-- <view class='icon-art'></view> -->
							<text class='oriP' >￥{{item.reservePrice}}</text>
						</view>
						<view class='savingP'>
							<view  :class='comFrom?"lefsider lefsider2":"lefsider"'>
								<!-- <view class='spellGroup' v-if='item.userType==4&&item.pinGou'></view> -->
								<view class="juan">
									<view class='bg'>
										<image class='leftSider' src="/static/index/juan-left.png"></image>
										<image class='middle' src="/static/index/juan-middle.png"></image>
										<image class='rightSider' src="/static/index/juan-right.png"></image>
									</view>
									￥{{Math.floor(item.couponAmount||0) }}
								</view>
								<view class='saveM' v-if='type==2'>返{{item.returnMoney||0 }}元</view>
							</view>
							<view class='btnJdPay' v-if='item.userType==4'></view>
							<view class='btnJdPay1' @click.stop='jdshare(item)' v-if='item.userType==4'></view>
							<view class='person' v-if='isNoSales&&item.userType!=4'>{{item.volume }}人付款</view>
						</view>
						<view class='store' v-if='item.userType==4'>
							<view class='byself' v-if='item.owner=="g"'></view>
							<view class='storeName'>{{item.shopName}}</view>
							<view class='person' v-if='isNoSales'>{{item.volume }}人付款</view>
						</view>
					</view>
					<view v-if='type==1' class='type1'><!--竖着-->
						<view class='savingP'>
							<view class='lefsider'>
								<view class='spellGroup' v-if='item.userType==4&&item.pinGou'></view>
								<view class="juan">
									<view class='bg'>
										<image class='leftSider' src="/static/index/juan-left.png"></image>
										<image class='middle' src="/static/index/juan-middle.png"></image>
										<image class='rightSider' src="/static/index/juan-right.png"></image>
									</view>
									￥{{item.couponAmount||0 }}
								</view>
								<view class='saveM' >返{{item.returnMoney||0}}元</view>
							</view>
							
						</view>
						<view class="price">
							<view class='leftsider'>
								<text class='nowP'>￥{{item.zkFinalPrice}}</text>
								<text class='oriP' v-if='isNoSales'>￥{{item.reservePrice}}</text>
							</view>
						</view>
						<view class='bottom'>
							<view v-if='item.userType!=4'>
								<view class='icon icon-taobao' v-if='item.userType==0'></view>
								<view class='icon icon-tianmao' v-if='item.userType==1'></view>
							</view>
							<view class='byself' v-if='item.owner=="g"&&item.userType==4'></view>
							<view class='storeName' v-if='item.userType==4' :class="[item.userType==4?'storeName storeName1':'storeName']">{{item.shopName}}</view>
							<view class='personTpe1' v-if='isNoSales' :class="[item.userType==4?'personTpe1 personTpe2':'personTpe1']">{{item.volume }}人付款</view>
						</view>
					</view>
					
				
				
				</view>

			</view>

		</view>
	</view>
</template>

<script>
	import { sending } from '@/common/bridge'
	export default {
		data() {
			return {
				isCheck: false,
				userInfo: this.$store.getters.userInfo			}
		},
		// 首页的实例，用于控制商品是否跳转
		inject: {
			theme: {
				default: () => ({})
			}
		},
		props: {
			goodsList: {
				type: Array,
				default: () => {
					return []
				}
			},
			type: {
				type: Number,
				default: 1
			},
			isDelect: {
				type: Boolean,
				default: false //收藏夹
			},
			isNoSales: {
				type: Boolean,
				default: true //收藏夹
			},
			isClick:{
				type: Boolean,
				default: true //是否可以点击
			},
			comFrom:{
				type: Boolean,
				default: false //是否来自收藏夹
			},
			channel:{
				type:Number,
				default:0 //0是淘宝，1是拼多多 2是京东//4跟ios交互
			},
			className:{
				type:String,
				default:"" 
			},
			optionsType:{//淘宝活动页面传类型
				type:String,
				default:"" 
			}
			

		},
		mounted() {
			
		},
		methods: {
			//详情页
			clickGoods(item) {
				if(this.optionsType){
					// debugger;
					let obj={
						type:'8',
						item:item
					}
					if(this.optionsType=='android'){
						
						jsActivity.onCall(JSON.stringify(obj))
						return
					}else{
						sending(obj)
						return
					}
				}
				
				
				if(item.userType==4){//京东
					this.isLogin(item,1);
					return
				}
				//
				// 如果有isSwiper且为true的话就阻止跳转
				if(this.theme.isSwiper){
					return
				}
				if(!this.isClick){
					this.$emit('check', item.numIid);
					return;
				}
				item.couponId=item.couponId?item.couponId:'';
				
				uni.navigateTo({
					url: `/pages/product/product?id=${item.numIid}&terraceType=${item.terraceType}&couponId=${item.couponId}`
				})
				
				console.log(111,item.numIid,item.couponId)

			},
			check(id) {
				this.$emit('check', id);
			},
			async getJdCode(item,type){//京东
				console.log(22,item)
				let res= await this.$api.jdGenerateGoodsPromUrl({
						channelType: "HTML5",
						chainType:2,
						couponUrl:item.couponLink||"",
						materialId:item.materialUrl
					});
				if(type==1){
					if(item.couponAmount==0){
						this.$commonLogic.href(res.data.shortURL);
					}else{
						let text=`${res.data.shortURL}`;
						let that=this;
						uni.showModal({
						    title: '请使用微信打开',
						    content: text,
						    success: function (res) {
						        if (res.confirm) {
						           
						            that.$copyText(text).then(function(){
						            	that.$toast('复制成功')
						            	setTimeout(function() {
						            		window.open('weixin://');
						            	}, 300);
						            },function(){
						            	that.$toast('复制失败，请稍后重试')
						            })
									
						        } else if (res.cancel) {
						            console.log('用户点击取消');
						        }
						    }
						});
					}
				}else{
					// let text=`${item.title}${res.data.shortURL}`
					let text=`${item.title}\n${item.shopName}\n商品链接:${res.data.shortURL}`
					console.log(text)
					this.$emit('openPop', text);
				}
				
			},
			isLogin(item,type){
				if(this.userInfo){
					this.getJdCode(item,type);
				}else{
					let url=encodeURIComponent(`${window.location.href}`)
					url=`/pages/public/login?url=${url}`
					uni.navigateTo({
						url:url
					})
				}
				
			},
			jdshare(item){
				this.isLogin(item,2);
				
			}
		}
	}
</script>

<style lang="scss">
	.VGoods {
		display: flex;
		flex-wrap: wrap;
		padding: 0 30upx;
		background: #fff;

		.VGoods-item {
			display: flex;
			width: 48.5%;
			margin-bottom: 18upx;
			padding-bottom: 20upx;
			background: rgba(255, 255, 255, 1);
			box-shadow: 0 5upx 10upx 2upx rgba(212, 212, 212, 0.35);
			border-radius: 10upx;
			background-color: #fff;
			border-radius:24upx;


		}

		.itemType1:nth-child(2n+1) {
			margin-right: 3%;
		}

		.image-wrapper {
			width: 100%;
			height: 334upx;
			border-radius: 10upx 10upx 0 0;
			// overflow: hidden;
			position: relative;

			img{
				width: 100%;
				height: 100%;
				opacity: 1;
				border: 0;
			}

			.icon-save {
				width: 124upx;
				height: 40upx;
				position: absolute;
				top: 0;
				left: 0;
				background: url(/static/index/icon-save.png) no-repeat;
				background-size: 100%;
				font-size: 24upx;
				color: #fff;
				padding-left: 10upx;
				line-height: 40upx;
			}
		}

		.title {
			font-size: $font-sm;
			color: $font-color-dark;
			font-size: 24upx;
			font-weight: 500;
			color: rgba(51, 51, 51, 1);
			line-height: 36upx;
			@include ellipsis(2);
			float: left;
			margin: 10upx 0 10upx ;
			text-indent: 40upx;
			height: 68upx;
			width: 100%;
			word-break: break-all;
		}

		.price {
			font-size: 30upx;
			color: $uni-color-primary;
			font-weight: 500;
			display: flex;
			align-items: center;

			.icon-art {
				width: 72upx;
				height: 30upx;
				background: url(/static/index/icon-juan.png) no-repeat;
				background-size: 100%;
				font-size: $font-sm;
				float: left;
				margin: 10upx 0 0 6upx;
			}

			.nowP {
				// float: left;
				color: rgba(191, 54, 39, 1);
				margin-right: 15upx;
			}

			.oriP {
				font-size: $font-sm;
				color: rgba(153, 153, 153, 1);
				text-decoration: line-through;
				
			}
		}

		.content {
			padding: 0 13upx;

			.savingP {
				padding-top: 10upx;
				width: 100%;
				overflow: hidden;
				display: flex;
				align-items: center;
			}

			.juan {
				position: relative;
				font-size: 24upx;
				color: rgba(191, 54, 39, 1);
				float: left;
				margin-right: 6upx;
				padding: 0 10upx 0 50upx;
				clear: both;
				display: flex;
				align-items: center;
				height: 30upx;
				line-height: 30upx;

				.bg {
					width: 100%;
					position: absolute;
					left: 0;
					top: 0;
					display: flex;
					align-items: center;
					height: 30upx;

					.leftSider {
						position: absolute;
						top: 0;
						left: 0;
						width: 44upx;
						height: 100%;
					}

					.middle {
						width: 100%;
						height: 30upx;
						margin: 0 8upx 0 44upx;
						min-width: 30upx;
						box-sizing: border-box;

					}

					.rightSider {
						width: 8upx;
						position: absolute;
						top: 0;
						right: 0;
						height: 100%;
					}



				}

				.saving {
					font-size: 18upx;
					position: absolute;
					left: 10upx;
					top: 5upx;
				}
			}

			.person {
				font-size: $font-sm;
				color: rgba(153, 153, 153, 1);
				line-height: 36upx;
				flex: 0 0 50%;
				text-align: right;
			}

			.lefsider {
				flex: 0 0 50%;
				height: 30upx;
			}
			.saveM {
				font-size: 22upx;
				font-weight: bold;
				color:rgba(255,40,40,1);
				background:rgba(255,218,218,1);
				border-radius: 4upx;
				padding:3upx 10upx;
			
			}
			.lefsider {
				flex: 0 0 66%;
				display: flex;
				align-items: center;
			}

		}

		.detail {
			position: relative;
			overflow: hidden;
		}

		.comeFrom {
			width: 30upx;
			height: 30upx;
			margin-right: 18upx;
			position: absolute;
			top: 12upx;
			left: 0;
		}

		.icon-taobao {
			background: url(/static/index/icon-taobao.png) no-repeat;
			background-size: 100%;
		}

		.icon-tianmao {
			background: url(/static/index/icon-tianmao.png) no-repeat;
			background-size: 100%;
		}
		.icon-pidd {
			background: url(/static/index/icon-pidd.png) no-repeat;
			background-size: 100%;
		}
		.icon-jd{
			background: url(/static/index/icon-jd.jpg) no-repeat;
			background-size: 100%;
		}


		.itemType2 {
			width: 100%;
			position: relative;
			box-shadow: none;
			border-radius: 0;
			display: flex;

			.image-wrapper {
				width: 240upx;
				height: 240upx;
				border-radius: 10upx;
				position: absolute;
				top: 0;
				left: 0;
			}

			.content {
				padding-left: 260upx;

			}

			.shipping {
				padding: 4upx 9upx;
				background: rgba(255, 255, 255, 1);
				border: 1upx solid rgba(191, 54, 39, 1);
				border-radius: 4upx;
				font-size: 18upx;
				font-weight: 400;
				color: rgba(191, 54, 39, 1);
				line-height: 42upx;
			}

			

			

			.person {
				flex: 0 0 34%;
			}

			.title {
				margin-bottom: 20upx;
			}
			.checkW {
				flex: 0 0 7%;
				align-items: center;
				display: flex;
			}
			
			.rightCheck {
				flex: 0 0 93%;
				display: flex;
				align-items: center;
				position: relative;
			
			}
		}
	}


	.itemType1 {
		.rightCheck {
			position: relative;

			.checkW {
				padding: 20upx;
				position: absolute;
				top: 0;
				right: 0;
				z-index: 999;

				.icon {
					margin-right: 0;
				}
			}
		}
		.price{
			margin-top: 8upx;
			display: flex;
			align-items: center;
			justify-content: space-between;
			.leftsider{
				flex: 0 0 100%;
				display: flex;
				align-items: center;
				.oriP{
					font-size: 20upx;
					font-weight: 400;
				}
			}
		}
		.detail .title{
			text-indent: 0;
		}
		.bottom{
			display: flex;
			align-items: center;
			margin-top: 8upx;
			.icon{
				width: 30upx;
				height: 30upx;
				margin-right: 18upx;
			}
			.personTpe1{
				font-size: 24upx;
				color: #999999;
				line-height: 36upx;
				
			}
		}
		.content .savingP{
			padding-top: 0;
			
		}
		.content .leftsider{
			flex: 0 0 100%;
		}
		.type1 .lefsider{
			    flex: 0 0 100%;
		}
	}

	.checkW {

		.icon {
			width: 30upx;
			height: 30upx;
			border-radius: 50%;
			margin-right: 30upx;
		}

		.icon-check {
			background: url(/static/my/icon-check.png) no-repeat;
			background-size: 100%;

		}

		.icon-unCheck {
			background: url(/static/my/icon-unCheck.png) no-repeat;
			background-size: 100%;

		}
	}
	.itemType2{
		.image-wrapper{
			    box-shadow: 0 2upx 5upx 0upx rgba(212, 212, 212, 0.35);
		}
		.savingP .lefsider2{
			flex: 0 0 100%;
		}
	}
	.spellGroup{
		width: 30upx;
		height: 30upx;
		background:url(../static/cashBonus/icon-pin.png) no-repeat;
		background-size: 100% 100%;
		margin-right: 6upx;
	}
	.btnJdPay{
		width: 145upx;
		height: 42upx;
		background: url(../static/index/freeToBuy/btn-jdPay.png) no-repeat;
		background-size: 100% 100%;
	}
	.btnJdPay1{
		width: 74upx;
		height: 94upx;
		position: absolute;
		right: 90upx;
		top: 118upx;
		// border: 1px solid red;
	}
	.store{
		display: flex;
		align-items: center;
		font-size:22upx;
		color:rgba(153,153,153,1);
		margin-top:14upx;
		.byself{
			// font-size:18upx;
			// color:rgba(255,255,255,1);
			// padding: 4upx 10upx;
			// background:rgba(255,45,44,1);
			margin-right: 12upx;
		}
		.person{
			margin-left: auto;
		}
	}
	.byself{
		width: 54upx;
		height: 24upx;
		background: url(../static/cashBonus/zutuan.png) no-repeat;
		background-size: 100% 100%;
		margin-right: 12upx;
	}
	.personTpe2{
		margin-left: auto;
	}
		
	.storeName{
		font-size:22upx;
		flex:40%;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
		color:rgba(153,153,153,1);
	}
	.storeName1{
		flex:30%;
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
	}
	.titleJd{
		    text-indent: 40upx !important;
	}
	.taobao-goods{
		border-radius: 24upx !important;
		padding-bottom: 0 !important;
		img{
			border-radius: 10upx 0 0 10upx !important;
		}
	}
	.taobao-goods .content{
		height: 240upx;
	}
</style>
<template>
	<view class="VFull">
		<view class='content' >
			<!-- <view class='item leftsider' v-for='(item,index) in lData' :key='index' @click="jump1(item,index)">
				<img :src="item.imageUrl" alt="">
			</view> -->
			<view class='item leftsider' >
				<img :src="rData[0].imageUrl" alt="" @click="jump1(rData[0],0)">
			</view>
			<view class='item rightsider'>
				<!-- <view  class='item2 active' >
					<img src="../static/index/card.png" alt="" @click="go">
				</view> -->
				<!-- <view  class='item2'  v-for='(item,index) in rData' v-if='index!=0' :key='index'  @click="jump1(item,index)">
					<img :src="item.imageUrl" alt="" >
				</view> -->
				
				<view  class='item2 active'  >
					<img src="../static/index/card.png" alt="" @click="go">
					<!-- <img :src="rData[1].imageUrl" alt="" @click="jump1(rData[2],2)"> -->
				</view>
				<view  class='item2'  >
					<img :src="rData[2].imageUrl" alt=""  @click="jump1(rData[2],2)">
				</view>
			</view>
			
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				lData:'',
				rData:''
			}
		},
		watch:{
			List: {
				handler(newName, oldName) {
				  this.lData=newName.filter(item=>{
				  	return item.id==89
				  })
				  this.rData=newName.filter(item=>{
				  	return item.id!=89
				  })
				},
				immediate: true,
				deep: false
			  }
		},
		methods:{
			jump1(item,index){
				// 将角标也一并传出
				item = Object.assign({},item,{itemIndex:index})
				
				this.$emit("jump",item)
			},
			go(){
				location.href = 'https://api.51app.cn/loanapi/url/jyzh2n0a'
			}
		},
		props: {
			List: {
				type: Array,
				default: ()=>{
					return []
				}
			}
		}
		
	}
</script>

<style lang="scss">
	.content{
		padding: 22upx 24upx 40upx;
		display: flex;
		align-items: center;
		justify-content: space-between;
		flex-wrap: wrap;
		.item{
			width: 342upx;
			
		}
		.item2{
			margin-top:20upx;
		}
		.active{
			margin-top: 0;
		}
		img{
			border-radius:10upx;
		}
	}
	
</style>
<!--我的页面组件-->
<template>
	<view class='myList'>
		<view class='item' v-for='(item,index) in list' :key='index' @click='choose(item.id)'>
			<view class='leftsider'>
				<image class='icon' v-if='item.imgSrc' :src="item.imgSrc" alt=""></image>
				<text class='title'>{{item.title}}</text>
			</view>
			<view class='rightsider'>
				<view class='icon-right'>
				</view>
				<view class='tip'>{{item.tip}}</view>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				
			}
		},
		props: {
			list: {
				type: Array,
				default: ()=>{
					return []
				}
			}
		},
		methods: {
			choose(id){
				this.$emit("choose",id);
			}
		}
	}
</script>

<style  lang='scss'>
	.item{
		display: flex;
		align-items: center;
		position: relative;
		padding: 0 35upx 0 41upx;
		height: 98upx;
		.leftsider{
			flex: 0 0 50%;
			text-align: left;
			display: flex;
			align-items: center;
			.icon{
				width: 36upx;
				height: 36upx;
				margin-right:38upx;
			}
			.title{
				font-size:28upx;
				font-weight:500;
				color:rgba(51,51,51,1);
			}
		}
		.rightsider{
			flex: 0 0 50%;
			text-align: right;
			display: flex;
			align-items: center;
			justify-items: right;
			flex-direction:row-reverse;
			.icon-right{
				width: 18upx;
				height: 32upx;
				background:url(/static/my/icon-right.png) no-repeat;
				background-size: 100%;
				margin-left: 18upx;
			}
			.tip{
				text-align: right;
			}
		}
	}
	.item::after{
		@include border-1px(rgba(242,242,242,1),bottom);
	}
	.myList{
		background-color: #fff;
		}
</style>
	<!-- 订单列表 -->
<template>
	<view class='orderList'>
	
		<view class='order-item' v-for='(item,index) in tabItem' :key='index'>
			<view class='top'>
				<text class='orderNum'>订单编号：{{item.tradeId }}</text>
				<text class='isPay'>{{item.tkStatusVal}}</text>
			</view>
			<view class='middle'>
				<view class='leftsider'>
					<!-- <view class='comeFrom'></view> -->
					<view class='comeFrom icon-taobao' v-if='item.orderType=="淘宝"'></view>
					<view class='comeFrom icon-tianmao' v-if='item.orderType=="天猫"'></view>
					<view class='comeFrom icon-pidd' v-if='item.orderType=="拼多多"'></view>
					<view class='comeFrom icon-jd' v-if='item.orderType=="京东"'></view>
					<view class="title">{{item.itemTitle}}</view>
				</view>
				<view class='rightsider'>
					<view class='originPrice'>￥{{item.price}}</view>
					<view class='num'>x1</view>
				</view>
			</view>
			<view class='middle2 comH'>
				<view class='detail'>订单将在确认收货之后结算</view>
				<view class='price'>
					<text>共1件商品</text>
					<text class='all'>合计：</text>
				</view>
				<view class='money'>￥{{item.alipayTotalPrice }}</view>
			</view>
			<view class='bottom comH' >
				<view class='detail'></view>
				<view class='price'>
					<text class='icon-isPay' v-if='item.commissionStatus==1'>待结算</text>
					<text class='icon-isPay payDown' v-if='item.commissionStatus==2'>已结算</text>
					<text class='icon-isPay payDown1' v-if='item.commissionStatus==3'>已取消</text>
					<text class='all'>佣金：</text>
				</view>
				<view class='money'>￥{{item.totalCommissionFee }}</view>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				
			};
		}
		,props:{
			tabItem:{
				type:Array,
				default:function(){
					return []
				}
			}
		}
	}
</script>

<style lang="scss">
.order-item{
	height:320upx;
	background:rgba(255,255,255,1);
	border-radius:10upx;
	margin: 24upx 24upx;
	padding:0 0 30upx;
	.top{
		font-size:$font-sm;
		color:rgba(51,51,51,1);
		display: flex;
		align-items: center;
		position: relative;
		line-height: 58upx;
		padding:15upx 24upx;
		.orderNum{
			flex: 0 0 80%;
			text-align: left;
		}
		.isPay{
			flex: 0 0 20%;
			text-align: right;
			color:rgba(255,115,13,1);
		}
		&::after{
			 @include border-1px(rgba(242,242,242,1),bottom);
		}
	}
	.middle{
			display: flex;
			align-items: center;
			padding:0 24upx;
			margin-bottom: 20upx;
		.leftsider{
			position: relative;
			flex:0 0 80%;
			line-height: 45upx;
			.title {
				font-size:$font-sm;
				color: $font-color-dark;
				font-size:24upx;
				font-weight:500;
				color:rgba(51,51,51,1);
				line-height:36upx;
				 @include ellipsis(2);
				 float: left;
				 margin: 22upx 0 10upx;
				 text-indent: 40upx;
				 height: 68upx;
				 width: 100%;
			}
			.comeFrom{
				width:30upx;
				height: 30upx;
				background: url(/static/index/icon-taobao.png) no-repeat;
				background-size: 100%;
				margin-right: 18upx;
				position: absolute;
				top:24upx;
				left: 0;
			}
			.icon-taobao {
				background: url(/static/index/icon-taobao.png) no-repeat;
				background-size: 100%;
			}
			
			.icon-tianmao {
				background: url(/static/index/icon-tianmao.png) no-repeat;
				background-size: 100%;
			}
			.icon-pidd {
				background: url(/static/index/icon-pidd.png) no-repeat;
				background-size: 100%;
			}
			.icon-jd{
				background: url(/static/index/icon-jd.jpg) no-repeat;
				background-size: 100%;
			}
		}
		.rightsider{
			flex:0 0 20%;
			font-size:$font-sm;
			font-weight:400;
			color:rgba(102,102,102,1);
			line-height: 45upx;
			text-align: right;
		}
	}
	.comH{
		display: flex;
		font-size:$font-sm;
		align-items: center;
		padding:0 24upx;
		margin-bottom: 14upx;
		.detail{
			flex:0 0 50%;
			color:rgba(153,153,153,1);
			line-height:42upx;
			text-align: left;
			
		}
		.price{
			flex:0 0 35%;
			color:rgba(51,51,51,1);
			text-align:right;
			.all{
				padding-left: 10upx;
			}
			.icon-isPay{
				text-align: right;
				background:rgba(255,232,230,1);
				padding:4upx 9upx;
				font-size:18upx;
				font-weight:500;
				color:rgba(191,54,39,1);
			}
			.payDown{
					color:rgba(39,191,64,1);
					background:rgba(230,255,234,1);
				}
			.payDown1{
					 color: #ff7f23;
					background: #ffead0;
				}
		}
		.money{
			flex:0 0 15%;
			text-align: right;
			
		}
	}
 
}
	
</style>
<!-- 公共的手机验证码 -->
<template>
	<view class="VPay" >
		<view class='title'>提现到</view>
		<view class="item b-t" >
			<image class="icon" src="/static/earning/icon-alipay.png"></image>
			<view class='tips' v-html="alipayAccount?alipayAccount:'您暂未绑定支付宝'"></view>
			<view class='bind' @click='bindAlipay' v-html="alipayAccount?'更换':'绑定'"></view>
			<radio value='alipay' @click='radioChange' :checked="checkV==1" class='choose' />
		</view>
		
	</view>

</template>

<script>
	export default {
		data() {
			return {
				checkV:1,
				list:[{
					
				},{
					
				}]
				
			}
		},
		props: {
			alipayAccount: {
				type: String
			},
		},
		mounted() {
		// this.changeImgCode()

		},
		methods: {
			radioChange(e){
				console.dir(e)
				
			},
			bindAlipay(){
				uni.navigateTo({
					url: `/pages/earning/binAlipay`
				})
			}
			
		},
		watch: {
		},
	}
</script>

<style lang="scss">
	.title{
		font-size:28upx;
		font-weight:700;
		color:rgba(51,51,51,1);
		margin: 25upx 48upx 15upx;
	}
	.item{
		display: flex;
		align-items: center;
		padding: 30upx 48upx 30upx 48upx;
		.icon{
			width:170upx;
			height: 60upx;
		}
		.tips{
			width: 280upx;
			font-size:28upx;
			font-weight:400;
			color:rgba(153,153,153,1);
			margin-left: 54upx;
		}
		.bind{
			font-size:28upx;
			color:rgba(84,160,255,1);
			padding:0 0 0 29upx;
			align-items: right;
		}
		.choose{
			margin-left: auto;
		}
	}
</style>
<!-- 公共的手机验证码 -->
<template>
	<view class="VPhone" :class="{type2:type==2}">

		<view class="VPhone-phone" v-if='type==2'>
			<image class="VPhone-icon" src="/static/earning/phone.png"></image>
			<view class="VPhone-name">手机号码</view>
			<input class="VPhone-input" type="number" maxlength="11" :placeholder="phoneText" v-model="phone"  />
		</view>
		<view class="VPhone-code">
			<image class="VPhone-icon" src="/static/earning/imgCode.png"></image>
			<view class="VPhone-name">图形验证</view>
			<input class="VPhone-input"  maxlength="4" placeholder="请输入验证码" v-model="imgCode" v-if='type!=3'/>
			<input class="VPhone-input"  maxlength="4" placeholder="请输入验证码" v-model="imgCode" placeholder-style="fontSize:24upx" v-if='type==3' />
			<!-- <image ref='imgCode'  @click='changeImgCode' class='imgCode'></image> 不支持 -->
			<img :src="imgUrl" alt=''  @click='changeImgCode' class='imgCode'>
		</view>
		<view class="VPhone-code bt20">
			<image class="VPhone-icon" src="/static/earning/code.png"></image>
			<view class="VPhone-name">短信验证</view>
			<input class="VPhone-input" type="number" maxlength="6" placeholder="请输入验证码" v-model="code" v-if='type!=3'/>
			<input class="VPhone-input" type="number" maxlength="6" placeholder="请输入验证码" v-model="code" placeholder-style="fontSize:24upx" v-if='type==3' />
			<view v-if='!showCodeTime' class="VPhone-get" @click="getCode">获取</view>
			<view v-if='showCodeTime' class="VPhone-get disabled">{{countDown}}s后重发</view>
		</view>
		<slot></slot>
		<view class="VPhone-login" :class="{act:isCanLogin}" @click="login">{{loginText}}</view>
	</view>

</template>

<script>
	export default {
		data() {
			return {
				phone: '',
				code: '',
				countDown: 60,
				showCodeTime: false,
				isCanLogin: false,
				imgUrl:'',
				imgCode:'',
				random:'',
				isMoney:false//当type为1的时候
			}
		},
		props: {
			// 类型默认1为提现页面，2为绑定手机号页面,3为绑定支付宝账号
			type: {
				type: Number,
				default: 1
			},
			loginText: {
				type: String,
				default: '绑定'
			},
			phoneText: {
				type: String,
				default: '请输入手机号码'
			},
			loginCB: {
				type: Function
			},
			loginBefore: {
				type: Function
			},
			alipayCode:{
				type: String
			},
			repeat:{
				type:Boolean,
				default:true
			}
			
		},
		mounted() {
		this.changeImgCode()

		},
		methods: {
			async getCode() { //获取验证码
			console.log(this.$parent)
				let phone=this.type==3?this.alipayCode:this.phone //支付宝绑定就是支付宝账号
				let tips=this.type==3?'支付宝账号':'手机号'
				let status = this.$common.isPhoneNumber(phone)|| this.$common.isEmail(phone);
				if(!status){
					
					this.$toast(`请填写正确的${tips}`);
					return;
				}
				if(!this.$common.isImgCode(this.imgCode)){
					this.$toast("请填写正确的图形验证码");
					return;
				}
					let smsTypeEnum=''
					if(this.type==1){
						smsTypeEnum='WITHDRAW_DEPOSIT'
					}else if(this.type==2){
						smsTypeEnum="BINDING_PHONE"
					}else{
						smsTypeEnum="BIND_TO_MODIFY_ALIPAY_ACCOUNT"
					}
				
				let res = await this.$api.getCode({
					phone: phone,
					// 绑定手机为BINDING_PHONE，提现验证为WITHDRAW_DEPOSIT
					smsTypeEnum:smsTypeEnum,
					random:this.random,
					code:this.imgCode
				})
				
				this.$toast("验证码发送成功");
				this.coutdown();

			},
			coutdown() { //倒计时
				this.showCodeTime = true;
				let timer = setInterval(() => {
					if (this.countDown == 1) {
						clearInterval(timer);
						this.showCodeTime = false;
					} else {
						this.countDown--;
					}
				}, 1000)
			},
			async login() {
				// 点击登录前的函数存在且返回false的话就return
				if(!this.repeat){
					return
				}
				this.isMoney=this.loginBefore();
				if (this.loginBefore && !this.isMoney) {
					return
				}
				let phone=this.type==3?this.alipayCode:this.phone //支付宝绑定就是支付宝账号
				let phoneStatus
				let title=this.type==3?'支付宝账号':'手机号'
				if(this.type==3){
					 phoneStatus = this.$common.isPhoneNumber(phone)||this.$common.isEmail(phone);
				}else{
					 phoneStatus = this.$common.isPhoneNumber(phone);
				}
				let codeStatus = this.$common.isCode(this.code);
				if (!phoneStatus) {
					this.$toast(`请填写正确的${title}`);
					return;
				}
				if (!codeStatus) {
					this.$toast("请填写正确的短信验证码");
					return;
				}
				if (this.loginCB) {
					this.loginCB(this.code)
					// this.isCanLogin = false
					// setTimeout(()=>{
					// 	this.isCanLogin = true
					// },3000)
					return
				}
				
				let res = await this.$api.bindingPhone({
					phone: this.phone,
					code: this.code
				})
				this.$toast("绑定成功");
				setTimeout(() => {
					uni.navigateBack();
				}, 1000)



			},
			changeImgCode(){
				let data=this.$common.getImgCode()
				this.imgUrl=data.imgUrl;
				this.random=data.random;
			}
		},
		watch: {
			phone(newValue, oldValue) {
				// let status = this.$common.isPhoneNumber(this.phone)|| this.$common.isEmail(this.phone);
				if (this.$common.isCode(this.code) && this.$common.isPhoneNumber(this.phone)) {
					this.isCanLogin = true
				}
			},
			code(newValue, oldValue) {
				let phone=this.type==3?this.alipayCode:this.phone 
				if(this.type==1&&this.$common.isCode(this.code) ){//type为1,只有金额
					this.isCanLogin = true
					return
				}
				let status
				if(this.type==3){
					status=this.$common.isPhoneNumber(this.alipayCode)||this.$common.isEmail(this.alipayCode)
				}else{
					status=this.$common.isPhoneNumber(this.alipayCode)
				}
				if (this.$common.isCode(this.code) && status) {
					this.isCanLogin = true
				}
			},
			alipayCode(newValue, oldValue) {
				let status
				if(this.type==3){
					status=this.$common.isPhoneNumber(this.alipayCode)||this.$common.isEmail(this.alipayCode)
				}else{
					status=this.$common.isPhoneNumber(this.alipayCode)
				}
				if (this.$common.isCode(this.code) && status) {
					this.isCanLogin = true
				}
			}

		},
	}
</script>

<style lang="scss">
	.VPhone {
		background: #fff;

		.VPhone-phone,
		.VPhone-code {
			display: flex;
			align-items: center;
			padding: 0 48upx;
			height: 122upx;
		}

		.VPhone-code {
			height: 142upx;
			// border-bottom: 20upx solid #f5f5f5;
			border-bottom: 1upx solid #f5f5f5;
		}
		.bt20{
			border-bottom: 20upx solid #f5f5f5;
		}
		.VPhone-phone {
			height: 123upx;
			border-bottom: 1upx solid #f5f5f5;

			.VPhone-input {
				width: 380upx;
			}

		}

		.VPhone-icon {
			width: 36upx;
			height: 36upx;
		}

		.VPhone-name {
			width: 120upx;
			font-size: 28upx;
			margin-left: 40upx;
		}

		.VPhone-input {
			width: 270upx;
			margin-left: 30upx;
		}

		.VPhone-get {
			@include allCenter;
			@include active;
			width: 150upx;
			height: 72upx;
			margin-left: auto;
			background: rgba(84, 160, 255, 1);
			border-radius: 10upx;
			color: #fff;
			overflow: hidden;

			&.disabled {
				background: #C5C5C5;
			}
		}

		.VPhone-login {
			@include allCenter;
			@include active;
			width: 680upx;
			height: 98upx;
			margin: 60upx auto;
			background: rgba(197, 197, 197, 1);
			border-radius: 10upx;
			font-size: 34upx;
			color: #fff;
			overflow: hidden;

			&.act {
				background:linear-gradient(34deg,rgba(255,43,43,1),rgba(255,85,57,1));
			}
		}

		&.type2 {
			.VPhone-get {
				background: url(/static/my/phone_short.png) no-repeat;
				background-size: 100%;

				&.disabled {
					background: #C5C5C5;
				}
			}

			.VPhone-login {
				margin-top: 184upx;
				border-radius: 49upx;
				background: url(/static/my/phone_long.png) no-repeat;
				background-size: 100%;
			}

			.VPhone-code {
				height: 123upx;
				border-bottom: 1upx solid #f5f5f5;
			}

		}
		.imgCode{
			@include allCenter;
			@include active;
			width: 150upx;
			height: 72upx;
			margin-left: auto;
			overflow: hidden;
		}
	}
</style>
<template><!-- 公共弹窗-->
	<view class="VPop" >
		<view class='pop pop-window'>
			<view class='mask' @click='closePop'></view>
			<slot></slot>
		</view>
	</view>

</template>

<script>
	export default {
		data() {
			return {
			}
		},
		mounted() {

		},
		methods: {
			closePop(){
				this.$emit('closePop')
			}
			
		}
	}
</script>

<style lang="scss">
	
</style>
<template><!-- 现金红包进度条 -->
	<view class="VProgressBar" >
		<view class='progressContent'>
			<!-- <view class='percent' v-if=''>0%</view> -->
			<view class='bar' :style="{width:`${percent}%`}">
				<view class='percent' >{{percent}}%</view>
			</view>
		</view>
	</view>

</template>

<script>
	export default {
		data() {
			return {
				
				
			}
		},
		props: {
			percent: {
				type: Number,
				default:0
			},
		},
		mounted() {

		},
		methods: {
			
		},
		watch: {
		},
		
	}
</script>

<style lang="scss">
	.progressContent{
		height:20upx;
		width: 100%;
		background:rgba(255,255,255,1);
		border-radius:10upx;
		/* margin:34upx 0 52upx; */
		.bar{
			height:21upx;
			background:rgba(255,173,28,1);
			position: absolute;
			left: 0;
			top: 0;
			border-radius:10upx;
			// .percent{
			// 	text-align: right;
			// }
		}
		.percent{
			position: absolute;
			right: -30upx;
			bottom: 36upx;
			width:67upx;
			height:40upx;
			line-height:36upx;
			font-size:24upx;
			color:rgba(185,111,22,1);
			text-align: center;
			background: url(../static/cashBonus/tabar.png) no-repeat;
			background-size: 100% 100%;
		}
	}
</style>
<template><!-- 链接转二维码-->
	<view class="qrcode" >
		<tki-qrcode cid="qrcode1" 
		 ref="qrcode"
		 :val="val"
		 :size="size"
		 :unit="unit"
		 :background="background"
		 :foreground="foreground" 
		 :pdground="pdground" 
		 :icon="icon" 
		 :iconSize="iconsize" 
		 :lv="lv" 
		 :onval="onval" 
		 :loadMake="loadMake"
		 :usingComponents="true"
		 @result="qrR"
		/>
	</view>

</template>

<script>
	import tkiQrcode from "tki-qrcode"
	export default {
		data() {
			return {
				// size: 268, // 二维码大小
				unit: 'upx', // 单位
				background: '#000000', // 背景色
				foreground: '#ffffff', // 前景色
				pdground: '#ffffff', // 角标色
				icon: '', // 二维码图标
				iconsize: 300, // 二维码图标大小
				lv: 3, // 二维码容错级别 ， 一般不用设置，默认就行
				onval: true, // val值变化时自动重新生成二维码
				loadMake: true, // 组件加载完成后自动生成二维码
				src: '' // 二维码生成后的图片地址或base64
				
			}
		},
		props: {
			size: {
				type: Number,
				default:200
			},
			val:{
				type: String,
				default:""
			}
		},
		mounted() {
			
		},
		methods: {
			qrR(res){
				this.src = res
				// console.log(11,this.src);
			}
		},
		watch: {
		},
		components:{
			tkiQrcode
		}
	}
</script>

<style lang="scss">
	.title{
		font-size:28upx;
		font-weight:700;
		color:rgba(51,51,51,1);
		margin: 25upx 48upx 15upx;
	}
	.item{
		display: flex;
		align-items: center;
		padding: 30upx 48upx 30upx 48upx;
		.icon{
			width:170upx;
			height: 60upx;
		}
		.tips{
			width: 280upx;
			font-size:28upx;
			font-weight:400;
			color:rgba(153,153,153,1);
			margin-left: 54upx;
		}
		.bind{
			font-size:28upx;
			color:rgba(84,160,255,1);
			padding:0 0 0 29upx;
			align-items: right;
		}
		.choose{
			margin-left: auto;
		}
	}
</style>
<!-- 局部滚动组件 h5用的是better-scroll；外部可以用VScroll来控制样式 -->
<!-- 需要上拉加载则需要传入pullup和vScrollData(为了数据变化后的重新初始化以及控制是否加载等)，再监听scrollToEnd做业务处理，如 <VScroll pullup @scrollToEnd="loadMore" :vScrollData="goodsList"> -->

<template>
	<block>
		<!-- #ifdef H5 -->
		<div class="VScroll" ref="wrapper">
			<div>
				<slot></slot>
			</div>
			<cmdTransition name="fly">
				<div class="goTop" v-show="goTop_show" @click="goTop_func">
					<image src="/static/common/goTop.png" mode="widthFix"></image>
				</div>
			</cmdTransition>
		</div>
		<!-- #endif -->

		<!-- #ifdef MP -->
		<scroll-view scroll-y :scroll-top="scrollTop" @scroll="scrollViewScrollFunction">
			<slot></slot>
		</scroll-view>
		<!-- #endif -->
	</block>
</template>



<script>
	import cmdTransition from "@/components/cmd-transition/cmd-transition.vue"
	import BScroll from 'better-scroll'
	export default {
		components: {
			cmdTransition
		},
		data() {
			return {
				goTop_show: false
			}
		},
		props: {
			/**
			 * 1 滚动的时候会派发scroll事件，会截流。
			 * 2 滚动的时候实时派发scroll事件，不会截流。
			 * 3 除了实时派发scroll事件，在swipe的情况下仍然能实时派发scroll事件
			 */
			probeType: {
				type: Number,
				default: 3
			},
			/**
			 * 点击列表是否派发click事件
			 */
			click: {
				type: Boolean,
				default: true
			},
			/**
			 * 是否开启横向滚动
			 */
			scrollX: {
				type: Boolean,
				default: false
			},
			/**
			 * 是否开启纵向滚动
			 */
			scrollY: {
				type: Boolean,
				default: true
			},
			/**
			 * 是否派发滚动事件
			 */
			listenScroll: {
				type: Boolean,
				default: false
			},
			/**
			 * 列表的数据
			 */
			vScrollData: {
				type: Array,
				default: () => {
					return []
				}
			},
			/**
			 * 是否派发滚动到底部的事件，用于上拉加载
			 */
			pullup: {
				type: Boolean,
				default: false
			},
			/**
			 * 是否派发顶部下拉的事件，用于下拉刷新
			 */
			pulldown: {
				type: Boolean,
				default: false
			},
			/**
			 * 是否派发列表滚动开始的事件
			 */
			beforeScroll: {
				type: Boolean,
				default: false
			},
			/**
			 * 当数据更新后，刷新scroll的延时。
			 */
			refreshDelay: {
				type: Number,
				default: 20
			},
			scrollTop: {
				type: Number,
				default: 0
			},
			// 显示回到顶部的按钮，以及出现的距离，默认开启且距离为1000，关闭就传0
			goTop: {
				type: Number,
				default: 1000
			},


		},
		mounted() {
			// 保证在DOM渲染完毕后初始化better-scroll
			setTimeout(() => {
				this._initScroll()
			}, 20)
		},
		methods: {
			_initScroll() {
				if (!this.$refs.wrapper) {
					return
				}
				// better-scroll的初始化
				this.scroll = new BScroll(this.$refs.wrapper, {
					probeType: this.probeType,
					click: this.click,
					scrollX: this.scrollX,
					scrollY: this.scrollY,
					//开启鼠标滚动
					mouseWheel: true
				})
				
				// 显示回到顶部的按钮
				if (this.goTop) {
					this.scroll.on('scroll', (pos) => {
						let distance = this.goTop 
						if (pos.y < -distance) {
							this.goTop_show = true
						} else {
							this.goTop_show = false
						}
					})
				}

				// 是否派发滚动事件
				if (this.listenScroll) {
					let me = this
					this.scroll.on('scroll', (pos) => {
						me.$emit('scroll', pos)
					})
					this.scroll.on('scrollEnd', (pos) => {
						me.$emit('scrollEnd', pos)
					})

				}

				// 是否派发滚动到底部事件，用于上拉加载
				if (this.pullup) {
					this.scroll.on('scrollEnd', () => {
						// 滚动到底部
						if (this.scroll.y <= (this.scroll.maxScrollY + 50)) {
							this.$emit('scrollToEnd')
						}
					})
				}

				// 是否派发顶部下拉事件，用于下拉刷新
				if (this.pulldown) {
					this.scroll.on('touchend', (pos) => {
						// 下拉动作
						if (pos.y > 50) {
							this.$emit('pulldown')
						}
					})
				}

				// 是否派发列表滚动开始的事件
				if (this.beforeScroll) {
					this.scroll.on('beforeScrollStart', () => {
						this.$emit('beforeScroll')
					})
				}
			},
			disable() {
				// 代理better-scroll的disable方法
				this.scroll && this.scroll.disable()
			},
			enable() {
				// 代理better-scroll的enable方法
				this.scroll && this.scroll.enable()
			},
			refresh() {
				// 代理better-scroll的refresh方法
				this.scroll && this.scroll.refresh()
			},
			scrollTo() {
				// 代理better-scroll的scrollTo方法
				this.scroll && this.scroll.scrollTo.apply(this.scroll, arguments)
			},
			scrollToElement() {
				// 代理better-scroll的scrollToElement方法
				this.scroll && this.scroll.scrollToElement.apply(this.scroll, arguments)
			},
			scrollViewScrollFunction(e) {
				this.$emit('scroll', e)
			},
			goTop_func() {
				this.scrollTo(0, 0, 500)
			}
		},

		watch: {
			// 监听数据的变化，延时refreshDelay时间后调用refresh方法重新计算，保证滚动效果正常
			vScrollData(newValue, oldValue) {
				setTimeout(() => {
					this.refresh()
				}, this.refreshDelay)
			},
			scrollTop(newV) {
				this.scrollTo(0, -newV, 500)
			},

		}
	}
</script>

<style lang="scss" scoped>
	.VScroll {
		position: absolute;
		// top: 434upx !important;
		bottom: 50px;
		left: 0;
		right: 0;
		overflow: hidden;

		.goTop {
			position: absolute;
			bottom: 100upx;
			right: 20upx;
			width: 72upx;
			height: 72upx;

			image {
				width: 100%;
			}
		}
	}
</style>
<template>
	<view class="cate-section">
		<view class="cate-item" :class="{flex1:!scale}" :style='{width:scale}' v-for="(item, index) in List " :key="index" @click="jump(item,index)">
			<image :src="item.imageUrl"></image>
			<text>{{item.configVal||item.val}}</text>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
			}
		},
		computed:{
		},
		props: {
			List: {
				type: Array,
				default: ()=>{
					return []
				}
			},
			// 传入按钮宽度比例,未传入就是均分
			scale:{
				type: String,
				default: ''
			}
		},
		methods: {
			jump(item,index){
				// 将角标也一并传出
				item = Object.assign({},item,{itemIndex:index})
				this.$emit("jump",item)
			}
		}
	}
</script>

<style lang="scss">
	/* 分类 */
	.cate-section {
		display: flex;
		justify-content: flex-start;
		align-items: center;
		flex-wrap: wrap;
		padding: 0 22upx 0;
		background: #fff;
		.cate-item {
			@include active;
			display: flex;
			flex-direction: column;
			align-items: center;
			font-size: $font-sm + 2upx;
			color: $font-color-dark;
			margin-bottom: 30upx;
			background:#fff;
			&.flex1{
				flex: 1;
			}
			overflow: hidden;
		}
	
		image {
			width: 96upx;
			height: 96upx;
			margin-bottom: 14upx;
		}
	}
</style>
<!-- 公共的手机验证码 -->
<template>
	<view class="VSwiper" >
		<!-- 轮播 -->
		<swiper-vue class="carousel" :options="swiperOption" >
			<swiper-vue-slide v-for="(item, index) in bannerList " :key="index" class="carousel-item" @click.native="swiper(item)">
				<image :src="item.url" />
			</swiper-vue-slide>
			<div class="swiper-pagination" slot="pagination"></div>
		</swiper-vue> 
	</view>

</template>

<script>
	export default {
		data() {
			return {
				swiperOption: {
					autoplay: {
						disableOnInteraction: false
					},
					loop: true,
					observer: true,
					observeParents: true,
					spaceBetween: 10,
					pagination: {
						el: '.swiper-pagination'
					}
				
				}
				
			}
		},
		props: {
			bannerList: {
				type: Array,
				default:[]
			},
		},
		mounted() {
		// this.changeImgCode()

		},
		methods: {
			radioChange(e){
				console.dir(e)
				
			},
			bindAlipay(){
				uni.navigateTo({
					url: `/pages/earning/binAlipay`
				})
			},
			swiper(item) {
				if (item.type == 1) {
					// 如果链接是项目自己的链接则uni.navigateTo跳转
					if(item.clickUrl.indexOf('tdd.51app.cn/pages/')>-1){
						uni.navigateTo({
							url: `/pages/${item.clickUrl.split('tdd.51app.cn/pages/')[1]}`
						})
						return
					}
					
					window.location.href = item.clickUrl;
			
				} else if (item.type == 3) {
					uni.navigateTo({
						url: `/pages/product/product?id=${item.numIid}`
					})
				}
			
			}
			
		},
		watch: {
		},
	}
</script>

<style lang="scss">
	.title{
		font-size:28upx;
		font-weight:700;
		color:rgba(51,51,51,1);
		margin: 25upx 48upx 15upx;
	}
	.item{
		display: flex;
		align-items: center;
		padding: 30upx 48upx 30upx 48upx;
		.icon{
			width:170upx;
			height: 60upx;
		}
		.tips{
			width: 280upx;
			font-size:28upx;
			font-weight:400;
			color:rgba(153,153,153,1);
			margin-left: 54upx;
		}
		.bind{
			font-size:28upx;
			color:rgba(84,160,255,1);
			padding:0 0 0 29upx;
			align-items: right;
		}
		.choose{
			margin-left: auto;
		}
	}
	/* 头部 轮播图 */
	.carousel-section {
		position: relative;
		padding: 20upx 0 30upx;
		text-align: center;
	}
	
	.carousel {
		// width: 702upx;
		// height: 314upx;
			width:100%;
			height:100%;
		.carousel-item {
			width: 100%;
			height: 100%;
			overflow: hidden;
		}
	
		image {
			width: 100%;
			height: 100%;
			border-radius: 10upx;
		}
	}
</style>
<!-- 带tab的商品列表 -->
<template>
	<view class="VTabgoods">
		<VTabhead ref="VTabhead" @changeTab="changeTab" :VTabhead_act="VTabhead_act" :VTabhead_list="VTabhead_list"></VTabhead>
		<VGoods :goodsList="goodsList[VTabhead_act]"></VGoods>
		<uniLoadMore :status="VTabhead_list[VTabhead_act].loadingType"></uniLoadMore>
	</view>
</template>

<script>
	import VTabhead from "@/components/VTabhead"
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	export default {
		components: {
			VTabhead,
			uniLoadMore
		},
		data() {
			return {
				goodsList: [
					[]
				],
				tabAct: 0,
				goodsList_params: {
					query: "男装",
					sort: "price_des",
					pageNum: 1,
					pageSize: 10
				},
			}
		},
		props: {
			goodsList_params_label: {
				type: Object,
				default: () => {
					return {}
				}
			},
			VTabhead_list: {
				type: Array,
				default: () => {
					return []
				}
			},
			VTabhead_act: {
				type: Number,
				default: 0
			},
		},
		created() {

		},
		mounted() {
			this.tabAct = this.VTabhead_act
			this.$set(this.goodsList_params, 'query', this.goodsList_params_label.val)
			this.$set(this.goodsList_params, 'commodityConfigId', this.goodsList_params_label.id)
			this.loadData()

		},
		methods: {

			loadData() {

				return new Promise(async (resolve, reject) => {
					this.setParams()
					let VTabhead_item = this.VTabhead_list[this.tabAct]
					//如果是正在加载或是没有更多了则不再请求
					if (VTabhead_item.loadingType === 'loading' || VTabhead_item.loadingType === 'noMore') {
						//防止重复加载
						return;
					}

					VTabhead_item.loadingType = 'loading';

					let goodsList = (await this.$api.getBeInCommonUseQuery(this.goodsList_params)).data
					if (!this.goodsList[this.tabAct]) {
						this.$set(this.goodsList, this.tabAct, [])
					}
					if (!goodsList || !goodsList.length) {
						VTabhead_item.loadingType = 'noMore';
						return
					}
					this.goodsList[this.tabAct].push(...goodsList)
					//判断是否还有数据， 有改为 more， 没有改为noMore 
					// 来自淘宝的接口可能出现某一页数量不足了，但下一页还有数据的情况，故只按照有没有数据来判断
					
					VTabhead_item.loadingType = 'more';
					VTabhead_item.pageNum++
					resolve()



				})


			},
			changeTab({
				index,
				VTabhead_list
			}) {
				if (this.tabAct == index && index == 0) {
					return
				}

				this.$emit('changeTab_tab', {
					index,
					VTabhead_list
				})

				//点击已选中的选项时，切换排序，要将数据和page清空
				if (this.tabAct == index) {
					this.$set(this.goodsList, index, [])
				}
				this.tabAct = index;
				// 当这个选项没有数据或为空的时候才请求
				if (!this.goodsList[index] || this.goodsList[index].length == 0) {
					this.loadData()
				}

			},
			async loadMore() {

				await this.loadData()
				return this.goodsList[this.tabAct]
			},
			setParams() {
				let sort = this.VTabhead_list[this.tabAct].sort
				let pageNum = this.VTabhead_list[this.tabAct].pageNum
				if (this.tabAct == 0) {
					this.$set(this.goodsList_params, 'sort', '')
				} else if (this.tabAct == 1) {
					if (sort) {
						this.$set(this.goodsList_params, 'sort', 'price_asc')
					} else {
						this.$set(this.goodsList_params, 'sort', 'price_des')
					}

				} else if (this.tabAct == 2) {
					if (sort) {
						this.$set(this.goodsList_params, 'sort', 'total_sales_asc')
					} else {
						this.$set(this.goodsList_params, 'sort', 'total_sales_des')
					}
				}
				this.$set(this.goodsList_params, 'pageNum', pageNum)
			},

		},

	}
</script>

<style lang="scss">
	.VTabgoods {
		.VTabgoods-header {
			display: flex;
			align-items: center;
			justify-content: space-around;
			width: 100%;
			height: 90upx;
			padding: 0 120upx;
			border-bottom: 1px solid #F2F2F2;
			background: #fff;
			font-weight: bold;

			.vh-item {
				&.act {
					color: #BF3627;
				}
			}
		}

		.VGoods {
			padding-top: 20upx;
		}
	}
</style>
<!-- 带tab的商品列表 顶部 -->
<template>
	<view class="VTabhead">
		<view class="VTabgoods-header">
			<view class="vh-item" :class="{act :VTabhead_act==index}" v-for="(item,index) of VTabhead_list" :key="index" @click="changeTab(index)">{{item.text}}
				<block v-if="index!=0">
					<view class='vh-icon' :class="{down:!item.sort}"></view>
				</block>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {

			}
		},
		props: {
			VTabhead_list: {
				type: Array,
				default: () => {
					return []
				}
			},
			VTabhead_act: {
				type: Number,
				default: 0
			},
		},
		created() {

		},
		mounted() {


		},
		methods: {

			changeTab(index) {

				if (this.VTabhead_act == index) {
					// 第一个选项不做排序
					if (index == 0) {
						return;
					}
					this.$set(this.VTabhead_list[index], 'sort', !this.VTabhead_list[index].sort)
					this.$set(this.VTabhead_list[index], 'pageNum', 1)
					this.$set(this.VTabhead_list[index], 'loadingType', 'more')
				}
				this.$emit('changeTab', {
					index: index,
					VTabhead_list: this.VTabhead_list
				})
			},

		},

	}
</script>

<style lang="scss">
	.VTabhead {
		position: relative;
		z-index: 9999;

		.VTabgoods-header {
			display: flex;
			align-items: center;
			justify-content: space-around;
			width: 100%;
			height: 90upx;
			padding: 0 40upx;
			border-bottom: 1px solid #F2F2F2;
			background: #fff;
			font-weight: bold;

			&.fixed {
				position: absolute;
				top: 170upx;
				left: 0;
				z-index: 9999;
			}

			.vh-item {
				position: relative;
				flex: auto;
				@include allCenter();
				width: 0;
				height: 100%;

				&.act {
					color: #BF3627;

					.vh-icon {
						border-color: transparent transparent #BF3627 transparent;
					}
				}

				.vh-icon {
					margin-left: 8upx;
					width: 0;
					height: 0;
					border-style: solid;
					border-width: 0 8upx 13.9upx 8upx;
					border-color: transparent transparent #999 transparent;
					transition: transform .26s;

					&.down {
						transform: rotate(180deg);
					}
				}


			}



		}
	}
</style>
<template>
	<view class="scrollBox" >
		<scroll-view class="VTable" ref="VTable" :class="tabClass" :style="tabStyle" scroll-with-animation scroll-x
		 :scroll-left="scrollLeft">

			<view class="VTable-item" ref="Vitem" :class="[index === tabCur ? selectClass + ' cur':'']" v-for="(item,index) in tabList"
			 :key="index" @tap="tabSelect(index,$event)">
				<span>{{item.val}}</span>
			</view>

		</scroll-view>
	</view>
</template>
<script>
	export default {
		name: 'VTable',
		data() {
			return {
				scrollLeft: 0
			};
		},
		props: {
			tabList: {
				type: Array,
				default () {
					return [];
				}
			},
			tabCur: {
				type: Number,
				default () {
					return 0;
				}
			},
			tabClass: {
				type: String,
				default () {
					return '';
				}
			},
			tabStyle: {
				type: String,
				default () {
					return '';
				}
			},
			selectClass: {
				type: String,
				default () {
					return '';
				}
			}
		},
		methods: {
			tabSelect(index, e) {
				if (this.currentTab === index) return false;
				this.$emit('update:tabCur', index);
				this.$emit('change', index);
				this.scrollXCenter(index)
			},
			// 设置滚动条，让选中的在中间
			scrollXCenter(index) {
				if (!this.$refs.Vitem) {
					return
				}
				let item = this.$refs.Vitem[index].$el;
				let itemOffset = item.offsetLeft;
				let container = this.$refs.VTable.$el;
				let centerLeft = (container.clientWidth - item.clientWidth) / 2;
				this.scrollLeft = itemOffset - centerLeft

			}
		},
		computed: {},
		watch: {
			tabCur(newValue, oldValue) {
				this.scrollXCenter(newValue)
			}
		},
	};
</script>
<style>
	/* 隐藏首页横向滚动条 */
	.scrollBox {
		/* height: 88upx; */
		overflow: hidden;
	}

	.VTable {
		/* height: 102upx; */
		white-space: nowrap;
		margin: 0 10upx;
		width: calc(100% - 20upx);
	}

	.VTable-item {
		height: 66upx;
		display: inline-block;
		margin: 0 20upx 20upx;
		padding: 18upx 0 0;
		border-bottom: 4upx solid transparent;
		color:rgba(51,51,51,1);
		transition: border-bottom-color .26s;

	}

	.VTable-item.cur {
		border-bottom-color: rgba(191,54,39,1);
		color:rgba(191,54,39,1);
	}
	.taobao-nav-box .VTable-item.cur{
		
		background:rgba(255,255,255,1);
		border-radius:34upx;
		font-size:28upx;
	}
	.taobao-nav-box .VTable-item.cur span{
		color:rgba(255,43,43,1);
	}
	.taobao-nav-box .VTable-item span{
		font-size:28upx;
		font-weight:500;
		color:rgba(255,255,255,1);
	}
	.taobao-nav-box {
		padding: 28upx 0 20upx;
		margin: 0 28upx;
	}
	.taobao-nav-box .VTable-item{
		border: 0 !important;
		padding: 10upx 26upx;
		margin: 10upx 8upx 12upx;
		height: 100%;
	}
</style>
<template>
	<view class="VTitleClass">
		<view class="pic-desc">
			<view class="d-header">
				<view class='item'></view>
				<text>{{value}}</text>
				<view></view>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {

			};
		},
		methods: {},
		props: {
			value: {
				type: String,
				default: ""
			}
		},
	}
</script>

<style lang='scss'>
	/*  详情 */
	.pic-desc {
		background: #fff;

		.d-header {
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: $font-base + 2upx;
			color: $font-color-dark;
			position: relative;
			padding:40upx 0 40upx;

			text {
				padding: 0 20upx;
				background: #fff;
				position: relative;
				/* z-index: 1; */
				font-size:30upx;
				font-weight:bold;
				color:rgba(51,51,51,1);
			}

			.item:after {
				position: absolute;
				left: 50%;
				top: 50%;
				transform: translateX(-50%);
				width: 500upx;
				height: 0;
				content: '';
				border-bottom: 1px solid #ccc;
			}
			.item{
				
			}
		}
	}
</style>
<template>
	<view class="vTitleSort">
		<view class='item1 item' :class='{"active":tabIndex==0}'>推荐</view>
		<view class='item2 item' :class='{"active":tabIndex==1}'>
			劵后价
			<view class='icon-up icon'></view>
			<view class='icon-down icon'></view>
		</view>
		<view class='item2 item' :class='{"active":tabIndex==2}'>
			销量
			<view class='icon-up icon'></view>
			<view class='icon-down icon'></view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				tabIndex:0
			}
		},
		computed:{
		},
		props: {
			List: {
				type: Array,
				default: ()=>{
					return []
				}
			},
			scale:{
				type: String,
				default: '20%'
			}
		},
		methods: {
			
		}
	}
</script>

<style lang="scss">
	.vTitleSort{
		display: flex;
		align-content: center;
		justify-content: space-around;
		.item{
			font-size:28upx;
			color:rgba(51,51,51,1);
			line-height:42upx;
			text-align: center;
			position: relative;
		}
		.active{
			color:rgba(191,54,39,1);
		}
		.icon{
			width: 12upx;
			height: 12upx;
			position: absolute;
			right:-20upx;
			background-color:#999999;
			background-repeat: no-repeat;
			.active{
				background-color:rgba(191,54,39,1);
			}
		}
		.icon-up{
			background-image: url(/static/index/icon-up.png) ;
			background-size: 100%;
			top: 10upx;
		}
		.icon-down{
			background-image: url(/static/index/icon-down.png);
			background-size: 100%;
			top: 20upx;
		}
		
	}	
	
	
</style>
import Vue from 'vue'
import store from './store'
import App from './App'
import VConsole from 'vconsole'


 // new VConsole()

Vue.config.productionTip = false
Vue.prototype.$fire = new Vue();
Vue.prototype.$store = store;
import api from "@/common/api"

Vue.prototype.$api = api;

// 全局的toast提示
Vue.prototype.$toast = (title, duration = 1500, mask = false, icon = 'none') => {
	//统一提示方便全局修改
	if (Boolean(title) === false) {
		return;
	}
	uni.showToast({
		title,
		duration,
		mask,
		icon
	});
}

import '@/common/directive'

//添加全局自定义过滤器
import vueFilter from '@/common/filter'
for (let key in vueFilter) {
	Vue.filter(key, vueFilter[key])
}

//公共方法，调用方法，this.$common.xxx
import common from '@/common/common'
Vue.prototype.$common = common;

import commonLogic from '@/common/commonLogic'
Vue.prototype.$commonLogic = commonLogic;

//局部滚动组件
import VScroll from "@/components/VScroll";
Vue.component("VScroll", VScroll);

import VueClipboard from 'vue-clipboard2'
Vue.use(VueClipboard)

// #ifdef H5
//轮播组件；由于uni自带的轮播组件与better-scroll有冲突，会在滑动时触发点击事件，故下载这个
import {
	swiper,
	swiperSlide
} from 'vue-awesome-swiper'
import 'swiper/dist/css/swiper.css'
Vue.component("swiperVue", swiper);
Vue.component("swiperVueSlide", swiperSlide);
// #endif


//商品展示组件
import VGoods from "@/components/VGoods"
Vue.component("VGoods", VGoods);

App.mpType = 'app'

const app = new Vue({
	...App
})
app.$mount()
{
    "name" : "淘多多",
    "appid" : "__UNI__FBDE7C2",
    "description" : "",
    "versionName" : "1.0.0",
    "versionCode" : "100",
    "transformPx" : false,
    "app-plus" : {
        /* 5+App特有相关 */
        "usingComponents" : true,
        "splashscreen" : {
            "alwaysShowBeforeRender" : true,
            "waiting" : true,
            "autoclose" : true,
            "delay" : 0
        },
        "modules" : {},
        /* 模块配置 */
        "distribute" : {
            /* 应用发布信息 */
            "android" : {
                /* android打包配置 */
                "permissions" : [
                    "<uses-permission android:name=\"android.permission.CHANGE_NETWORK_STATE\"/>",
                    "<uses-permission android:name=\"android.permission.MOUNT_UNMOUNT_FILESYSTEMS\"/>",
                    "<uses-permission android:name=\"android.permission.READ_CONTACTS\"/>",
                    "<uses-permission android:name=\"android.permission.VIBRATE\"/>",
                    "<uses-permission android:name=\"android.permission.READ_LOGS\"/>",
                    "<uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\"/>",
                    "<uses-feature android:name=\"android.hardware.camera.autofocus\"/>",
                    "<uses-permission android:name=\"android.permission.WRITE_CONTACTS\"/>",
                    "<uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/>",
                    "<uses-permission android:name=\"android.permission.CAMERA\"/>",
                    "<uses-permission android:name=\"android.permission.RECORD_AUDIO\"/>",
                    "<uses-permission android:name=\"android.permission.GET_ACCOUNTS\"/>",
                    "<uses-permission android:name=\"android.permission.MODIFY_AUDIO_SETTINGS\"/>",
                    "<uses-permission android:name=\"android.permission.READ_PHONE_STATE\"/>",
                    "<uses-permission android:name=\"android.permission.CHANGE_WIFI_STATE\"/>",
                    "<uses-permission android:name=\"android.permission.WAKE_LOCK\"/>",
                    "<uses-permission android:name=\"android.permission.CALL_PHONE\"/>",
                    "<uses-permission android:name=\"android.permission.FLASHLIGHT\"/>",
                    "<uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/>",
                    "<uses-feature android:name=\"android.hardware.camera\"/>",
                    "<uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>",
                    "<uses-permission android:name=\"android.permission.WRITE_SETTINGS\"/>"
                ]
            },
            "ios" : {},
            /* ios打包配置 */
            "sdkConfigs" : {}
        }
    },
    /* SDK配置 */
    "quickapp" : {},
    /* 快应用特有相关 */
    "mp-weixin" : {
        /* 小程序特有相关 */
        "usingComponents" : true,
        "appid" : "wxdffb4105c627a6db",
        "setting" : {
            "urlCheck" : true
        }
    },
    "h5" : {
        "template" : "template.h5.html",
        "router" : {
            "mode" : "history"
        },
        "title" : "淘多多",
        "devServer" : {
            "https" : false,
            "port" : "8080"
        },
        "optimization" : {
            "treeShaking" : {
                "enable" : true
            }
        }
    }
}
{
  "name": "uni_dianshang",
  "version": "1.0.0",
  "lockfileVersion": 1,
  "requires": true,
  "dependencies": {
    "babel-runtime": {
      "version": "6.26.0",
      "resolved": "https://registry.npmjs.org/babel-runtime/-/babel-runtime-6.26.0.tgz",
      "integrity": "sha1-llxwWGaOgrVde/4E/yM3vItWR/4=",
      "dev": true,
      "requires": {
        "core-js": "2.6.5",
        "regenerator-runtime": "0.11.1"
      }
    },
    "better-scroll": {
      "version": "1.15.2",
      "resolved": "https://registry.npmjs.org/better-scroll/-/better-scroll-1.15.2.tgz",
      "integrity": "sha512-sSY2N8I9/B+YX/9JpIz6pMQYnmBuvspBqZG4UxYaQEfz/ZWrnxwdyKLL4t6IKpFmxqtZadVypXw7vSSHxBZpBQ==",
      "dev": true,
      "requires": {
        "babel-runtime": "6.26.0"
      }
    },
    "clipboard": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/clipboard/-/clipboard-2.0.4.tgz",
      "integrity": "sha512-Vw26VSLRpJfBofiVaFb/I8PVfdI1OxKcYShe6fm0sP/DtmiWQNCjhM/okTvdCo0G+lMMm1rMYbk4IK4x1X+kgQ==",
      "requires": {
        "good-listener": "1.2.2",
        "select": "1.1.2",
        "tiny-emitter": "2.1.0"
      }
    },
    "core-js": {
      "version": "2.6.5",
      "resolved": "https://registry.npmjs.org/core-js/-/core-js-2.6.5.tgz",
      "integrity": "sha512-klh/kDpwX8hryYL14M9w/xei6vrv6sE8gTHDG7/T/+SEovB/G4ejwcfE/CBzO6Edsu+OETZMZ3wcX/EjUkrl5A==",
      "dev": true
    },
    "delegate": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/delegate/-/delegate-3.2.0.tgz",
      "integrity": "sha512-IofjkYBZaZivn0V8nnsMJGBr4jVLxHDheKSW88PyxS5QC4Vo9ZbZVvhzlSxY87fVq3STR6r+4cGepyHkcWOQSw=="
    },
    "dom7": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/dom7/-/dom7-2.1.3.tgz",
      "integrity": "sha512-QTxHHDox+M6ZFz1zHPAHZKI3JOHY5iY4i9BK2uctlggxKQwRhO3q3HHFq1BKsT25Bm/ySSj70K6Wk/G4bs9rMQ==",
      "dev": true,
      "requires": {
        "ssr-window": "1.0.1"
      }
    },
    "good-listener": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/good-listener/-/good-listener-1.2.2.tgz",
      "integrity": "sha1-1TswzfkxPf+33JoNR3CWqm0UXFA=",
      "requires": {
        "delegate": "3.2.0"
      }
    },
    "object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha1-IQmtx5ZYh8/AXLvUQsrIv7s2CGM=",
      "dev": true
    },
    "regenerator-runtime": {
      "version": "0.11.1",
      "resolved": "https://registry.npmjs.org/regenerator-runtime/-/regenerator-runtime-0.11.1.tgz",
      "integrity": "sha512-MguG95oij0fC3QV3URf4V2SDYGJhJnJGqvIIgdECeODCT98wSWDAJ94SSuVpYQUoTcGUIL6L4yNB7j1DFFHSBg==",
      "dev": true
    },
    "select": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/select/-/select-1.1.2.tgz",
      "integrity": "sha1-DnNQrN7ICxEIUoeG7B1EGNEbOW0="
    },
    "ssr-window": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/ssr-window/-/ssr-window-1.0.1.tgz",
      "integrity": "sha512-dgFqB+f00LJTEgb6UXhx0h+SrG50LJvti2yMKMqAgzfUmUXZrLSv2fjULF7AWGwK25EXu8+smLR3jYsJQChPsg==",
      "dev": true
    },
    "swiper": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/swiper/-/swiper-4.5.0.tgz",
      "integrity": "sha512-jRCd/CGet9kaHwthHdd/sL/YU8CI157PWLyItnIcn/o/jP4haVky3zTF6f9F3JDpmQIw7jdWihISiYx0/oTHsg==",
      "dev": true,
      "requires": {
        "dom7": "2.1.3",
        "ssr-window": "1.0.1"
      }
    },
    "tiny-emitter": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/tiny-emitter/-/tiny-emitter-2.1.0.tgz",
      "integrity": "sha512-NB6Dk1A9xgQPMoGqC5CVXn123gWyte215ONT5Pp5a0yt4nlEoO1ZWeCwpncaekPHXO60i47ihFnZPiRPjRMq4Q=="
    },
    "tki-qrcode": {
      "version": "0.1.6",
      "resolved": "https://registry.npmjs.org/tki-qrcode/-/tki-qrcode-0.1.6.tgz",
      "integrity": "sha512-EnnlS8psowC7PsW3MDYcxvJYkuklX3WAZ/BYanR4TdBHTu74GfjTBX8Y16REP+AeDENiVtBPh4jtTRL2P736hQ=="
    },
    "vconsole": {
      "version": "3.3.4",
      "resolved": "https://registry.npmjs.org/vconsole/-/vconsole-3.3.4.tgz",
      "integrity": "sha512-9yihsic96NPoMLQx/lCQwH9d89H0bbMW3LZPzo/t4yGQcS1X+vTCe9OHm1XSH7WNxzGDmcSwBiKLsFGwvJpQBg=="
    },
    "vue-awesome-swiper": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/vue-awesome-swiper/-/vue-awesome-swiper-3.1.3.tgz",
      "integrity": "sha512-E7suzkyApO8vNZbgdEnjSmnpsmQZyRvSVXJ7sey3XYwKPOkLhH3+GnHroBw+5PZIQXvWBwdCeQsPG1xQ1r1Rhg==",
      "dev": true,
      "requires": {
        "object-assign": "4.1.1",
        "swiper": "4.5.0"
      }
    },
    "vue-clipboard2": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/vue-clipboard2/-/vue-clipboard2-0.3.0.tgz",
      "integrity": "sha512-6/Y9NJErWb4LNBLMgsJSdKb7KpF6/jqXagvKlYut6VQzQsNj6515FpwH0r5hhmeJMqaPzf1kxAw8L8Qvw/QBJQ==",
      "requires": {
        "clipboard": "2.0.4"
      }
    }
  }
}
{
  "name": "uni_dianshang",
  "version": "1.0.0",
  "description": "",
  "main": "main.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "better-scroll": "^1.15.2",
    "vue-awesome-swiper": "^3.1.3"
  },
  "dependencies": {
    "tki-qrcode": "^0.1.6",
    "vconsole": "^3.3.4",
    "vue-clipboard2": "^0.3.0"
  }
}
<template>
	<!-- 黑五活动 -->
	<view class="blackFive" :style="{'backgroundColor':blackFiveData.backgroundColor}">
		<img v-if='blackFiveData' :src="blackFiveData.topImage" alt="">
		<view class='list' v-if='blackFiveData'> 
			<img v-for="(item,index) in blackFiveData.imageList" :key='index' :src='item.imageUrl' class='item' alt="" @click='jump(item)'>
		</view>
	</view>
</template>

<script>
	import { sending } from '@/common/bridge'
	export default {
		data() {
			return {
				blackFiveData:'',
				type:'',
				channel:""
				
			}
		},
		onLoad(e) {
		
			this.type=e.type;
			this.channel=e.channel;
			console.log(e)
			this.inint();

		},
		methods: {
			async inint() {
				let res = await this.$api.getBlackFridayActivity({
					channel:this.channel||""
				});
				this.blackFiveData=res.data;
			},
			jump(item){
				let obj={
					type:'7',//黑五
					item:item
				}
				if(this.type=='android'){
					
					jsActivity.onBlackFive(JSON.stringify(obj))
					return
				}
				sending(obj)
			}
			
		},
		components: {
			
		}
	}
</script>

<style lang='scss'>
	uni-page-body{
		height: 100%;
	}
	.blackFive{
		min-height: 100%;
	}
	.list{
		padding:0 47upx 40upx;
		.item{
			margin-top: 37upx;
			border-radius:20upx;
		}
	}
</style>
<template>
	<!-- 黑五预售活动 -->
	<view class="blackFivePrepaid" :style="{'backgroundColor':blackBase.backgroundColor}">
		<img :src="blackBase.bigImageUrl" alt="">
		<view class='content'>
			<view class='goZ' @click="go">去会场GO ></view>
			<view class='middel'>
				<view class='title'>{{blackBase.configVal}}</view>
				<view class='btn btn-copy' @click='copy'>复制链接赚钱</view>
				<view class='share'>分享好友，好友下单，你赚钱</view>
			</view>
			<!-- <view class='bottom'>
				<view class='detail'>在【发圈】-【宣传素材】中可下载本次活动素材</view>
				<view class='circle'></view>
			</view> -->
		</view>
		
	</view>
</template>

<script>
	import { sending } from '@/common/bridge'
	export default {
		data() {
			return {
				id:'',
				type:'',
				blackBase:'',
				userId:"",
				url:''
			}
		},
		onLoad(e) {
			this.id=e.id;
			this.type=e.type;
			this.userId=e.userId;
			this.inint();

		},
		methods: {
			async inint() {
				let res = await this.$api.dobolT({
					id:this.id
				});
				this.blackBase=res.data;

			},
			go(){
				let that=this;
				this.changcode().then(function(){
					let obj={//去主会场
						type:'9',
						terraceType:that.blackBase.terraceType,
						url:that.url,
						title:that.blackBase.configVal
					}
					if(that.type=='android'){
						jsActivity.onCall(JSON.stringify(obj))
						return
					}
					sending(obj)
				})
				
			},
			async copy(){
				let that=this;
				 this.changcode().then(function(){
					 let obj={//复制短
					 	type:'10',
					 	terraceType:that.blackBase.terraceType,
					 	url:that.url,
					 	title:that.blackBase.configVal
					 }
					 if(that.type=='android'){
					 	jsActivity.onCall(JSON.stringify(obj))
					 	return
					 }
					 sending(obj)
				 })
				
				
			},
			 changcode(){
				return new Promise(async (resolve,resject)=>{
					if(!this.userId){
						this.$toast('用户id为空');
						return
					}
					if(this.blackBase.terraceType=='TAOBAO'){//taobao转链
						let res = await this.$api.createActivityLink({
							sceneId:this.blackBase.numIid,
							userId:this.userId
						});
						
						let res1 = await this.$api.createTaoKouling({
							text:this.blackBase.configName,
							url:res.data
						});
						this.url=res1.data;
						resolve(res1.data)
						
					}else if(this.blackBase.terraceType=='PINGDUODUO'){
							let res;
						if(!this.blackBase.numIid){
							 res = await this.$api.genCmsPromUrl({
								userId:this.userId
							});
							this.url=res.data;
							resolve(res.data)
							
						}else{
							res = await this.$api.genThemePromUrl({
								userId:this.userId,
								themeId:this.blackBase.numIid
							});
							this.url=this.type=='ios'?res.data.mobileShortUrl:res.data.mobileUrl							
							resolve(res.data)
						}
						
					}
					
				})
				
			}
			
		},
		components: {
			
		}
	}
</script>

<style lang='scss'>
	uni-page-body{
		height: 100%;
	}
	.blackFivePrepaid{
		/* background-color: red; */
		min-height: 100%;
	}
	.content{
		padding: 27upx 36upx;
		.goZ{
			width:360upx;
			height:88upx;
			background:linear-gradient(90deg,rgba(254,242,216,1),rgba(249,205,100,1));
			border-radius:43upx;
			font-size:36upx;
			font-weight:bold;
			color:rgba(236,56,42,1);
			text-align: center;
			line-height: 88upx;
			margin: 0 auto;
		}
		.middel{
			padding: 78upx 60upx 34upx;
			font-size:28upx;
			background:rgba(255,255,255,1);
			text-align: center;
			margin: 66upx 0 32upx;
			border-radius:10upx;
			.title{
				font-size:28upx;
				font-family:PingFang SC;
				font-weight:500;
				color:rgba(51,51,51,1);
				line-height:42upx;
				text-align: center;
			}
			.btn-copy{
				width:430upx;
				height:88upx;
				background:linear-gradient(90deg,rgba(251,101,128,1),rgba(252,45,53,1));
				border-radius:44upx;
				font-size:36upx;
				font-weight:bold;
				color:rgba(255,255,255,1);
				line-height:88upx;
				margin: 40upx auto 20upx;
			}
			.share{
				font-size:26upx;
				color:rgba(223,51,57,1);
				
			}
		}
		.bottom{
			width: 100%;
			font-size:26upx;
			color:rgba(88,53,2,1);
			position: relative;
			padding: 9upx;
			background:rgba(255,255,255,1);
			border-radius:30upx;
			.circle{
				width:72upx;
				height:72upx;
				background:rgba(251,211,123,1);
				border-radius:50%;
				position: absolute;
				top: -12upx;
				left: -6upx;
			}
			.detail{
				text-indent: 72upx;
			}
		}
		
		
	}
</style>

<template><!--淘宝活动页 -->
	<view class="buttonNav taobao" >
		<view v-for="(item,index) in topImageList">
			 <img :src="item.imageUrl" alt=""> 
		</view>
		<VTable :tab-list="tabList" :tabCur.sync="tabCur" tab-class="taobao-nav-box"  @change="tabChange" ></VTable>
		<VScroll ref="VScroll" pullup @scrollToEnd="loadMore" :vScrollData="goodsList[tabCur]"  v-if='goodsList.length>0'>
			<!-- <VSwiper :bannerList='bannerList' v-if='this.tabList[this.tabCur].val=="热销"&&bannerList.length>0'></VSwiper> -->
			<VGoods class="VGoods" :optionsType='type' :goodsList="goodsList[tabCur]" :type="2" @openPop='openPop' :className='"taobao-goods"' :channel='4'></VGoods> 
			 <uniLoadMore :status="tabList[tabCur].loadingType" ></uniLoadMore>
		</VScroll>
	</view>
</template>

<script>
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	import VTable from "@/components/VTable";
	import VSwiper from "@/components/VSwiper";
	import { sending } from '@/common/bridge'
	export default {
		components: {
			uniLoadMore,
			VTable,
			VSwiper
		},
		data() {
			return {
				tabList:[],
				goodsList:[],
				tabCur:0,
				pageSize:10,
				buttonIndex:'',
				title:'淘宝',
				bannerList:[],
				topImageList:[],
				type:''
			}
		},
		props: {

		},
		onLoad(e) {
			this.loadTab(this.tabCur);
			this.type=e.type;
			console.log(this.type)
		},
		mounted(e) {
			
		},

		methods: {
			async loadTab(){
				let api='getTaobaoActivity';
				let res = await this.$api[api]({
					channelType: "HTML5"
				});
				
				res.data.navigationBarList.forEach((item,index)=>{
					let objE={
							id:item.numIid,
							loadingType: 'more',
							pageNum: 1,
							val:item.configVal
						}
					
					this.tabList.push(objE);
					
				})
				this.topImageList=res.data.topImageList;
				
				
				this.loadMore()
				
			},
			goBack() {
				uni.switchTab({
					url: '/pages/index/index',
				})
			},
			tabChange(){
				if (!this.goodsList[this.tabCur]){
					this.loadMore();
				}
				
				
			},
			async loadMore(){
				//如果是正在加载或是没有更多了则不再请求
				let VTabhead_item = this.tabList[this.tabCur]
				if (VTabhead_item.loadingType === 'loading' || VTabhead_item.loadingType === 'noMore') {
					//防止重复加载
					return;
				}
				VTabhead_item.loadingType = 'loading';
				let ajax='getFavoriteItems'
				
				let params={
						channelType: "HTML5",
						pageNum:this.tabList[this.tabCur].pageNum,
						pageSize:this.pageSize,
						favoriteId:this.tabList[this.tabCur].id
					}
				let res = await this.$api[ajax](params);
				if(this.tabList[this.tabCur].val=="热销"){
					this.bannerList=res.data.bannerList;
					res.data=res.data.goodsList;
					
				}
				//判断是否还有数据， 有改为 more， 没有改为noMore ；
				// 来自淘宝的接口可能出现某一页数量不足了，但下一页还有数据的情况，故只按照有没有数据来判断
				if (!res.data || !res.data.length) {
					VTabhead_item.loadingType = 'noMore';
					return
				}
				if (!this.goodsList[this.tabCur]) {
					this.$set(this.goodsList, this.tabCur, res.data)
				}else{
					this.goodsList[this.tabCur].push(...res.data)
				}
				// this.goodsList[this.tabCur].push(...res.data)
				VTabhead_item.loadingType = 'more';
				VTabhead_item.pageNum++
			}
			
		},

	}
</script>

<style lang="scss">
	.VScroll {
		top: calc(410upx);
		bottom: 0;
		background-color:#DD371F;
	}
	.VGoods {
		background-color:#DD371F;
	}
	.buttonNav {
		// padding-top: 88upx;
		background-color:#DD371F;
		.VGoods {
			padding-top: 20upx;
		}
		
	}

	.buttonNav-head {

		position: fixed;
		top: 0;
		left: 0;
		z-index: 998;
		display: flex;
		justify-content: space-between;
		width: 100%;
		height: 88upx;
		background: #BF3627;
		font-size: 32upx;
		color: #fff;

		.head-back {
			position: absolute;
			top: 0;
			left: 0;
			width: 60upx;
			height: 100%;
			padding-left: 30upx;
			display: flex;
			align-items: center;

			image {
				width: 18upx;
				height: 33upx;
			}
		}

		.head-text {
			@include allCenter;
			width: 100%;
		}
	}
	.VSwiper{
		width: 700upx;
		height: 250upx;
		margin: 10upx 25upx 20upx;
	}
	// .taobao-nav-box{
	// 	margin: 0 26upx;
	// }
	
	
</style>
let  cashMixins={//弹窗
	data() {
		return {
			time:''
		}
	},
	onLoad(options){
	},
	methods: {
		inintTimeOut(t){
			this.computTime(t);
			let that=this;
			setInterval(function(){
				t--;
				that.computTime(t);
			},1000)
		},
		computTime(t){
			// debugger;
			let hours=Math.floor(t/3600);
			let middles=Math.floor(t%3600/60);
			let seconds=Math.floor(t%3600%60);
			 hours= hours<10?`0${hours}`:hours;
			 middles= middles<10?`0${middles}`:middles;
			 seconds= seconds<10?`0${seconds}`:seconds;
			this.time= `${hours}:${middles}:${seconds}`
			
		},
		jumpRules(){
			// 跳转规则页面
			uni.navigateTo({
				url:'/pages/cashBonus/rules'
			})
		}
	}
}
export default cashMixins;<template><!-- 第一次打开红包 -->
	<view class="firstPacket">
		<view v-if='cashPack'>
			<img src="../../static/cashBonus/firstCashBg.png" alt="">
			<view class='all'>今日已送出现金￥{{cashPack.todayAlreadySendAmount }}</view>
			<view class='price'>
				<view class='title'>恭喜获得现金</view>
				<view class='money'>{{cashPack.alreadySendAmount }} <text class='unit'>元</text></view>
			</view>
			<view class='timeOut'>{{time}}后现金将失效</view>
			<view class='btn' @click="share">分享{{cashPack.surplusNumber }}位好友 即可拆开</view>
			<view class='btn-rules' @click="jumpRules"></view>
		</view>
	</view>
</template>

<script>
	import  cashMixins  from './cashMixins'
	export default {
		mixins:[cashMixins],
		data() {
			return {
				cashPack:'',
				userInfo: this.$store.getters.userInfo,
				url:"",
				shareDate:''
			}
		},
		onLoad() {
			let cashPack= this.$common.getCookie('cashPack');
			this.cashPack=cashPack?JSON.parse(cashPack):null
			console.log(this.cashPack)
			
			if(this.cashPack.failureTime){
				let t=Math.floor(this.cashPack.failureTime/1000);
				this.inintTimeOut(t);
			}
			
			this.openPop();
			
		},
		methods: {
			async openPop(){
				let res=await this.$api.getRedPacketShare({
					userId:this.userInfo.id
				});
				this.shareDate=res.data;
			},
			share(){
				let that=this;
				this.url=`${window.location.protocol}//${window.location.host}/pages/cashBonus/invite?userId=${this.userInfo.id}`
				let text=`${this.shareDate.shareTitle}\n${this.shareDate.shareRamrk}\n分享链接:${this.url}`
				this.$copyText(text).then(function(){
					that.$toast('复制分享链接成功')
					that.$api.doDismantledRedPacket({
						userId:that.userInfo.id
					}).then(function(){
						window.open('weixin://')
					});
					
				},function(){
					that.$toast('复制失败，请稍后重试')
				})
				
			}
		}
	}
</script>

<style lang='scss'>
	.firstPacket{
		position: relative;
		text-align:center;
		.all{
			font-size:32upx;
			color:rgba(255,255,255,1);
			line-height:35upx;
			position: absolute;
			left: 0;
			top: 331upx;
			text-align: center;
			width: 100%;
		}
		.price{
			position: absolute;
			left: 0;
			top:464upx;
			width:100%;
			.title{
				font-size:48upx;
				font-weight:500;
				color:rgba(185,111,22,1);
				margin-bottom: 15upx;
			}
			.money{
				font-size:106upx;
				font-weight:700;
				color:rgba(230,88,54,1);
				.unit{
					margin-left: 10upx;
					font-size:48upx;
					font-weight:400;
				}
			}
		}
		.timeOut{
			font-size:32upx;
			color:rgba(255,255,255,1);
			opacity:0.6;
			position:absolute;
			bottom: 446upx;
			left:0;
			width: 100%;
		}
		.btn{
			background:url(../../static/cashBonus/btn-invitate1.png) no-repeat;
			background-size: 100% 100%;
			width: 442upx;
			height: 80upx;
			position:absolute;
			bottom: 306upx;
			left: 50%;
			margin-left: -221upx;
			font-size:34upx;
			font-weight:bold;
			color:rgba(185,111,22,1);
			line-height:74upx;
		}
		.btn-rules{
			position: absolute;
			top: 0upx;
			right: 0upx;
			width: 122upx;
			height: 100upx;
			z-index: 100000;
		}
	}
	
</style>
<template>
	<!-- 邀请页面 -->
	<view class="invite">
		<view >
			<img  src="../../static/cashBonus/inviteBg.png" alt="">
			<view class='percent' v-if='inviteData'>
				<VProgressBar :percent='inviteData.percent'></VProgressBar>
			</view>
			
			<view class='middle' >
				<view class='qrCodeContent'>
					<img :src="imgUrl" v-if='imgUrl' alt="">
					<!-- <VQRcode v-if='inviteData' :size='268' :val='inviteData.downloadLink' @success='success'></VQRcode> -->
				</view>
				
				<view>{{inviteData.invitationCode}}</view>
			</view>
			<view class='btn' @click="download"></view>
		</view>
	</view>
</template>

<script>
	import VQRcode from "@/components/VQRcode.vue"
	import VProgressBar from "@/components/VProgressBar"
	import {
		host,
		host_other
	} from '@/common/config'
	export default {
		data() {
			return {
				inviteData: '',
				id:'',
				imgUrl:''
				
				
			}
		},
		onLoad(options) {
			this.id=options.userId
			this.inint();
			
		},
		methods: {
			async inint() {
				let res = await this.$api.getRedPacketShare({
					userId:this.id
				});
				this.inviteData = res.data;
				let that=this;
				this.imgUrl=`${host}/other/validatecode/getQRCodeImage?height=200&width=200&text=${this.inviteData.invitationCode}`

			},
			success(){
				// this.isShow=true;
			},
			download(){
				let that=this;
				this.$copyText(this.inviteData.invitationCode).then(function(){
					that.$toast('复制成功')
					setTimeout(function() {
						window.open(that.inviteData.downloadLink)
					}, 300);
				},function(){
					that.$toast('复制失败，请稍后重试')
				})
			}
		},
		components: {
			VQRcode,
			VProgressBar
		}
	}
</script>

<style lang='scss'>
	.invite {
		position: relative;
		text-align: center;

		.middle {
			position: absolute;
			bottom: 254upx;
			left: 0;
			text-align: center;
			width: 100%;
			font-size: 30upx;
			font-weight: bold;
			color: rgba(255, 255, 255, 1);

			.qrCodeContent {
				width: 288upx;
				height: 288upx;
				margin: 0 auto 28upx;
				padding: 10upx;
				background-color: #FFFFFF;
				
			}
		}

		.btn {
			width: 500upx;
			height: 140upx;
			position: absolute;
			bottom: 148upx;
			left: 50%;
			margin-left: -250upx;
		}

	}
	.percent{
		width: 546upx;
		position: absolute;
		left: 50%;
		top: 507upx;
		margin-left: -273upx;
	}
	
	
</style>
<template><!-- 红包列表 -->
	<view class="redList">
		<view class='banner'>
			<img src="../../static/cashBonus/listBanner.png" alt="">
			<view class='price' v-if='listData'>{{listData.totalCashAmount||0}}</view>
			<view class='price price1' v-if='listData'>{{listData.usableCashAmount}}</view>
			<view class='rule'>按照游戏步骤依次完成</view>
			<view class='btn btn-withdrawal' @click='toGetMoney'></view>
		</view>
		<view class='list'  v-if='listData'>
			<view class='title'>收支明细</view>
			<view class='detail'>
				<view class='item' v-for='(item,index) in listData.packetVos' :key='index'>
					<view class='topsider'>
						<view class='tk'>现金红包</view>
						<view class='tv'>+{{item.amount}}</view>
					</view>
					<view class='topsider bottomsider'>
						<view class='tk'>{{$common.formatDate(item.createTime)}}</view>
						<!-- 状态 0=进行中 1=待结算 2=已结算 3=已失效-->
						<view class='tv' v-if='item.status==0'>进行中</view>
						<view class='tv' v-if='item.status==1'>待结算</view>
						<view class='tv' v-if='item.status==2'>已结算</view>
						<view class='tv' v-if='item.status==3'>已失效</view>
					</view>
				</view>
			</view>
		</view>
		
		
	</view>
</template>

<script>
	export default {
		data() {
			return {
				listArr:[[],[],[]],
				userInfo: this.$store.getters.userInfo,
				listData:''
			}
		},
		onLoad() {
			this.inint()
		},
		methods: {
			async inint(){
				let res= await this.$api.getUserRedPacketWithCash({
					userId:this.userInfo.id
				})
				this.listData=res.data;
				console.log(222,this.listData)
			},
			toGetMoney() {
			
				// 获取最低提现额度
				this.$api.getByType({
					configEnum: 'MINIMUM_WITHDRAWAL_AMOUNT'
				}).then(res => {
					let minimum = +res.data[0].configVal
			
					if (this.listData.usableCashAmount && this.listData.usableCashAmount >= minimum) {
						uni.navigateTo({
							url: '/pages/earning/getMoney?type=2' //1是提现余额，2是红包余额
						});
			
					} else {
						this.$toast(`最低提现额度为${minimum}元`)
					}
				})
			
			
			}
		}
	}
</script>

<style lang='scss'>
	uni-page-body{
		height: 100%;
	}
	.redList{
		min-height: 100%;
		background-color:#F9F9FA;
		.banner{
			position: relative;
			.price{
				font-size:80upx;
				position: absolute;
				left: 146upx;
				top: 144upx;
				color:rgba(230,88,54,1);
			}
			.price1{
				left: 452upx;
			}
			.rule{
				font-size:24upx;
				color:rgba(114,26,7,1);
				opacity:0.6;
				width: 100%;
				text-align: center;
				position: absolute;
				left: 0;
				bottom: 16upx;
			}
		}
		.list{
			padding:26upx 28upx;
			.title{
				font-size:34upx;
				font-weight:bold;
				color:rgba(40,40,40,1);
				position:relative;
				margin:0 0 32upx;
				&::after{
					content:'';
					width:85upx;
					height:8upx;
					background:rgba(247,68,45,1);
					border-radius:4upx;
					position: absolute;
					bottom: -10upx;
					left: 18upx;
				}
			}
			.item{
				height:150upx;
				background:rgba(255,255,255,1);
				box-shadow:0upx 7upx 35upx 0upx rgba(167,167,167,0.1);
				border-radius:10upx;
				margin-bottom: 26upx;
				padding:24upx 30upx 24upx;
				.topsider{
					justify-content: space-between;
					align-items: center;
					display:flex;
					.tv{
						font-size:40upx;
						font-weight:bold;
						color:rgba(40,40,40,1);
					}
					.tk{
						font-size:28upx;
						font-weight:500;
						color:rgba(40,40,40,1);
					}
				}
				.bottomsider{
					margin-top:18upx;
					.tv{
						font-size:24upx;
						font-weight:500;
						color:rgba(237,74,33,1);
					}
					.tk{
						font-size:24upx;
						font-weight:500;
						color:rgba(127,127,127,1);
					}
				}
			}
		}
		
		
		
	}
	.btn-withdrawal{
		width: 200upx;
		height: 100upx;
		/* border: 1px solid red; */
		position: absolute;
		top: 20upx;
		right: 0;
	}
</style>
<template><!-- 规则-->
	<view class="rules" :class='[!type?"rules":"rules rules1"]'>
		<view class='header' @click="goback" v-if='!type'>
			<view class='goback'><view class='icon'></view></view>
			
			天天领现金
		</view>
		<view class='item'>
			<view class='title'>活动规则:</view>
			<!-- <view class='title title1'>1、什么是积分</view> -->
			<view class='detail'>1.本次活动仅限普通用户和VIP用户参与</view>
			<view class='detail'>2.活动期间一个设备每24小时可瓜分一次随机红包;</view>
			<view class='detail'>3.已领取的红包有效期为24小时,有效期内拆完所有红包,即可全额提现;</view>
			<view class='detail'>4.本活动前后共6个步骤,分为3次分享和3次邀请新用户,用户需要按照所有活动步骤依次完成才算有效;</view>
			<view class='detail'>5.新用户定义:需要同时满足新设备和新注册账号。活动中新用户需要在红包有效期内通过活动链接登陆APP才算完成邀请新用户;</view>
			<view class='detail'>6.平台每日发放金额有限。如当日红包金额发放完,则不再继续发放,可次日再来领取;</view>
			<view class='detail'>7.拆完可提现的红包,可在<text class='tip'>【我的】-【现金红包】</text>账户中提现和查看;</view>
 
<view class='detail'>8.用户需要按照活动步骤来完成拆红包,不得用任何不正当手段或舞弊方式参与活动。一经发现,平台有权收回发放的红包并保留追究该用户责任的权利。</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				type:''
			}
		},
		onLoad(options) {
			this.type=options.type;
		},
		methods: {
			goback(){
				uni.navigateBack();
			}
		}
	}
</script>

<style lang='scss'>
	.rules{
		padding: 158upx 30upx;
		.title{
			font-size:32upx;
			font-weight:700;
			color:rgba(40,40,40,1);
			line-height: 1.5;
			margin-bottom: 20upx;
		}
		.title1{
			font-size:28upx;
			margin-bottom: 15upx;
			line-height: 1.5;
			padding:0 10upx;
		}
		.detail{
			font-size:26upx;
			color:#2a2a2a;
			line-height: 1.5;
			/* text-indent: 48upx; */
			padding:6upx 10upx;
		}
	}
	.tip{
		font-weight: 700;
	}
	.header{
		width: 100%;
		height: 88upx;
		background: #bf3627;
		position: fixed;
		top: 0;
		left: 0;
		font-size: 32upx;
		color: #fff;
		text-align: center;
		line-height: 88upx;
		.goback{
			position: absolute;
			left: 0;
			top:0;
			padding:30upx 27upx;
		}
		.icon{
			width:18upx;
			height: 34upx;
			background: url(../../static/common/arrow.png) no-repeat;
			background-size: 100% 100%;
		}
	}
	.rules1{
		padding-top:40upx ;
	}
</style>
<template><!-- 第二次打开红包 -->
	<view class="secondPacket">
		<view>
			<img src="../../static/cashBonus/secondBg.png" alt="">
			<view class='allMoney'>
				<view>瓜分</view>
				<view>{{cashPack.totalCashRedPacket}}红包</view>
			</view>
			<view class='all'>今日已送出现金￥{{cashPack.todayAlreadySendAmount}}</view>
			<view class='price'>
				<view class='title'>已拆现金</view>
				<view class='money'>{{cashPack.alreadySendAmount}} <text class='unit'>元</text></view>
				<view class='poor'>还差<text class='poorMoney'>{{cashPack.surplusAmount }}元</text> 即可提现</view>
			</view>
			<view class='rules'>按照游戏步骤依次完成</view>
			<view class='timeOut'>{{time}}后现金将失效</view>
			<view class='btn' @click="openPop">分享{{cashPack.surplusNumber }}位好友，再拆{{cashPack.surplusAmount}}元</view>
			<view class='btn-rules' @click="jumpRules"></view>
			<view class='list'>
				<view class='item' v-for='(item,index) in cashPack.recordVos' :key='index'>
					<view class='leftsider'>
						<img :src="item.headImgurl" alt="">
						<view class='middle'>
							<view class='mk'>{{item.userName}}</view>
							<view class='mv'>{{item.remark}}</view>
						</view>
					</view>
					<view class='money'>已拆开{{item.amount}}元</view>
				</view>
			</view>
		</view>
		<vPop v-if='isShowPop' @closePop='closePop'>
			<view class='pop-main'>
				<view class='title'>已拆现金</view>
				<view class='money title'>{{shareDate.alreadySendAmount}}</view>
				<view class='money1 title'>还差{{shareDate.surplusAmount}}元 即可提现</view>
				<view class='btn btn-share' @click="share">分享{{shareDate.surplusNumber }}位好友 再拆{{shareDate.surplusAmount}}元</view>
				<view class='percent' v-if='shareDate'>
					<VProgressBar :percent='shareDate.percent'></VProgressBar>
				</view>
				<view class='btn-close' @click='closePop'></view>
			</view>
		</VPop>
	</view>
</template>

<script>
	import VProgressBar from "@/components/VProgressBar"
	import  cashMixins  from './cashMixins'
	import  vPop  from '@/components/VPop.vue'
	import  popMixins  from '@/common/popMixins'
	export default {
		mixins:[cashMixins,popMixins],
		data() {
			return {
				time:'',
				list:[[],[],[]],
				cashPack:'',
				shareDate:'',
				userInfo: this.$store.getters.userInfo,
				url:""
			}
		},
		onLoad() {
			let cashPack= this.$common.getCookie('cashPack');
			this.cashPack=cashPack?JSON.parse(cashPack):null
			console.log(this.cashPack)
			let t=Math.floor(this.cashPack.failureTime/1000);
			this.inintTimeOut(t);
			
		},
		methods: {
			async openPop(){
				console.log(222,this.userInfo)
				let res=await this.$api.getRedPacketShare({
					userId:this.userInfo.id
				});
				this.shareDate=res.data;
				this.isShowPop=true;
			},
			share(){
				let that=this;
				this.url=`${window.location.protocol}//${window.location.host}/pages/cashBonus/invite?userId=${this.userInfo.id}`
				let text=`${this.shareDate.shareTitle}\n${this.shareDate.shareRamrk}\n分享链接:${this.url}`
				this.$copyText(text).then(function(){
					that.$toast('复制分享链接成功')
					that.$api.doDismantledRedPacket({
						userId:that.userInfo.id
					}).then(function(){
						window.open('weixin://')
					});
				},function(){
					that.$toast('复制失败，请稍后重试')
				})
			}
		},
		components:{
			vPop,
		VProgressBar
		}
	}
</script>

<style lang='scss'>
	.secondPacket{
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		text-align:center;
		background-color:#F54833;
		overflow: auto;
		padding-bottom:100upx;
		.all{
			font-size:32upx;
			color:rgba(255,255,255,1);
			line-height:35upx;
			position: absolute;
			left: 0;
			top: 140upx;
			text-align: center;
			width: 100%;
		}
		.price{
			position: absolute;
			left: 0;
			top:268upx;
			width:100%;
			.title{
				font-size:36upx;
				font-weight:700;
				color:rgba(185,111,22,1);
				margin-bottom: 15upx;
			}
			.money{
				font-size:106upx;
				font-weight:700;
				color:rgba(230,88,54,1);
				.unit{
					margin-left: 10upx;
					font-size:48upx;
					font-weight:400;
				}
			}
			.poor{
				margin-top: 30upx;
				font-size:26upx;
				font-weight:700;
				color:rgba(185,110,21,1);
				.poorMoney{
					color:rgba(230,88,54,1);
					margin-right: 10upx;
				}
			}
		}
		.timeOut{
			font-size:32upx;
			color:rgba(255,255,255,1);
			opacity:0.6;
			position:absolute;
			top: 756upx;
			left:0;
			width: 100%;
		}
		.btn{
			background:url(../../static/cashBonus/btn-invitate1.png) no-repeat;
			background-size: 100% 100%;
			width: 554upx;
			height: 80upx;
			position:absolute;
			top: 653upx;
			left: 50%;
			margin-left: -277upx;
			font-size:34upx;
			font-weight:bold;
			color:rgba(185,111,22,1);
			line-height:74upx;
		}
		.rules{
			position:absolute;
			top: 598upx;
			left: 0;
			width: 100%;
			font-size:24upx;
			color:rgba(114,26,7,1);
			opacity:0.6;
		}
		.item{
			width:100%;
			height: 160upx;
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 37upx;
			background: url(../../static/cashBonus/itemBg.png) no-repeat;
			background-size: 100% 100%;
			.leftsider{
				/* flex: 0 0 60%; */
				display: flex;
				align-items: center;
			}
			img{
				border-radius: 50%;
				border: 1px solid #fff;
				width: 94upx;
				height: 94upx;
				margin-right: 20upx;
			}
			.middle{
				font-size:32upx;
				color:rgba(255,255,255,1);
				text-align:left;
				.mv{
					font-size:24upx;
					margin-top: 20upx;
				}
			}
			.money{
				padding: 11upx 21upx;
				background:linear-gradient(-14deg,rgba(239,45,7,1) 0%,rgba(244,83,50,1) 100%);
				font-size:28upx;
				color:rgba(255,255,255,1);
			}
		}
		.btn-rules{
			position: absolute;
			top: 0upx;
			right: 0upx;
			width: 122upx;
			height: 140upx;
			z-index: 100000;
		}
	}
	.pop-main{
		width: 750upx;
		height: 1125upx;
		font-size: 15px;
		font-weight: bold;
		color: #333333;
		top: 100upx;
		background:url(../../static/cashBonus/pop-share.png) no-repeat;
		background-size: 100%;
		left: 50%;
		margin-left: -361upx;
		text-align: center;
		.btn-close{
			width: 100upx;
			height: 100upx;
			position: absolute;
			bottom: 0;
			left: 50%;
			margin-left: -50upx;
		}
		.title{
			font-size:48upx;
			font-weight:700;
			color:rgba(255,255,255,1);
			opacity:0.4;
			position: absolute;
			bottom: 0;
			top: 400upx;
			width: 100%;
		}
		.money{
			font-size:106upx;
			font-weight:400;
			color:rgba(255,255,255,1);
			opacity: 1;
			top: 500upx;
		}
		.money1{
			font-size:32upx;
			font-weight:400;
			color:rgba(255,255,255,1);
			opacity:0.4;
			top: 652upx;
		}
		.btn-share{
			background:none;
			top: 818upx;
		}
	}
	.allMoney{
		position: absolute;
		right: 37upx;
		top: 936upx;
		color: #fff9c5;
		font-size: 24upx;
		width: 154upx;
		height: 87upx;
		background: url(../../static/cashBonus/secondBgMoney.png) no-repeat;
		background-size: 100% 100%;
		padding: 10upx 0;
	}
	.VProgressBar{
		width:506upx;
		position: absolute;
		left: 50%;
		margin-left:-253upx;
		top: 780upx;
	}
</style>
<template><!-- 升级团长 -->
	<view class="upGradeDelegat">
		<img class='bg' src="../../static/cashBonus/delegateBg.png" alt="" />
		<view class='progress'>
			<view class='item' v-for='(item,index) in progressArr' :key='index'>
				<view class='title' v-if='index!=2'>
					<text class='tk'>{{item.name}}</text>
					<text class='tv'>{{item.person}}人/目标{{item.allPerson}}人</text>
				</view>
				<view class='title' v-if='index==2'>
					<text class='tk'>{{item.name}}</text>
					<text class='tv'>{{item.person}}元/目标{{item.allPerson}}元</text>
				</view>
				<view class='progressContent' >
					<view class='percent' v-if='item.value==0'>0%</view>
					<view class='bar' v-if='item.value!=0'  :style="{width:`${item.value}%`}">
						<view class='percent' >{{item.value}}%</view>
					</view>
				</view>
			</view>
		</view>
		<view class='detail'>
			{{upGradeDelegat.remark}}
		</view>
		
		<view class='privilege'>
			<view class='bar' :class='upGradeDelegat.presentPrivilegeImageList?"bar":"bar bar1"'>
				<view  :class='index==0?"item active":"item"' @click='check(1)' v-if='upGradeDelegat.presentPrivilegeImageList'>当前特权</view>
				<view  :class='index!=0?"item active":"item"' @click='check(0)'>团长特权</view>
			</view>
			<view v-for='(item,index) in imgList' :key='index'>
				<img :src="item.imageUrl" alt="">
			</view>
			<view class='btn-group'>
				<view class='btn btn-recharge' @click="goPromote()" v-if='upGradeDelegat.presentPrivilegeImageList'>充值{{upGradeDelegat.regimentalCommanderCard}}元 </view>
				<view class='btn' @click="share()">邀请好友</view>
			</view>
		</view>
		<view v-for='(item,index) in imgListAll' :key='index' class='bottom'>
			<img :src="item.imageUrl" alt="">
		</view>
	</view>
</template>

<script>
	import { sending } from '@/common/bridge'
	export default {
		data() {
			return {
				progressArr:[
					{
						name:'直属粉丝',
						value:'',
						person:'',
						allPerson:''
					},
					{
						name:'直属粉丝邀约',
						value:'',
						person:'',
						allPerson:''
					},
					{
						name:'佣金',
						value:'',
						person:'',
						allPerson:''
					}
						
				],
				upGradeDelegat:'',
				userInfo: this.$store.getters.userInfo,
				index:0,
				imgList:[],
				type:'',
				userId:"",
				imgListAll:[],
			}
		},
		onLoad(options) {
			
			this.type=options.type;
			this.userId=options.userId;
			this.inint();
			
		},
		methods: {
			async inint(){
				let userInfoId
				if(!this.userId){
					userInfoId=this.userInfo?this.userInfo.id:'';
				}else{
					userInfoId=this.userId;
				}
				
				
				let res=await this.$api.getUpgradeDelegationInfo({
					userId:userInfoId
				});
				this.upGradeDelegat=res.data;
				this.progressArr[0].value=res.data.oneLevelFansPercent;
				this.progressArr[0].person=res.data.oneLevelFansNumber;
				this.progressArr[0].allPerson=res.data.upgradeDelegationOneFansNummber;
				
				this.progressArr[1].value=res.data.twoLevelFansPercent;
				this.progressArr[1].person=res.data.twoLevelFansNumber;
				this.progressArr[1].allPerson=res.data.upgradeDelegationTwoFansNummber;
				
				this.progressArr[2].value=res.data.commPercent;
				this.progressArr[2].person=res.data.commission ;
				this.progressArr[2].allPerson=res.data.upgradeDelegationComm;
				this.progressArr.forEach(function(item,index){
					if(item.value>100){
					item.value=100
					}
				})
				
				this.check(this.index)
				console.log(this.progressArr)
				
				this.imgListAll=this.upGradeDelegat.imageList;
			},
			check(index){
				this.index=index;
				if(index==0){//当前特权
					this.imgList=this.upGradeDelegat.teamPrivilegeImageList;
					
				}else{//团长特权
					this.imgList=this.upGradeDelegat.presentPrivilegeImageList;
				}
				
			},
			share(){//分享
				let obj={
					type:'2'
				}
				if(this.type=='android'){
					jsActivity.onCall(JSON.stringify(obj))
					return
				}
				sending(obj)
			},
			goPromote(){//跳转充值面
				let obj={
					type:'1',
					price:this.upGradeDelegat.regimentalCommanderCard,
					id:3
				}
				if(this.type=='android'){
					jsActivity.onCall(JSON.stringify(obj))
					return
				}
				sending(obj)
			}
		}
	}
</script>

<style lang='scss'>
	.upGradeDelegat{
		background-color: #ee4544;
		padding-bottom: 40upx;
	}
	.progress{
		position: relative;
		left: 0;
		top: 0;
	}
	.progress{
		position: absolute;
		top: 750upx;
		left: 65upx;
		width:620upx;
		height:481upx;
		padding:30upx 36upx;
		.title{
			font-size:28upx;
			font-weight:400;
			display: flex;
			align-items: center;
			justify-content: space-between;
			color:rgba(111,63,11,1);
			.tv{
				font-size:24upx;
			}
		}
		.progressContent{
			height:30upx;
			background:rgba(255,255,255,1);
			border-radius:15upx;
			position: relative;
			margin:34upx 0 52upx;
			.bar{
				height:30upx;
				background:rgba(255,173,28,1);
				position: absolute;
				left: 0;
				top: 0;
				border-radius:15upx;
				.percent{
					text-align: right;
				}
			}
			.percent{
				font-size:24upx;
				color:rgba(111,63,11,1);
				line-height: 30upx;
				padding: 0 10upx;
				text-align: center;
			}
		}
	}
	.detail{
		position: absolute;
		top: 1264upx;
		left: 65upx;
		width:620upx;
		padding:0 12upx;
		font-size:24upx;
		font-weight:400;
		color:rgba(255,255,255,1);
		line-height:44upx;
	}
	.privilege{
		min-height:706upx;
		background-color:#D72C2D;
		border-radius:10upx;
		margin: 30upx 24upx 0;
		.bar{
			display: flex;
			align-items: center;
			height: 110upx;
			.item{
				flex: 0 0 50%;
				font-size:36upx;
				font-weight:bold;
				color:rgba(255,255,255,1);
				line-height: 110upx;
				text-align: center;
			}
			.active{
				height: 100%;
				background:rgba(110,29,29,1);
				border-radius:10upx;
				font-size:30upx;
				font-weight:400;
				color:rgba(255,255,255,1);
				opacity:0.5;
				
			}
		}
	}
	.btn-invite{
		
		
	}
	.btn-group{
		position: fixed;
		width: 100%;
		bottom: 48upx;
		left:0;
		display:flex;
		justify-content: center;
		align-items:center;
		font-size:30upx;
		color:rgba(60,41,6,1);
		.btn{
			width:320upx;
			height:83upx;
			text-align: center;
			line-height: 83upx;
			background:linear-gradient(101deg,rgba(254,244,183,1),rgba(253,186,57,1));
			border-radius:42upx;
		}
		.btn-recharge{
			margin-right: 34upx;
		}
	}
	.bottom{
		    margin: 10upx 24upx 100upx;
	}
	.bar1 .item{
		flex:0 0 100% !important;
		}
</style>
<!-- 分类页面 -->
<template>
	<view class="category">
		<VScroll class="left-aside">
			<view v-for="(item,index) in flist" :key="item.id" class="f-item" :class="{active: index === currentId}" @click="tabtap(index)">
				{{item.val}}
			</view>
		</VScroll>
		<VScroll class="right-aside" :vScrollData="slist[currentId]">
			<view class="s-list" v-if="slist[currentId]&&slist[currentId].length>0">
				<text class="s-item">{{flist[currentId].val}}</text>
				<view class="t-list">
					<view class="t-item" v-for="(sitem,sindex) in slist[currentId]" :key="sindex" @click="navToList(sitem)">
						<image :src="sitem.imageUrl"></image>
						<text>{{sitem.val}}</text>
					</view>
				</view>
			</view>
		</VScroll>

	</view>
</template>

<script>
	export default {
		data() {
			return {
				currentId: 0,
				flist: [],
				slist: [],
			}
		},
		onLoad() {
			this.loadData();
		},
		methods: {
			async loadData() {
				this.flist = (await this.$api.getFirstClassList()).data;
				this.getSecondList()

			},
			//一级分类点击
			tabtap(index) {
				this.currentId = index;
				this.getSecondList()
			},
			// 获取二级分类的数据
			async getSecondList() {
				// 存在就不去请求了
				if (this.slist[this.currentId]) {
					return
				}
				let data = (await this.$api.getByParentIdList({
					parentId: this.flist[this.currentId].id
				})).data
				this.$set(this.slist, this.currentId, data)
			},

			navToList(item) {
				this.$store.dispatch('searchObject', item)
				uni.switchTab({
					url: `/pages/search/search`
				})
			},
		}
	}
</script>

<style lang='scss'>
	page{
		background: #fff;
	}
	.category {
		display: flex;
		.VScroll{
			top: 0;
			bottom: 0;
		}
	}

	.left-aside {
		width: 150upx;
		background-color: #fff;
	}

	.f-item {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 100%;
		height: 108upx;
		margin-bottom: 4upx;
		font-size: 28upx;
		color: $font-color-base;
		background: #EDEDED;
		position: relative;

		&.active {
			color: $base-color;
			background: #fff;

			&:before {
				content: '';
				position: absolute;
				left: 0;
				top: 50%;
				transform: translateY(-50%);
				height: 36upx;
				width: 8upx;
				background-color: $base-color;
				border-radius: 0 4px 4px 0;
				opacity: .8;
			}
		}
	}

	.right-aside {
		left: 150upx;
		padding: 0 40upx;
	}

	.s-item {
		display: flex;
		align-items: center;
		height: 70upx;
		padding: 8upx 0 0 30upx;
		font-size: 28upx;
		color: $font-color-dark;
		font-weight: bold;
	}

	.t-list {
		display: flex;
		flex-wrap: wrap;
		width: 100%;
		background: #fff;
		padding-top: 12upx;

		&:after {
			content: '';
			flex: 99;
			height: 0;
		}
	}

	.t-item {
		flex-shrink: 0;
		display: flex;
		justify-content: center;
		align-items: center;
		flex-direction: column;
		width: 33.333%;
		font-size: 24upx;
		color: #333;
		padding-bottom: 20upx;

		image {
			width: 120upx;
			height: 120upx;
		}
	}
</style>
<template>
	<view class="earning">
		<!-- 头部 -->
		<view class="header">
			<view class="header-main">
				<view class="header-all">
					<view class="header-title">总收益（元）<view class="header-eye" :class="{hide:!eye_show}" @click="clickEye"></view>
					</view>
					<view class="header-num">
						<block v-if="eye_show">{{userAsset.totalRevenue | money}}</block>
						<block v-else>*****</block>
					</view>
				</view>
				<view class="header-usable">
					<view class="header-title">可用余额（元）</view>
					<view class="header-num">
						<block v-if="eye_show">{{userAsset.balance | money}}</block>
						<block v-else>*****</block>
					</view>
				</view>
				<view class="header-unusable">
					<view class="header-title">即将到账（元）</view>
					<view class="header-num">
						<block v-if="eye_show">{{userAsset.aboutArrive | money}}</block>
						<block v-else>*****</block>
					</view>
				</view>
			</view>
			<view class="header-ad">
				<image src="/static/earning/ad.png" mode="widthFix"></image>
			</view>

		</view>

		<!-- 详细数据列表 -->
		<view class="detailList">
			<view class="detailList-tab" :class="{fixed:detailList_fixed}" ref="detailList">
				<view v-for="(item,index) of navList" :key="index" class="detailList-tab-item" :class="{act:detailList_act==index}"
				 @click="changeTab(index)">{{item.text}}</view>
			</view>
			<view class="detailList-page">
				<block v-for="(page_item,page_index) of navList" :key="page_index">
					<view v-show="page_index == detailList_act" class="detailList-page-item">
						<VEmpty v-if="page_item.dataList.length==0&&page_item.loadingType=='noMore'" :img='"/static/common/nullTiXian.png"'></VEmpty>
						<block v-else>
							<view>
								<view class="dpi-item" v-for="(item,index) of page_item.dataList" :key="index">
									<view class="dpi-name">{{recordType(item.type)}}</view>
									<view class="dpi-tips">{{terraceType(item.terraceType)}}</view>
									<view class="dpi-calc">{{incomeExpenditure(item.incomeExpenditure,item.amount)}}</view>
									<view class="dpi-time">{{ item.createTime | moment('y-M-d') }}</view>
									<view class="dpi-sum">{{item.balance}}</view>
								</view>
							</view>
							<uniLoadMore :status="page_item.loadingType"></uniLoadMore>
						</block>

					</view>

				</block>
			</view>
		</view>
		<view class="earning-get" @click="toGetMoney">提现</view>
	</view>
</template>

<script>
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	import VEmpty from "@/components/VEmpty";
	export default {
		components: {
			uniLoadMore,
			VEmpty
		},
		data() {
			return {
				// 用户资产
				userAsset: {},
				// 导航分类列表
				navList: [{
						text: '全部',
						loadingType: 'more',
						pageNum: 1,
						dataList: []
					},
					{
						text: '收入',
						loadingType: 'more',
						pageNum: 1,
						dataList: []
					},
					{
						text: '支出',
						loadingType: 'more',
						pageNum: 1,
						dataList: []
					},
				],
				// 导航分类选中的index
				detailList_act: 0,
				// 是否将记录列表固定在顶部
				detailList_fixed: false,
				// 记录列表距离顶部的距离
				detailList_top: 0,
				// 是否显示金额
				eye_show: true
			}
		},
		async created() {
			if (!this.$commonLogic.verifyLogin()) {
				return
			}

			this.$api.getUserAsset().then(res => {
				this.userAsset = res.data
			})

			this.getRecordData()

		},
		mounted() {
			//获取记录列表距离顶部的距离
			this.detailList_top = this.$common.getElementTop(this.$refs.detailList.$el)
		},
		computed: {

		},
		onReachBottom() {
			this.getRecordData()
		},
		onPageScroll(e) {
			this.handleScroll(e)
		},
		methods: {
			getRecordData() {

				let index = this.detailList_act
				let navItem = this.navList[index]
				let params = {
					pageNum: navItem.pageNum
				}
				if (index != 0) {
					params.incomeExpenditureType = index
				}

				//如果是正在加载或是没有更多了则不再请求
				if (navItem.loadingType === 'loading' || navItem.loadingType === 'noMore') {
					//防止重复加载
					return;
				}

				navItem.loadingType = 'loading';

				this.$api.getRecordVo(params).then(res => {
					let dataBox = res.data.list || []
					navItem.dataList = [...navItem.dataList, ...dataBox]

					//判断是否还有数据， 有改为 more， 没有改为noMore 
					if (dataBox.length < 10) {
						navItem.loadingType = 'noMore';
						return
					} else {
						navItem.loadingType = 'more';
					}

					//页码加一
					navItem.pageNum++

				})
			},
			changeTab(index) {
				this.detailList_act = index
				if (this.navList[index].dataList.length == 0) {
					this.getRecordData()
				}

			},
			handleScroll(e) {

				let scrollTop = e.scrollTop
				if (this.detailList_top <= scrollTop) {
					this.detailList_fixed = true
				} else {
					this.detailList_fixed = false
				}

			},
			clickEye() {
				this.eye_show = !this.eye_show
			},
			recordType(type) {
				let name = ''
				switch (type) {
					case 1:
						name = '新手奖励'
						break;
					case 2:
						name = '返现'
						break;
					case 3:
						name = '提现'
						break;
					case 4:
						name = '待结算佣金'
						break;
					case 5:
						name = '已结算佣金'
						break;
					case 6:
						name = '推广'
						break;
					default:
						break;
				}
				// 类型(1=新手奖励/2=返现/3=提现/4=待结算佣金/5=已结算佣金/6=推广)
				return name
			},
			// 平台类型(1=淘宝/2=京东/3=拼多多) 
			terraceType(type) {
				let name = ''
				switch (type) {
					case 1:
						name = '淘宝'
						break;
					case 2:
						name = '京东'
						break;
					case 3:
						name = '拼多多'
						break;
					default:
						break;
				}
				return name
			},
			// incomeExpenditure 收支类型(1=收入/2=支出) ,
			incomeExpenditure(type, money) {
				if (type == 1) {
					return '+' + money
				}
				return '-' + money
			},
			toGetMoney() {

				// 获取最低提现额度
				this.$api.getByType({
					configEnum: 'MINIMUM_WITHDRAWAL_AMOUNT'
				}).then(res => {
					let minimum = +res.data[0].configVal

					if (this.userAsset.balance && this.userAsset.balance >= minimum) {
						uni.navigateTo({
							url: '/pages/earning/getMoney'
						});

					} else {
						this.$toast(`最低提现额度为${minimum}元`)
					}
				})


			}
		},

	}
</script>

<style lang="scss">
	.earning {}

	.header {
		position: relative;
		height: 375upx;
		background: #e43c3e url(/static/earning/headerBg.png) no-repeat;
		background-size: 100%;
		text-align: center;
		color: #fff;

		.header-main {
			display: flex;
			flex-wrap: wrap;
			padding: 40upx 60upx;
		}

		.header-eye {
			display: inline-block;
			width: 30upx;
			height: 30upx;
			vertical-align: middle;
			background: url(/static/earning/eye_show.png) no-repeat;
			background-size: 100%;

			&.hide {
				background-image: url(/static/earning/eye_hide.png);
			}
		}

		.header-title {
			display: flex;
			align-items:center;
			justify-content: center;
			font-size: 24upx;
			overflow: hidden;
		}

		.header-num {
			font-size: 34upx;
			margin-top: 20upx;
		}

		.header-all {
			width: 100%;
			margin-bottom: 40upx;

			.header-num {
				font-size: 60upx;
			}
		}

		.header-usable {
			width: 180upx;
		}

		.header-unusable {
			width: 180upx;
			margin-left: auto;
		}

		.header-ad {
			position: absolute;
			left: 24upx;
			bottom: -78upx;
			width: 702upx;
			height: 126upx;
			image {
				width: 100%;
				height: auto;
			}
		}
	}

	.detailList {
		position: relative;
		width: 702upx;
		padding-top: 90upx;
		padding-bottom: 150upx;
		margin: 102upx auto 0;
		background: #fff;
		border-radius: 10upx;
		font-size: 28upx;
		color: #333;

		&.fixed {
			position: absolute;
			top: 0;
			left: 24upx;
			z-index: 9999;
		}

		.detailList-tab {
			position: absolute;
			top: 0;
			left: 0;
			display: flex;
			align-items: center;
			justify-content: space-around;
			width: 100%;
			height: 90upx;
			border-bottom: 1px solid #F2F2F2;
			background: #fff;
			font-weight: bold;

			&.fixed {
				position: fixed;
				z-index: 9999;
			}

			.detailList-tab-item {
				&.act {
					color: #BF3627;
					border-bottom: 4upx solid #BF3627;

				}
			}
		}

		.detailList-page {
			position: relative;

			.detailList-page-item {
				padding: 0 24upx;

				.dpi-item {
					display: flex;
					flex-wrap: wrap;
					align-content: space-between;
					height: 130upx;
					padding: 35upx 0 25upx;
					border-bottom: 1px solid #F2F2F2;

					&:last-child {
						border-bottom: none;
					}
				}

				.dpi-name {
					width: 33.33%;
				}

				.dpi-tips {
					width: 33.33%;
					text-align: center
				}

				.dpi-calc {
					width: 33.33%;
					margin-left: auto;
					text-align: right;
				}

				.dpi-time {
					width: 50%;
					font-size: 24upx;
					color: #999;
				}

				.dpi-sum {
					width: 50%;
					text-align: right;
					font-size: 24upx;
					color: #999;
				}
			}
		}
	}

	.earning-get {
		position: fixed;
		bottom: 32upx;
		left: 25upx;
		@include allCenter;
		width: 700upx;
		height: 98upx;
		background: url(/static/earning/btn.png) no-repeat;
		background-size: 100%;
		font-size: 34upx;
		color: #fff;

	}
</style>
<template><!-- 提现 -->
	<view class="getmoney">
		<view class="getmoney-num">
			<view class="VPhone-phone">
				<image class="VPhone-icon" src="/static/earning/Alipay.png"></image>
				<view class="VPhone-name">支付宝账号</view>
			</view>
			<input class="VPhone-input" placeholder-style="fontSize:24upx" placeholder="请输入您的支付宝账号，手机号或邮箱" v-model="alipayCode" />
		</view>
		<view class="getmoney-verify">
			<VPhone ref="VPhone"  :alipayCode='alipayCode' :loginText="'绑定'" :type="3" phoneText="暂未绑定手机,请输入手机号" :loginBefore="loginBefore" :loginCB="loginCB">
				<view>
					<input class="VPhone-input alipayName" placeholder-style="fontSize:24upx" placeholder="请输入您的支付宝姓名(选填)" v-model="alipayName" />
				</view>
			</VPhone>
		</view>
		
	</view>
</template>

<script>
	import VPhone from "@/components/VPhone"
	export default {
		components: {
			VPhone
		},
		data() {
			return {
				alipayCode:'',
				alipayName:''
			}
		},
		created() {
			

		},
		mounted() {
			console.log(this.$store.getters.userInfo);


		},
		methods: {

			loginBefore() {
				return true
			},
			loginCB(code) {
				this.$api.bindOrModifyAlipayAccount({
					alipayAccount: this.alipayCode,
					code: code,
					realName:this.alipayName
					
				})
				.then(res => {
					this.$toast("绑定成功")
					setTimeout(() => {
						uni.navigateTo({
							url: '/pages/earning/getMoney'
						});
					}, 1000)
				}).catch(err => {
					this.$toast("绑定失败")
				})
			}
		},
		watch: {

		},
	}
</script>

<style lang="scss">
	.VPhone-phone {
		display: flex;
		align-items: center;
		padding: 0 48upx;
		height: 123upx;
		}
		.VPhone-icon {
			width: 36upx;
			height: 36upx;
		}
		
		.VPhone-name {
			width: 200upx;
			font-size: 28upx;
			margin-left: 40upx;
		}
		
		.VPhone-input {
			width: 500upx;
			margin: 0 0 40upx 124upx;
		}
		.getmoney-num{
			border-bottom: 20upx solid #f5f5f5;
			border-top: 20upx solid #f5f5f5;
			}
		.alipayName{
			margin: 20upx 48upx;
			width: 710upx;
		}
		

	
</style>

<!-- 提现 -->
<template>
	<view class="getmoney" :class="{bodyLoading:showLoading}">
		<view class="getmoney-num">
			<image class="getmoney-num-icon" src="/static/earning/money.png"></image>
			<!-- pattern="[0-9]*" 由于uni封装了 这个就无效了 -->
			<input class="getmoney-num-input" type="number" :placeholder="placeholder" v-model="money" />
			<view class="getmoney-num-all" @click="allMoney">全部</view>
			<view class="getmoney-num-tips">每笔提现最低额度{{minimum}}元</view>
		</view>
		<view class="getmoney-verify">
			<VPhone ref="VPhone"  :type='1' loginText="提现" :repeat='repeat' phoneText="暂未绑定手机,请输入手机号" :loginBefore="loginBefore" :loginCB="loginCB">
				<VPay :alipayAccount='alipayAccount'></VPay>
			</VPhone>
		</view>
	</view>
</template>

<script>
	import VPhone from "@/components/VPhone"
	import VPay from "@/components/VPay"
	export default {
		components: {
			VPhone,
			VPay
		},
		data() {
			return {
				money: '',
				userInfo: this.$store.getters.userInfo,
				userMoney: -1,
				minimum: 10,
				showLoading: true,
				placeholder:`可提现金额999元`,
				alipayAccount:"",
				repeat:true,
				type:1 //1是现金余额，2是红包余额
			}
		},
		created() {

		},
		onLoad(options) {
			this.type=options.type?options.type:1;
		},
		async mounted() {
			if (!this.$commonLogic.verifyLogin()) {
				return
			}

			await Promise.all([this.getMinimum(), this.getUserMoney()])
			this.showLoading = false
			this.placeholder = `可提现金额${this.userMoney}元`
			this.$refs.VPhone.phone = this.userInfo.phone || ''


		},
		methods: {
			// 获取最低提现额度
			async getMinimum() {
				this.minimum = +(await this.$api.getByType({
					configEnum: 'MINIMUM_WITHDRAWAL_AMOUNT'
				})).data[0].configVal
				
			},
			async getUserMoney() {
				let res=await this.$api.getWithdrawDepositVo({
					withdrawalType:this.type
				});
				
				this.userMoney = res.data.balance
				this.alipayAccount=res.data.alipayAccount;
			},
			loginBefore() {
				if (!this.money) {
					this.$toast("请输入金额")
					return false
				}
				if (this.money > this.userMoney) {
					this.$toast("超过了可用金额")
					this.money = ''
					return false
				}
				if (this.money < this.minimum) {
					this.$toast(`每笔提现最低额度${this.minimum}元`)
					this.money = ''
					return false
				}
				return true
			},
			loginCB(code) {
				this.repeat=false
				if(!this.alipayAccount){
					this.$toast("请先绑定支付宝账号")
					return
				}
				this.$api.doWithdrawDeposit({
					amount: this.money,
					verifCode: code,
					gatheringWay:2,
					withdrawalType:this.type
				}).then(res => {
					this.$toast("提现成功")
					setTimeout(() => {
						uni.navigateTo({
							url: `/pages/earning/getMoneyResult?type=${this.type}`
						});
						this.repeat=true;
					}, 1000)
				}).catch(err => {
					this.$toast("提现失败")
				})

			},
			allMoney() {
				this.money = this.userMoney
			}

		},
		watch: {

		},
	}
</script>

<style lang="scss">
	.getmoney {

		.getmoney-num {
			display: flex;
			flex-wrap: wrap;
			height: 200upx;
			padding: 30upx 44upx 20upx;
			border-top: 20upx solid #f5f5f5;
			background: #fff;

			.getmoney-num-icon {
				width: 41upx;
				height: 52upx;
			}

			.getmoney-num-input {
				width: 400upx;
				height: 50upx;
				line-height: 50upx;
				margin-left: 36upx;
			}

			.getmoney-num-all {
				@include allCenter;
				width: 100upx;
				height: 50upx;
				color: #E1472E;
				margin-left: auto;
				font-size: 28upx;
				font-weight: bold;
			}

			.getmoney-num-tips {
				width: 100%;
				margin-left: 78upx;
				color: #E1472E;
				font-size: 22upx;
			}
		}

		.getmoney-verify {
			border-top: 20upx solid #f5f5f5;


		}


	}
</style>
<!-- 提现结果页面 -->
<template>
	<view class="getMoneyResult">
		<view class="getMoneyResult-title">发起提现申请成功！</view>
		<image class="getMoneyResult-img" :src="dataBox.imageUrl||'/static/earning/qrcode.jpg'"></image>
		<view class="getMoneyResult-tips">{{dataBox.configVal ||'微信搜索添加 省钱达人'}}</br></view>
		<!-- <navigator class="getMoneyResult-btn" url="/pages/earning/earning">确定</navigator> -->
		<view class="getMoneyResult-btn" @click="jump">确定</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				dataBox: {},
				type:1
			}
		},
		onLoad(options) {
			this.init()
			this.type=options.type?options.type:1;
		},
		methods: {
			async init() {
				let res = (await this.$api.getByType({
					configEnum: 'WITHDRAW_QR_CODE'
				})).data[0]
				this.dataBox = res
			},
			jump(){
				if(this.type==2){
					uni.switchTab({
						url:'/pages/user/user'
					})
				}else{
					uni.navigateTo({
						url:'/pages/earning/earning'
					})
					
				}
				
			}
		}
	}
</script>

<style lang="scss">
	.getMoneyResult {
		text-align: center;
		// border-top: 20upx solid #f5f5f5;

		.getMoneyResult-title {
			font-size: 34upx;
			margin-top: 80upx;
		}

		.getMoneyResult-img {
			width: 210upx;
			height: 210upx;
			margin: 40upx auto;
		}

		.getMoneyResult-tips {
			font-size: 28upx;
			color: #666;
		}

		.getMoneyResult-btn {
			@include allCenter;
			@include active;
			width: 680upx;
			height: 98upx;
			margin: 60upx auto;
			background: #54A0FF;
			border-radius: 10upx;
			font-size: 34upx;
			color: #fff;
			overflow: hidden;

		}


	}
</style>
<template>
	<view class='alipay'>
		<img src="../../static/forIos/bg.jpg" alt="">
		<view class='btn btn-copy'  v-clipboard:copy="tMCode" v-clipboard:success="onCopy" v-clipboard:error="onError1"></view>
		<view class='btn btn-jump'  @click='jump'><a href="alipays://platformapi/startApp"></a></view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				tMCode:'587731010'
			}
		},
		onLoad(){
			
		},
		methods: {
			onCopy() {
				this.$toast("复制口令成功");
			},
			onError1: function(e) {
				this.$toast("复制口令失败，请稍后再试");
			},
			jump(){
				window.location.href = ''
			}
		}
	}
</script>

<style scoped lang='scss'>
	.alipay{
		position: absolute;
		top: 0;
		bottom: 0;
		background-color: #0185e7
	}
	.btn{
		position: absolute;
		top: 380upx;
		left: 120upx;
		/* border: 1px solid blue; */
		width: 260upx;
		height: 100upx;
	}
	.btn-jump{
		left: 380upx;
		a{
			width: 100%;
			height: 100%;
			display: block;
		}
	}

</style>

<template><!-- 双十一活动页面 -->

	<view class='activeTeen'>
		<VScroll v-if='data'  @scrollToEnd="inint" :vScrollData="data" pullup>
			<view >
				<image class='banner' src='/static/forIos/banner.png'></image>
				<view class='item' v-for="(item,index) in data" :key='index'  @click="jump(item.numIid,item.taobaoAuth,item.itemtitle,item.code)">
				<view class='top'>
				<view class='left'>
					<image class='left-img' :src='item.itempic'></image>
					
				</view>
				<view class='right'>
					<view class='detail-desc'>
						<view class='comeFrom icon-taobao' v-if='item.shoptype=="C"'></view>
						<view class='comeFrom icon-tianmao' v-if='item.shoptype=="B"'></view>
						<!-- <view class='comeFrom icon-pidd' v-if='productData.userType==3'></view> -->
						<view class="title">{{item.itemtitle}}</view>
					</view>
					<view class='dec'>
						{{item.itemdesc}}
					</view>
					<view class='juan'>
						<view class='juan-l'>劵后 <text class='price'>{{item.itemendprice}}</text></view>
						<view class='juan-r'>
							<text class='rk'>尾款可用劵</text>
							<text class='rv'>{{item.couponmoney }}元</text>
						</view>
					</view>
					<view class='juan juan-p'>
						<view class='juan-l'>返现 <text class='price price1'>{{item.returnMoney}}</text></view>
						<view class='juan-r'>
							<text class='deposit'>定金{{item.deposit}}元</text>
						</view>
					</view>
					
				</view>
				</view>
				<view class='bottom'>
					<text class='title'>{{item.shopname}}</text>
					<view class='btn' >
						<text class='left'>{{item.itemsale2}}</text>
					<!-- 	<text class='icon'></text> -->
						<text class='right1'>{{item.presaleDiscountFeeText}}</text>
					</view>
				</view>
			</view>
			<uniLoadMore :status="loadingType" v-if='data.length>0'></uniLoadMore>
			</view>
		</VScroll>
		<!-- 弹窗二 -->
		<view class='copyPop' v-if='isShow'>
			<view class='pop-mask' @click='close'></view>
			<view class='content'>
				<view class='top'>
					淘口令购买
					<img src="/static/common/icon-delect.png" alt="" @click='close'>
				</view>
				<view class='middle'>{{code}}</view>
				<view class='btn btn-copy' @click="jumpH()">复制</view>
				<view class='detail'>
		             点击复制后，打开手机淘宝！
				</view>
			</view>
		</view>
	</view>
</template>

<script>
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	import {
		sending
	} from '@/common/bridge'
	export default {
		data() {
			return {
				userId:'',
				data:'',
				type:'',
				numIid:'',
				code:'',
				isSq:"",
				showLoading: true,
				page:1,
				loadingType:'more',
				itemtitle:'',
				isShow:false
			}
		},
		onLoad(options) {
			this.userId=options.userId?options.userId:'';
			this.type=options.type;
			this.inint();
		},
		components: {
			uniLoadMore
		},
		methods: {
			
			async inint() {
				if (this.loadingType === 'loading' || this.loadingType === 'noMore') {
					return;
				}
				
				this.loadingType = 'loading';
				let res = await this.$api.getD11ProductList({
					userId: this.userId,
					page:this.page,
					pageSize:10
				});
				if (res.data) {
					if (this.page == 1) {
						this.data = res.data
					} else {
						this.data = this.data.concat(res.data)
					}
					if(res.data.length<this.page){
						this.loadingType = 'noMore';
					}else{
						this.loadingType = 'more';
					}
					this.page++;
				} else {
					this.loadingType = 'noMore';
				}
				
				if(this.page==1){
					let that=this;
						that.showLoading=false;
				}
				

			},
			async getCode(){
				 let that=this;//h5
				let userId=this.userId?this.userId:''
				let res = await this.$api.createTaoKoulingTwoInOne({
					userId: userId,
					numIid:this.numIid,
					text:this.itemtitle||''
					
				})
				that.code=res.data.kouling;
				that.go();
			},
			jump(id,taobaoAuth,itemtitle){
				
				this.numIid=id;
				this.isSq=taobaoAuth;
				this.itemtitle=itemtitle;
				this.getCode();
			},
			go(){
				if(this.type=='ios'&&this.userId){//ios登录情况，有口令
					let obj={
						type:5,
						code:`${this.code}`,
						isSq:this.isSq
					}
					console.log(obj)
					sending(obj)
					return;
				}
				this.isShow=true;
			},
			jumpH(){
				let that=this;//h5
				this.$copyText(that.code).then(function(e){
					that.$toast('复制成功')
					setTimeout(function() {
						window.open('taobao://')
					}, 300);
				},function(err){
					that.$toast('复制失败')
				})
			},
			close(){
				this.isShow=false;
			}

		}
	}
</script>

<style scoped lang='scss'>
	.activeTeen {
		
		.banner {
			width: 720upx;
			height: 310upx;
			border-radius: 14upx;
			
		}

		.item {
			/* flex: 0 0 40%; */
			height: 360upx;
			background: rgba(255, 255, 255, 1);
			box-shadow: 0px 6upx 8upx 0upx rgba(149, 149, 149, 0.06);
			border-radius: 14upx;
			margin-top:28upx;
			.top{
				display: flex;
				justify-content: space-between;
			}

			.left {
				.left-img {
					width: 268upx;
					height: 267upx;
					margin-bottom: 20upx;
				}

				.title {
					color: rgba(169, 169, 169, 1);
					line-height: 30upx;
				}
			}

			.right {
				flex:0 0 60%;
				padding-left:22upx;
				.dec{
					font-size:20upx;
					overflow: hidden;
					-o-text-overflow: ellipsis;
					text-overflow: ellipsis;
					display: -webkit-box;
					-webkit-line-clamp: 3;
					-webkit-box-orient: vertical;
					margin-bottom: 19upx;
					color:rgba(169,169,169,1);
				}
				.juan{
					display:flex;
					align-items: center;
					margin-bottom:8upx;
					.juan-l{
						display:flex;
						align-items: center;
						font-size:22upx;
						flex:0 0 40%;
						color:rgba(169,169,169,1);
						padding-right:10upx;
						.price{
							font-size:26upx;
							font-weight:700;
							color:rgba(255,68,51,1);
							padding-left:10upx;
						}
					}
					
				}
				.juan-r{
					display:flex;
					align-items: center;
					justify-content: flex-end;
					flex:0 0 60%;
					font-size:22upx;
					color:rgba(255,255,255,1);
					.rk{
						/* width:132upx;
						height:34upx */
						padding:4upx 10upx ;
						background:rgba(247,46,28,1);
						border-radius:4upx 0upx 0upx 4upx;
						text-align: center;
					}
					.rv{
						padding: 4upx 12upx;
						background:linear-gradient(-34deg,rgba(228,166,96,1) 0%,rgba(234,188,134,1) 100%);
						border-radius:0upx 4upx 4upx 0upx;
					}
				}
				.juan-p{
					.price{
						color:rgba(67,67,67,1);
					}
					.deposit{
						font-size:20upx;
						color:rgba(228,166,96,1);
						padding: 1upx 11upx;
						border:2upx solid;
						border-radius:4upx;
						
						}
						
				}
			}
		}
	
		.detail-desc {
			position: relative;
		
			.comeFrom {
				width: 30upx;
				height: 30upx;
				margin-right: 18upx;
				position: absolute;
				top: 2upx;
				left: 0;
			}
		
			.icon-taobao {
				background: url(/static/index/icon-taobao.png) no-repeat;
				background-size: 100%;
			}
		
			.icon-tianmao {
				background: url(/static/index/icon-tianmao.png) no-repeat;
				background-size: 100%;
			}
		
			.icon-pidd {
				background: url(/static/index/icon-pidd.png) no-repeat;
				background-size: 100%;
			}
		
			.title {
				font-size: 13px;
				font-weight: bold;
				color: rgba(51, 51, 51, 1);
				overflow: hidden;
				-o-text-overflow: ellipsis;
				text-overflow: ellipsis;
				display: -webkit-box;
				-webkit-line-clamp: 2;
				-webkit-box-orient: vertical;
				margin: 0 0 5px;
				text-indent: 22px;
				width: 100%;
			}
		}
		.bottom{
			display: flex;
			align-items: center;
			justify-content: space-between;
			.title{
			
				text-align: center;;
				flex:0 0 30%;
				font-size:20upx;
				color:rgba(169,169,169,1);
				white-space: nowrap;
				text-overflow: ellipsis;
				overflow: hidden;
				
			}
			.btn{
				/* flex:0 0 75%; */
				display: flex;
				align-items: center;
				/* background:url(../../static/forIos/dot_btn.png) no-repeat;
				background-size:100% 100%; */
				height: 40upx;
				text-align:right;
				
				
				.left{
					/* flex: 0 0 60%; */
					padding:4upx 18upx;
					font-size:22upx;
					font-weight:bold;
					color:rgba(214,138,51,1);
					text-align: right;
					 background:rgba(250,232,211,1);
					 border-radius:20upx 0 0 20upx;
				}
				.right1{
					/* flex: 0 0 40%; */
					font-size:22upx;
					font-weight:400;
					color:rgba(255,255,255,1);
					background: #f72e1c;
					border-radius:0 20upx 20upx 0;
					padding:4upx 18upx;
					/* padding-left: 40upx; */
				}
			}
		}
	}
	.VScroll{
	    position: absolute;
	    top: 20upx;
	    bottom: 0;
	    left: 0;
	    right: 0;
	    overflow: hidden;
		padding: 50upx 20upx 0 15upx;
		
	}
	.copyPop{
		.pop-mask{
			position: fixed;
			z-index: 999;
			top: 0;
			right: 0;
			left: 0;
			bottom: 0;
			background: rgba(0,0,0,.6);
		}
		.content{
			    position: fixed;
				z-index: 999;
				width: 550upx;
				top: 50%;
				left: 50%;
				height: 440upx;
				-webkit-transform: translate(-50%,-50%);
				transform: translate(-50%,-50%);
				background-color: #fff;
				text-align: center;
				border-radius:10upx;
				overflow: hidden;
				.top{
					height:88upx;
					line-height: 88upx;
					background:rgba(255,67,36,1);
					font-size:32upx;
					color:rgba(255,255,255,1);
					text-align: center;
					position: relative;
					display: inline-block;
					width: 100%;
					img{
						padding: 29upx 10upx;
						width:50upx;
						height:88upx;
						position: absolute;
						top: 0;
						right: 0;
						margin-right: 12px;
					}
				}
				.middle{
					width:380upx;
					height:84upx;
					background:rgba(233,233,233,1);
					margin:56upx auto 33upx;
					font-size:36upx;
					font-weight:bold;
					color:rgba(51,51,51,1);
					line-height:84upx;
					overflow: hidden;
					text-overflow: ellipsis;
					padding: 0 10upx;
				}
				.btn-copy{
					width:340upx;
					height:84upx;
					background:rgba(255,67,36,1);
					border-radius:80upx;
					font-size:36upx;
					font-weight:bold;
					color:rgba(255,255,255,1);
					line-height:84upx;
					margin:0 auto 34upx;
				}
				.detail{
					width:394upx;
					height:49upx;
					font-size:22upx;
					color:rgba(102,102,102,1);
					margin:0 auto;
				}
		}
		}
		.bottom .icon{
			width: 16upx;
			/* background-image:url(../../static/forIos/middleT.png); */
			background-size: 100%;
			background-repeat: no-repeat;
			font-size:22upx;
			font-weight:400;
			padding:8upx 18upx;
			
		}
	.activeTeen .item .right .juan .juan-l  .price1{
		color: rgba(67,67,67,1);
	}

</style><template><!-- 双十一活动页面 -->
	<view class='doubleT'>
		<image class='bg' :src='data.bigImageUrl'></image>
		<view class='btn' @click="jump">
			<image :src='data.otherImageUrl' class='btn-tra'></image>
		</view>
		<img v-if='type!="ios"' class='mask' src="/static/forIos/mask.png" alt="">
	</view>
</template>

<script>
	import { sending } from '@/common/bridge'
	export default {
		data() {
			return {
				id:'',
				data:'',
				type:'',
				code:''
			}
		},
		onLoad(options){
			this.id=options.id;
			this.type=options.type;
			this.inint();
			
		},
		methods: {
			async inint(){
				let res = await this.$api.dobolT({
					id:this.id
				});
				this.data=res.data;
				this.code=eval('(' + res.data.title + ')');
			
			},
			jump(){
				if(this.type=='ios'){
					let obj={
						type:3,
						form:1,//1.taobao,2.weixin 
						code:this.code.ios
					}
					sending(obj)
					return
				}
				let that=this;
				this.$copyText(this.code.h5).then(function(){
					that.$toast('复制成功')
					setTimeout(function() {
						window.open('taobao://')
					}, 300);
				},function(){
					that.$toast('复制失败，请稍后重试')
				})
			}
		}
	}
</script>

<style scoped lang='scss'>
	.doubleT{
		position:absolute;
		left:0;
		top:0;
		right:0;
		overflow: hidden;
		bottom:0;
		.bg{
			width: 100%;
			height: 100%;
		}
		.btn{
			position: absolute;
			bottom: 30%;
			left:0;
			width:100%;
			height: 140upx;
			padding: 20upx 0;
			text-align: center;
		}
		.btn-tra{
			width: 306upx;
			height: 86upx;
			animation: free_down 2s linear alternate infinite;
			-webkit-animation: free_down 2s linear alternate infinite;
			   
		}
		
		@keyframes free_down{
			0%{
				transform: scale(1);
			}
			25%{
				transform: scale(1.3);
			}
			50%{
				transform: scale(1);
			}
			75%{
				transform: scale(1.3);
			}
		}
		
		@-webkit-keyframes free_down{
			0%{
				transform: scale(1);
			}
			25%{
				transform: scale(1.3);
			}
			50%{
				transform: scale(1);
			}
			75%{
				transform: scale(1.3);
			}
		}
	}
	.mask{
		position: fixed;
		bottom: 20%;
		left: 0;
		width: 100%;
	}

</style>

<template>
	<view class='downLoadApp'>
		<img src="../../static/forIos/dla_t.png" class='title' alt="">
		<img src="../../static/forIos/dla_bg.png" class='bg' alt="">
		<view class='btn btn-more' @click="jump"></view>
		<view class='btn btn-download' @click='download'>
			
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				
				
			}
		},
		methods: {
			jump(){
				uni.switchTab({
					url: '/pages/index/index'
				});
			},
			download(){
				let url='https://a.app.qq.com/o/simple.jsp?pkgname=com.wcl.tdd'
				window.open(url)
				
			}
		}
	}
</script>

<style lang="scss">
	.downLoadApp{
		position: relative;
		.title{
			position: fixed;
			top: 0;
			width: 100%;
		}
		.bg{
			margin-top: 84upx;
		}
		.btn-download{
			position: fixed;
			width: 184upx;
			height: 80upx;
			right: 14upx;
			top: 2upx;
		}
	}
	.btn{
		// border: 1px solid blue;
	}
	.btn-more{
		width: 350upx;
		height: 100upx;
		position: fixed;
		left: 200upx;
		bottom: 36upx;
		background:url(../../static/forIos/dla_btn.png) no-repeat;
		background-size: 100%;
	}
	
</style>
<template><!-- 双十一邀请好友页面  -->
	<view class='doubleTInvite'>
		<image class='bg' src="/static/forIos/doubltInvite-bg1.jpg" mode=""></image>
		<view class='btn btn-invite' @click='invite'></view>
		<view class='btn btn-copy' @click='copy'></view>
	</view>
</template>

<script>
	import { sending } from '@/common/bridge'
	export default {
		data() {
			return {
				
			}
		},
		onLoad(options){
			
		},
		methods: {
			invite(){
				let obj={
					type:2
				}
				sending(obj)
			},
			copy(){
				let obj={
					type:3,
					form:2,//1.taobao,2.weixin 
					code:'taoduoduo269'
				}
				sending(obj)
			}
			
		}
	}
</script>

<style scoped lang='scss'>
	.doubleTInvite{
		position: fixed;
		top:0 ;
		left: 0;
		right: 0;
		bottom: 0;
		.bg{
			width: 100%;
			height: 100%;
		}
		.btn{
			/* border: 1px solid red; */
			position: absolute;
			width: 100%;
			height: 140upx;
		}
		.btn-invite{
			top: 36%;
		}
		.btn-copy{
			bottom: 0;
		}
	}

</style>

<template>
	<view class='fansOrder'>
		<view class='content' >
				<view class='item' v-for='(item,index) in list' :key='index'>
					<img :src="item.imageUrl" alt="">
					<view class='btn-group' v-if='item.numIid&&item.numIid.isShow'>
						<view class='btn btn-jump' v-for='(item1,index1) in item.numIid.arr' :style="{top:''+item1.top+'upx',left:''+item1.left+'upx'}" @click='jump(item.clickUrl)'></view>
					</view>
				</view>
				
		</view>
	</view>
</template>

<script>
	import { sending } from '@/common/bridge'
	import {
		host_iWantUp
	} from '@/common/config'
	export default {
		data() {
			return {
				list:'',
				userId:'',
				type:''
			}
		},
		onLoad(options){
			console.log(22,options);
			this.userId=options.userId;
			this.type=options.type;
			this.init()
			
		},
		methods: {
			async init(){
				let res = await this.$api.getPromotionPageInfo({
					userId:this.userId
				});
				let that=this;
				that.list=res.data.reduce((arr,item,index)=>{
					if(item.numIid){
						item.numIid=that.parsing(item.numIid)
						item.numIid=that.parsing(item.numIid)
					}
					arr.push(item)
					return arr;
				},[])
				console.log(this.list)
				
			},
			parsing(params){
				return JSON.parse(params)
				
			},
			jump(clickUrl){
				if(clickUrl==1){
					let obj={
						type:'2',//立即邀请
					}
					if(this.type=='android'){
						
						jsActivity.onCall(JSON.stringify(obj))
						return
					}
					sending(obj)
				}else if(clickUrl==2){
					//配合ios
					let url=`${host_iWantUp}/pages/forIos/promote?userId=${this.userId}`
					
					if(this.type=='android'){
						url=`http:${url}`
						jsActivity.onProfit(url)
						return
					}
					location.href=url;
				}else if(clickUrl==3){
						let url=`${host_iWantUp}/pages/cashBonus/upGradeDelegat?userId=${this.userId}&type=${this.type}`
						location.href=url;
						
				}
				
			}
			
		}
	}
</script>

<style lang="scss">
	.item{
		position: relative
	}
	.btn-jump{
		// border: 1px solid red;
		width: 750upx;
		height: 100upx;
		position: absolute;
		z-index: 99;
		
	}

</style>
<template><!-- 双十一邀请好友页面  -->
	<view class='doubleTInvite'>
		<image class='bg' src="/static/forIos/doubltInvite-bg1.jpg" mode=""></image>
		<view class='btn btn-invite' @click='invite'></view>
		<view class='btn btn-copy' @click='copy'></view>
	</view>
</template>

<script>
	import { sending } from '@/common/bridge'
	export default {
		data() {
			return {
				type:''
			}
		},
		onLoad(options){
			this.type=options.type;
		},
		methods: {
			invite(){
				let obj={
					type:2
				}
				if(this.type=='android'){
					jsActivity.onCall(JSON.stringify(obj))
					return
				}
				sending(obj)
			},
			copy(){
				let obj={
					type:3,
					form:2,//1.taobao,2.weixin 
					code:'taoduoduo269'
				}
				if(this.type=='android'){
					jsActivity.onCall(JSON.stringify(obj))
					return
				}
				sending(obj)
			}
			
		}
	}
</script>

<style scoped lang='scss'>
	.doubleTInvite{
		position: fixed;
		top:0 ;
		left: 0;
		right: 0;
		bottom: 0;
		.bg{
			width: 100%;
			height: 100%;
		}
		.btn{
			/* border: 1px solid red; */
			position: absolute;
			width: 100%;
			height: 140upx;
		}
		.btn-invite{
			top: 36%;
		}
		.btn-copy{
			bottom: 0;
		}
	}

</style>

<template>
	<view class='newVersion'>
		<view class='title'>
			在应用商店下载“淘多多”APP
		</view>
		<view class='logo'>
			<img src="../../static/forIos/logo.png" alt="">
			<view>
				<view class='logoName'>淘多多</view>
				<view class='btn btn-copy' v-clipboard:copy="wxCode"
							  v-clipboard:success="onCopy1"
							  v-clipboard:error="onError1">
					复制APP名称
				</view>
			</view>
		</view>
		<view class='middle item'>
			<view class='vt'>当前版本号:</view>
			<view class='va'>
				苹果ios：2.1.0    
			</view>
			<view class='va'>
				安卓Android 2.0.2 
			</view>
		</view>
		<view class='middle item'>
			<view class='vt'>新版福利来袭:</view>
			<view class='va'>
				邀请3位好友下单免费升级合伙人！ 
			</view>
		</view>
		<view class='middle item'>
			<view class='vt'>本次更新内容:</view>
			<view class='va'>
				 分享：新增【今日推荐】【品牌榜】
			</view>
			<view class='va'>
				 提现：优化支付宝提现可绑定邮箱账号
			</view>
			<view class='code'>
				<img src="../../static/forIos/code.png" alt="">
				<view>扫描二维码下载 </view>
			</view>
			
		</view>
		<view class='bottom item'>
			<view class='vt'>温馨提示:</view>
			<view class='va'>
                    应用商店有同名APP，大家下载全新版本的认准 <text class='cr'>淘多多</text>的图标
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				wxCode:'淘多多'
			}
		},
		methods: {
			onCopy1(){
				this.$toast("复制成功");
			},
			onError1(){
				this.$toast("复制失败");
			}
			
		}
	}
</script>

<style lang="scss">
	.newVersion{
		padding: 28upx 40upx;
		font-size: 28upx;
		.name{
			font-weight: 700;
			font-size: 30upx;
			color:#bf3627;
		}
		.btn-copy{
			padding: 10upx 20upx;
			display: inline-block;
			border-radius: 20upx;
			font-size: 26upx;
			background-color: #ff4324;;
			color: #ffffff;
			margin-top: 40upx;
			}
		.middle{
			
		}
		.item{
			margin-bottom:20upx;
			line-height: 40upx;
		}
		.vt{
			font-weight: 700;
			margin-bottom: 14upx;
			
		}
		.va{
			margin-top: 2upx;
			padding-left: 10upx;
			color:rgba(25,25,25,1);
			font-size: 24upx;
			font-weight:400;
		}
		.bottom{
			// margin-top: 80upx;
		}
		.cr{
			color: #E12E2E;
		}
		.title{
			text-align: center;
			font-size: 30upx;
			font-weight: 700;
		}
	}
	.logo{
		display: flex;
		align-items: center;
		margin:40upx 0 48upx;
		img{
			width:153upx;
			height: 153upx;
			margin-right: 30upx;
		}
		.logoName{
			font-size:50upx;
			font-weight:bold;
			color:rgba(25,25,25,1);
		}
	}
	.code{
		text-align: center;
		font-size:24upx;
		font-weight:400;
		color:rgba(152,152,152,1);
		margin:48upx 60upx;
		img{
			width: 308upx;
			height: 308upx;
			margin:0 auto 15upx;
		}
	}
</style>
<!-- 首页的按钮导航点击后的页面，如9.9、海淘购-->
<template>
	<view class="buttonNav" :class="{noTab:noTab}">
		<view class="buttonNav-head">
			<view class="head-back" @click="goBack">
				<image src="/static/common/arrow.png" mode="widthFix"></image>
			</view>
			<view class="head-text">{{buttonList[buttonIndex].text}}</view>
		</view>
		<VTabhead v-if="!noTab" ref="VTabhead" @changeTab="changeTab" :VTabhead_act="VTabhead_act" :VTabhead_list="VTabhead_list"></VTabhead>
		<VScroll ref="VScroll" pullup @scrollToEnd="loadMore" :vScrollData="goodsList[VTabhead_act]">
			<VGoods class="VGoods" :goodsList="goodsList[VTabhead_act]" :type="2"></VGoods>
			<uniLoadMore :status="VTabhead_list[VTabhead_act].loadingType"></uniLoadMore>
		</VScroll>
	</view>
</template>

<script>
	import VTabhead from "@/components/VTabhead"
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	export default {
		components: {
			VTabhead,
			uniLoadMore
		},
		data() {
			return {
				headText: '海淘购',
				goodsList: [
					[]
				],
				// 头部选中的index
				VTabhead_act: 0,
				// 选项卡头部列表;sort:true为升序（由小到大_asc）、false为降序（由大到小_des）；loadingType：三种状态more、loading、nomore
				VTabhead_list: [{
						text: '推荐',
						loadingType: 'more',
						pageNum: 1,
						sort: true,
						dataList: []
					},
					{
						text: '券后价',
						loadingType: 'more',
						pageNum: 1,
						sort: true,
						dataList: []
					},
					{
						text: '销量',
						loadingType: 'more',
						pageNum: 1,
						sort: false,
						dataList: []
					},
				],
				goodsList_params: {
					sort: '',
					pageNum: 1,
					pageSize: 10
				},
				buttonIndex: 1,
				buttonList: {
					1: {
						text: '超值9.9',
						ajax: 'ninePiecesOfNineList'
					},
					2: {
						text: '淘抢购',
						ajax: 'getTqgList'
					},
					4: {
						text: '天猫',
						ajax: 'getTianMaoList'
					},
					10: {
						text: '今日热销榜单',
						ajax: 'getTodayHotSale'
					},
					77: {
						text: '拼多多',
						ajax: 'getPddTopGoods'
					}
				},
				// 没有顶部tab栏
				noTab: false
			}
		},
		props: {

		},
		onLoad(e) {
			// buttonInde为按钮的id，1是超值9.9，2是淘抢购，4是天猫
			this.buttonIndex = e.buttonIndex || 1;
			// 如果没有这个角标则默认给1
			if (!this.buttonList[this.buttonIndex]) {
				this.buttonIndex = 1
			}
			// buttonIndex为2 即淘抢购时没有tab
			// 后加10（今日热卖）也没有，拼多多也没有
			this.noTab = [2, 10, 77].includes(+this.buttonIndex) ? true : false

		},
		mounted(e) {
			this.loadData()
		},

		methods: {

			loadData() {

				return new Promise(async (resolve, reject) => {
					this.setParams()
					let VTabhead_item = this.VTabhead_list[this.VTabhead_act]
					//如果是正在加载或是没有更多了则不再请求
					if (VTabhead_item.loadingType === 'loading' || VTabhead_item.loadingType === 'noMore') {
						//防止重复加载
						return;
					}

					VTabhead_item.loadingType = 'loading';
					let ajax = this.buttonList[this.buttonIndex].ajax
					let goodsList = (await this.$api[ajax](this.goodsList_params)).data
					if (!this.goodsList[this.VTabhead_act]) {
						this.$set(this.goodsList, this.VTabhead_act, [])
					}
					//判断是否还有数据， 有改为 more， 没有改为noMore ；
					// 来自淘宝的接口可能出现某一页数量不足了，但下一页还有数据的情况，故只按照有没有数据来判断
					if (!goodsList || !goodsList.length) {
						VTabhead_item.loadingType = 'noMore';
						return
					}
					this.goodsList[this.VTabhead_act].push(...goodsList)
					VTabhead_item.loadingType = 'more';
					VTabhead_item.pageNum++
					resolve()

				})


			},
			changeTab({
				index,
				VTabhead_list
			}) {
				if (this.VTabhead_act == index && index == 0) {
					return
				}
				// 滚动到顶部
				this.$refs.VScroll.scrollTo(0, 20)
				//点击已选中的选项时，切换排序，要将数据和page清空
				if (this.VTabhead_act == index) {
					this.$set(this.goodsList, index, [])
				}
				this.VTabhead_act = index;
				// 当这个选项没有数据或为空的时候才请求
				if (!this.goodsList[index] || this.goodsList[index].length == 0) {
					this.loadData()
				}

			},
			async loadMore() {

				await this.loadData()
				return this.goodsList[this.VTabhead_act]
			},
			setParams() {
				//拼多多特有的参数
				if (this.buttonIndex == 77) {
					this.$set(this.goodsList_params, 'sortType', 1)
				}

				let sort = this.VTabhead_list[this.VTabhead_act].sort
				let pageNum = this.VTabhead_list[this.VTabhead_act].pageNum
				if (this.VTabhead_act == 0) {
					this.$set(this.goodsList_params, 'sort', '')
				} else if (this.VTabhead_act == 1) {
					if (sort) {
						this.$set(this.goodsList_params, 'sort', 'price_asc')
					} else {
						this.$set(this.goodsList_params, 'sort', 'price_des')
					}

				} else if (this.VTabhead_act == 2) {
					if (sort) {
						this.$set(this.goodsList_params, 'sort', 'total_sales_asc')
					} else {
						this.$set(this.goodsList_params, 'sort', 'total_sales_des')
					}
				}
				this.$set(this.goodsList_params, 'pageNum', pageNum)
			},
			goBack() {
				uni.switchTab({
					url: '/pages/index/index',
				})
			}

		},

	}
</script>

<style lang="scss">
	.VScroll {
		top: calc(88upx + 90upx);
		bottom: 0;
	}

	.buttonNav {
		padding-top: 88upx;

		.VGoods {
			padding-top: 20upx;
		}

		&.noTab {
			.VScroll {
				top: 88upx;

			}


		}
	}

	.buttonNav-head {

		position: fixed;
		top: 0;
		left: 0;
		z-index: 998;
		display: flex;
		justify-content: space-between;
		width: 100%;
		height: 88upx;
		background: #BF3627;
		font-size: 32upx;
		color: #fff;

		.head-back {
			position: absolute;
			top: 0;
			left: 0;
			width: 60upx;
			height: 100%;
			padding-left: 30upx;
			display: flex;
			align-items: center;

			image {
				width: 18upx;
				height: 33upx;
			}
		}

		.head-text {
			@include allCenter;
			width: 100%;
		}
	}
</style>
<!-- 0元购的邀请注册页面 -->
<template>
	<view class="freeSignIn">
		<image class="f-header" src="/static/index/freeToBuy/header.png" mode="widthFix"></image>
		<view class="f-main">
			<!-- <view class="f-times">1</view> -->
			<view class="f-form">
				<!-- 要能tab切换 回车提交 -->
				<view class="ff-input">
					<view class="ffi-icon">
						<image src="/static/index/freeToBuy/signIn/phone.png" mode="widthFix"></image>
					</view>
					<input type="number" maxlength="11" placeholder="请输入手机号码" v-model="phone" />
				</view>
				<view class="ff-input">
					<view class="ffi-icon">
						<image src="/static/index/freeToBuy/signIn/imgCode.png" mode="widthFix"></image>
					</view>
					<input  maxlength="4" placeholder="请输入验证码" v-model="imgCode" />
					<img :src="imgUrl" alt="" @click='changeImgCode' class='imgCode'>
					<!-- <view v-if='!showCodeTime' class="ffi-getCode" @click="getCode">获取验证码</view>
					<view v-if='showCodeTime' class="ffi-getCode">{{countDown}}s后重发</view> -->
				</view>
				<view class="ff-input">
					<view class="ffi-icon">
						<image src="/static/index/freeToBuy/signIn/code.png" mode="widthFix"></image>
					</view>
					<input type="number" maxlength="6" placeholder="请输入验证码" v-model="code" />
					<view v-if='!showCodeTime' class="ffi-getCode" @click="getCode">获取验证码</view>
					<view v-if='showCodeTime' class="ffi-getCode">{{countDown}}s后重发</view>
				</view>
				<view class="ff-input">
					<view class="ffi-icon">
						<image src="/static/index/freeToBuy/signIn/invite.png" mode="widthFix"></image>
					</view>
					<input type="text" placeholder="可输入邀请码" v-model="inviteCode" />
				</view>
				<view class="ff-submit" @click="submit">登录/注册</view>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		components: {

		},
		data() {
			return {
				phone: '',
				code: '',
				inviteCode: '',
				countDown: 60,
				showCodeTime: false,
				isCanLogin: false,
				imgUrl:'',
				imgCode:'',
				random:''
			}
		},
		props: {
			propName: {
				type: Number,
				default: 0
			},
		},
		onLoad(params) {
			this.inviteCode = params.inviteCode || ''
			this.changeImgCode()
			console.log(this.inviteCode)
		},
		methods: {
			async getCode() { //获取验证码

				let status = this.$common.isPhoneNumber(this.phone);
				if(!status){
					this.$toast("请填写正确的手机号");
					return;
				}
				if(!this.$common.isImgCode(this.imgCode)){
					this.$toast("请填写正确的图形验证码");
					return;
				}
					let res = await this.$api.getCode({
						phone: this.phone,
						smsTypeEnum: 'PHONE_REGISTER_OR_LOGIN',
						random:this.random,
						code:this.imgCode
					})
					
					this.$toast("验证码发送成功");
					this.coutdown();

			},
			coutdown() { //倒计时
				this.showCodeTime = true;
				let timer = setInterval(() => {
					if (this.countDown == 1) {
						clearInterval(timer);
						this.showCodeTime = false;
					} else {
						this.countDown--;
					}
				}, 1000)
			},
			async submit() {

				let phoneStatus = this.$common.isPhoneNumber(this.phone);
				let codeStatus = this.$common.isCode(this.code);
				if (!phoneStatus) {
					this.$toast("请填写正确的手机号");
					return;
				}
				if (!codeStatus) {
					this.$toast("请填写正确的短信验证码");
					return;
				}
				

				let res = await this.$api.phoneRegisterLogin({
					phone: this.phone,
					verifCode: this.code,
					activateChannels: 'HTML5',
					byInvitationCode: this.inviteCode

				})
				this.$toast("登录成功");
				this.$store.dispatch('userInfo', res.data);
				setTimeout(() => {
					uni.navigateTo({
						url: '/pages/forIos/downLoadApp'
					});
				}, 1000)
			},
			changeImgCode(){
				let data=this.$common.getImgCode()
				this.imgUrl=data.imgUrl;
				this.random=data.random;
			}

		},
		watch: {
			phone(newValue, oldValue) {
				if (this.$common.isCode(this.code) && this.$common.isPhoneNumber(this.phone)) {
					this.isCanLogin = true
				}
			},
			code(newValue, oldValue) {
				if (this.$common.isCode(this.code) && this.$common.isPhoneNumber(this.phone)) {
					this.isCanLogin = true
				}
			}

		},
	}
</script>

<style lang="scss">
	image {
		width: 100%;
	}

	page {
		background: #F7302D;
	}
	.f-header{
		height: 680upx;
	}
	.f-main {
		position: relative;
		z-index: 2;
		height: 860upx;
		margin-top: -220upx;
		background: url(/static/index/freeToBuy/signIn/bg.png) no-repeat;
		background-size: 100%;
		font-size: 24upx;
		overflow: hidden;

		.f-times {
			@include allCenter;
			position: absolute;
			top: 50upx;
			right: 300upx;
			width: 70upx;
			height: 30upx;
			color: #fff;
			font-size: 38upx;
			font-weight: bold;
		}

		.f-form {
			width: 450upx;
			margin: 86upx auto 0;
		}

		.ff-input {
			display: flex;
			align-items: center;
			width: 450upx;
			height: 76upx;
			margin-top: 30upx;
			background: rgba(255, 255, 255, 1);
			border-radius: 38upx;

			.ffi-icon {
				@include allCenter;
				width: 92upx;
				height: 32upx;
				border-right: 2upx solid #999;

				image {
					width: 30upx;
					height: 30upx;
				}
			}

			input {
				flex: 1;
				height: 32upx;
				padding: 0 20upx;
				font-size: 26upx;
			}

			.ffi-getCode {
				@include allCenter;
				width: 160upx;
				height: 76upx;
				color: #fff;
				background: linear-gradient(0deg, rgba(31, 31, 31, 1), rgba(94, 94, 94, 1));
				border-radius: 0 38upx 38upx 0;
			}
		}

		.ff-submit {
			@include allCenter;
			@include active;
			width: 450upx;
			height: 82upx;
			margin: 50upx auto 0;
			border-radius: 41upx;
			background: url(/static/index/freeToBuy/signIn/btn.png) no-repeat;
			background-size: 100%;
			color: #fff;
			font-size: 30upx;
			font-weight: bold;
			overflow: hidden;
		}
		.imgCode{
			@include allCenter;
			width: 160upx;
			height: 76upx;
			color: #fff;
			border-radius: 0 38upx 38upx 0;
		}
	}
</style>
<!-- 0元购 -->
<template>
	<view class="freeToBuy">
		<image class="f-tips" src="/static/index/freeToBuy/tips.png" mode="widthFix" @click="showRule"></image>
		<image class="f-header" src="/static/index/freeToBuy/header.png" mode="widthFix"></image>
		<view class="f-chanceBox">
			<image class="f-chance" src="/static/index/freeToBuy/chance.png" mode="widthFix"></image>
			<view class="fc-times">{{chanceTimes}}</view>
			<view class="fc-get" @click="showShare"></view>
		</view>

		<VEmpty v-if="loadingType=='noMore'&&goodsList.length==0"></VEmpty>
		<!-- 商品列表 -->
		<view class="f-list">

			<view v-for="(item,index) of goodsList" :key="index" class="f-item" @click="clickGoods(item)">
				<view class="f-main">
					<image class="fi-img" :class="[item.loaded]" :src="item.pictUrl" @load="onImageLoad('goodsList', index)" @error="onImageError('goodsList', index)"
					 lazy-load></image>
					<view class="fi-right">
						<view class="fi-name">
							<image src="/static/index/icon-taobao.png"></image>
							{{item.title}}
						</view>
						<view class="fi-oldprice">￥{{item.reservePrice}}</view>
						<view class="fi-row">
							<view class="fi-newprice">￥{{item.zkFinalPrice}}</view>
							<view class="fi-subsidy">
								<image src="/static/index/freeToBuy/subsidy.png"></image>￥{{item.zkFinalPrice}}
							</view>
						</view>
					</view>
				</view>
			</view>


			<uniLoadMore v-if="loadingType!='noMore'" :status="loadingType" color="#fff"></uniLoadMore>
		</view>
		<view class="f-footer">活动最终解释权归淘多多所有</view>


		<!-- 分享弹窗 -->
		<popup-layer direction="top" v-model="share_show">
			<view class="f-share">
				<p>邀请好友，即可获得免单机会</p>
				<view class="fs-list">
					<view class="fs-item" @click="share(0)">
						<image src="/static/index/freeToBuy/share_wx.png" mode="widthFix"></image>
						<p>微信好友</p>
					</view>
					<view class="fs-item" @click="share(1)">
						<image src="/static/index/freeToBuy/share_qq.png" mode="widthFix"></image>
						<p>QQ好友</p>
					</view>
					<view class="fs-item" @click="share(2)">
						<image src="/static/index/freeToBuy/share_moments.png" mode="widthFix"></image>
						<p>朋友圈</p>
					</view>
				</view>
				<view class="fs-cancel" @click="closeShare">取消</view>
			</view>
		</popup-layer>


		<!-- 规则弹窗 -->
		<popup-layer direction="top" v-model="rule_show">
			<view class="f-rule">
				<image class="fr-header" src="/static/index/freeToBuy/rule.png" mode="widthFix"></image>
				<view class="fr-close" @click="closeRule"></view>
				<view class="fr-main">
					<VScroll>
						<freeToBuyRule></freeToBuyRule>
					</VScroll>
				</view>
			</view>
		</popup-layer>
	</view>
</template>

<script>
	import popupLayer from '@/components/popup-layer/popup-layer.vue';
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	import VEmpty from '@/components/VEmpty.vue';
	import freeToBuyRule from '@/pages/index/freeToBuyRule';
	export default {
		components: {
			popupLayer,
			uniLoadMore,
			VEmpty,
			freeToBuyRule
		},
		data() {
			return {
				userInfo: this.$store.getters.userInfo,
				goodsList: [],
				//机会次数
				chanceTimes: '',
				rule_show: false,
				share_show: false,
				loadingType: 'loading',
				// 邀请码
				inviteCode: ''
			}
		},
		props: {
			propName: {
				type: Number,
				default: 0
			},
		},
		async onLoad() {
			let res = (await this.$api.getZeroBuyList()).data
			this.loadingType = 'noMore'
			this.goodsList = res.zeroBuyVo
			this.chanceTimes = res.zeroBuyChance || 0

		},
		methods: {
			showRule() {
				this.rule_show = true
			},
			closeRule() {
				this.rule_show = false
			},
			async showShare() {
				if (!this.userInfo) {
					this.$toast('获取机会前请先登录')
					setTimeout(() => {
						this.$commonLogic.verifyLogin()
					}, 1000)

					return
				}

				this.inviteCode = this.userInfo.invitationCode || ''
				this.share_show = true
			},
			closeShare() {
				this.share_show = false
			},
			share(share_index) {
				let copyText = `你购物我买单，首笔订单全额返！自购省钱分享还能赚钱！${location.origin}/pages/index/freeSignIn?inviteCode=${this.inviteCode}`
				let appHref = 'weixin://'
				if (share_index == 1) {
					appHref = 'mqqwpa://'
				}


				this.$copyText(copyText).then(e => {
					this.closeShare()
					uni.showModal({
						title: '提示',
						content: '邀请链接复制成功,正在跳转app',
						showCancel: false
					})
					setTimeout(() => {
						location.href = appHref
					}, 1000)

				}, e => {
					this.$toast('自动复制失败')
				})

			},
			clickGoods(item) {

				if (this.chanceTimes <= 0) {
					this.$toast('没有机会了请先获取机会')
					setTimeout(() => {
						this.showShare()
					}, 1000)
					return
				}
				uni.navigateTo({
					url: `/pages/product/product?id=${item.numIid}&terraceType=${item.terraceType}&isZero=1`
				})
			},
			//监听image加载完成
			onImageLoad(key, index) {
				this.$set(this[key][index], 'loaded', 'loaded');
			},
			//监听image加载失败
			onImageError(key, index) {
				this[key][index].pictUrl = '/static/errorImage.jpg';
			},
		}
	}
</script>

<style lang="scss">
	page {
		background: #F7302D;
	}

	.freeToBuy {
		padding-top: 80upx;

		.f-tips {
			position: fixed;
			top: var(--window-top);
			left: 0;
			z-index: 88;
			height: 80upx;
		}

		image {
			width: 100%;
			display: block;
		}

		.f-header {
			height: 680upx;
		}

		.f-chanceBox {
			position: relative;

			.fc-times {
				position: absolute;
				bottom: 34upx;
				left: 346upx;
				color: #fff;
				font-size: 38upx;
				font-weight: bold;
			}

			.fc-get {
				position: absolute;
				bottom: 30upx;
				right: 120upx;
				width: 104upx;
				height: 60upx;
			}
		}

		.f-chance {
			height: 260upx;
			margin-top: -220upx;
		}

		.f-list {
			margin-top: 20upx;

			.f-item {
				width: 690upx;
				height: 280upx;
				padding: 10upx;
				margin: 20upx auto 0;
				background: linear-gradient(0deg, rgba(255, 123, 16, 1), rgba(255, 219, 50, 1));
				border-radius: 10upx;

				.f-main {
					position: relative;
					display: flex;
					width: 670upx;
					height: 260upx;
					padding: 10upx;
					background: #fff;
				}

				.fi-img {
					flex-shrink: 0;
					width: 240upx;
					height: 240upx;
				}

				.fi-right {
					padding: 20upx;
					overflow: hidden;
				}

				.fi-name {
					position: relative;
					height: 134upx;
					color: #383838;
					font-size: 24upx;
					text-indent: 42upx;
					overflow: hidden;

					image {
						position: absolute;
						top: 0;
						left: 0;
						width: 32upx;
						height: 32upx;
					}
				}

				.fi-oldprice {
					color: #C6C6C6;
					font-size: 24upx;
					text-decoration: line-through;
				}

				.fi-row {
					display: flex;
				}

				.fi-newprice {
					color: #F7302D;
					font-size: 30upx;
					font-weight: bold;
				}

				.fi-subsidy {
					display: flex;
					align-items: center;
					margin-left: auto;
					color: #F7302D;
					font-size: 24upx;

					image {
						width: 72upx;
						height: 24upx;
					}
				}
			}
		}

		.f-footer {
			@include allCenter;
			height: 74upx;
			color: #FFFFFF;
			opacity: 0.8;
			font-size: 22upx;
		}

		.f-share {
			position: relative;
			height: 330upx;
			padding-top: 30upx;
			background: rgba(255, 255, 255, 1);
			border-radius: 20upx 20upx 0 0;
			text-align: center;
			font-size: 28upx;

			.fs-list {
				padding: 0 20upx;
				margin-top: 44upx;
				overflow: hidden;

				.fs-item {
					float: left;
					width: 100upx;
					margin-right: 50upx;
					text-align: center;
					font-size: 24upx;
					overflow: hidden;

					image {
						width: 72upx;
						height: 72upx;
						margin: 0 auto 20upx;
					}
				}
			}

			.fs-cancel {
				position: absolute;
				bottom: 0;
				left: 0;
				@include allCenter;
				width: 100%;
				height: 80upx;
				border-top: 1px solid #f5f5f5;
			}
		}

		.f-rule {
			position: relative;
			height: 1000upx;
			background: linear-gradient(55deg, rgba(247, 48, 45, 1), rgba(255, 131, 47, 1));
			border-radius: 20upx 20upx 0 0;
			overflow: hidden;

			.fr-header {
				margin: 40upx 0;
			}

			.fr-close {
				position: absolute;
				top: 35upx;
				right: 35upx;
				width: 50upx;
				height: 50upx;
			}

			.fr-main {
				position: relative;
				width: 690upx;
				height: 816upx;
				margin: 0 auto;
				background: #fff;
				border-radius: 20upx;
				color: #383838;
				font-size: 24upx;
				overflow: hidden;

				.VScroll {
					top: 20upx;
					bottom: 20upx;
					overflow: hidden;
				}


			}
		}
	}

	/* 图片载入替代方案 */
	.fi-img {
		transition: .6s;
		opacity: 0;

		&.loaded {
			opacity: 1;
		}

	}
</style>
<template>
	<view>
		<view class='content' :style='{backgroundColor:info.backgroundColor}'>
				<view class='item' v-for='(item,index) in list'>
					<img  :key='index'  :src="item.imageUrl" alt="">
					<view class='btn-group' v-if='item.numIid&&item.numIid.isShow' >
						<view class='btn btn-recharge' @click='openPop' ></view>
						<!-- <view class='btn btn-recharge' @click='goRecharge(99)' ></view> -->
						<view class='btn btn-share' @click='goShare' ></view>
					</view>
				</view>
				
		</view>
		<vPop v-if='isShowPop' @closePop='closePop'>
			<view class='pop-main'>
				<view class='title'>
					充值选择
					<text class='icon-delect' @click="closePop"></text>
				</view>
				<view class='item' v-for='(item,index) in priceArr' :key='index'>
					<img class='bg' src="../../static/cashBonus/priceBg.png" mode="" v-if='index==0'/>
					<img class='bg' src="../../static/cashBonus/priceBg1.png" mode="" v-if='index!=0'/>
					<view class='content'>
						<view class='header'><text class='icon-tip'></text>{{item.name}}</view>
						<view class='price'><text class='symbol'>￥</text>{{item.value}}</view>
						<view class='btn' @click="goRecharge(item.value,item.type)"></view>
					</view>
				</view>
			</view>
		</vPop>
	</view>
</template>

<script>
	import { sending } from '@/common/bridge'
	import  popMixins  from '@/common/popMixins'
	import  vPop  from '@/components/VPop.vue'
	export default {
		mixins:[popMixins],
		data() {
			return {
				list:'',
				userId:'',
				info:'',
				type:'',
				priceArr:[{
					name:'合伙人终身卡',
					value:'',
					type:2
				},{
					name:'合伙人30天体验卡',
					value:'',
					type:1
				}]
			}
		},
		onLoad(options){
			this.userId=options.userId;
			this.type=options.type;
			this.init()
		},
		methods: {
			async init(){
				let res = await this.$api.iWantToUpgrade({
					userId:this.userId?this.userId:''
				});
				this.info=res.data;
				let that=this;
				that.list=res.data.upgradeVos.reduce((arr,item,index)=>{
					if(item.numIid){
						item.numIid=that.parsing(item.numIid)
						item.numIid=that.parsing(item.numIid)
					}
					arr.push(item)
					return arr;
				},[])
				console.log(this.list)
				this.priceArr[0].value=res.data.topUpAmount;
				this.priceArr[1].value=res.data.partnerExperienceCardAmount;
			},
			parsing(params){
				return JSON.parse(params)
				
			},
			goRecharge(price,type){
				let obj={
					type:'1',
					price:price,
					id:type
				}
				if(this.type=='android'){
					
					jsActivity.onCall(JSON.stringify(obj))
					return
				}
				sending(obj)
			},
			goShare(){
				let obj={
					type:'2'
				}
				if(this.type=='android'){
					jsActivity.onCall(JSON.stringify(obj))
					return
				}
				sending(obj)
			}
		},
		components:{vPop}
	}
</script>

<style scoped lang='scss'>
	.content{
		position: relative;
		left: 0;
		right: 0;
		top: 0;
		bottom: 0;
		width: 100%;
		height: 100%;
		img{
			margin-top: -1px;
			position: relative;
		}
		.btn{
			position: absolute;
			width: 360upx;
			height: 90upx;
			top: 36upx;
			/* border: 1px solid red; */
		}
		.btn-recharge{
			left: 8upx;
		}
		.btn.btn-share{
			right: 8upx;
		}
		.item{
			position: relative;
			top: 0;
			left: 0;
		}
		
	}
	.pop-main{
		width:100%;
		background:#fff;
		bottom: 0;
		border-radius:20upx 20upx 0 0 ;
		padding: 36upx 30upx;
		font-size:30upx;
		font-weight:bold;
		color:rgba(51,51,51,1);
		.title{
			text-align: center;
			margin-bottom:40upx;
			.icon-delect{
				width: 50upx;
				height:50upx;
				padding: 10upx;
				background: url(../../static/cashBonus/icon-delect.png) no-repeat;
				background-size: 80% 80%;
				background-position: center center;
				display: inline-block;
				float: right;
			}
		}
		.item{
			width: 100%;
			height: 240upx;
			margin-bottom: 25upx;
			position: relative;
			.content{
				width: 100%;
				height: 100%;
				position: absolute;
				left: 0;
				top: 0;
				padding:28upx 45upx;
				font-size:32upx;
				font-weight:bold;
				color:rgba(165,87,36,1);
				.icon-tip{
					width: 32upx;
					height: 30upx;
					background: url(../../static/cashBonus/icon-tip.png) no-repeat ;
					background-size: 100%;
					display: inline-block;
					margin-right: 16upx;
				}
				.time{
					font-size: 24upx;
					font-weight:400;
					position: absolute;
					top: 80upx;
					left: 45upx;
					
				}
				.price{
					margin-top: 64upx;
					font-size:72upx;
					.symbol{
						font-size: 36upx;
					}
				}
				.btn{
					top: 140upx;
					right: 0;
				}
				
			}
		}
		
	}

</style>
<template>
	<view class="index" :class="{bodyLoading:showLoading}">
		<!-- 标题栏和二级导航栏 -->
		<view class="header-section">
			<!-- <view class="header-title">淘多多</view> -->
			<VTable :tab-list="tabList" :tabCur.sync="TabCur" tab-class="header-nav-box" @change="tabChange"></VTable>
		</view>
		<!-- 标题栏和二级导航栏占位符 -->
		<!-- <view class="titleNview-placing"></view> -->
		<!-- 中间页面 -->
		<swiper-vue class="page-list" ref="swiperPage" @slideChange="pageChange" :options="pageOption">
			<swiper-vue-slide class="page-item" v-for='(item,index) in tabList' :key="index">
				<indexHome v-if='index==0' :homeData='homeData' :homeRushToPurchases='homeRushToPurchases' @doublT='jumpDoublT'></indexHome>
				<indexOther v-if='index!=0&&TabCur==index' :label="tabList[TabCur]"></indexOther>
			</swiper-vue-slide>
		</swiper-vue>
		<!-- 一天一次的广告弹窗 -->
		<cmdTransition  name="fade">
			<view class='pop-tianMao' @click.self="hideTM" v-if='isShowIndexPop'>
				<!-- 1.商品跳转商品详情，有渠道-->
				<view class='content' v-if='advertData.redirType==1'  :style="{backgroundImage:'url('+advertData.backgroudUrl+')'}">
					<!-- <view class='main' @click="jump"></view> -->
					<view class='title'>{{advertData.title}}</view>
					<img :src="advertData.pictUrl"  alt="">
					<view class='couponPrice'>领劵后￥{{advertData.couponPrice}}/件</view>
					<view class='subsidizePrices'>最高赚￥{{advertData.subsidizePrices}}</view>
					<view class='btn btn-delect' @click="hideTM"></view>
					<view class='btn btn-sure' id='baidu_index_popup' @click="jump(advertData.numIid,advertData.goodsPlatform)"></view>
				</view>
				<!-- 2.广告跳转短链 有渠道-->
				<view class='content' v-if='advertData.redirType==2&&!advertData.command'  :style="{backgroundImage:'url('+advertData.backgroudUrl+')'}">
					<view class='btn btn-delect' @click="hideTM"></view>
					<!-- <view class='btn btn-sure btn-sure1' id='baidu_index_popup' v-clipboard:copy="tMCode" v-clipboard:success="onCopy" v-clipboard:error="onError1"></view> -->
					<view class='btn btn-sure' @click="jumpO" ></view>
				</view>
				<!-- 3.口令跳转 每天一次，第一次显示 -->
				<view class='content content1' v-if='advertData.redirType==2&&advertData.command'  :style="{backgroundImage:'url('+advertData.backgroudUrl+')'}">
					<view class='btn btn-delect' @click="hideTM"></view>
					<view class='btn btn-sure btn-sure1' id='baidu_index_popup' v-clipboard:copy="advertData.command" v-clipboard:success="onCopy" v-clipboard:error="onError1"></view>
				</view>
			</view>
			
		</cmdTransition>
		<!-- 4.悬浮图标 -->
		<!-- <view class='suspen' v-if='firstData'  @click="jumpDoublT(1)">
			
			<img  class='suspend-pop' v-if='isShowSuspendP' src="/static/common/suspend-pop.png" alt="">
			<img class='content'  :src="firstData.imageUrl" alt="">
		</view> -->
		<!-- 双十一淘宝提示弹窗-->
		<view class='doubleT-pop' v-if='isShowSuspendP'>
			<img v-if='homeRushToPurchases.clickType==5' src="/static/common/dobulT-tb.png" alt="">
			<img v-if='homeRushToPurchases.clickType==4' src="/static/common/dobulT-wx.png" alt="">
		</view>
		
		<!-- 点击后出现的微信弹窗 -->
		<cmdTransition  name="fade">
			<view class="popWx" v-if="popWx_show" @click.self="closePopWx" >
				<view class="popWx-main">
					<image src="/static/index/popWx.png"></image>
					<view class="popWx-copy" @click="copyPopWx" ></view>
					<view class="popWx-close" @click.self="closePopWx"></view>
				</view>
				
			</view>
		</cmdTransition>

		<view class="pop_tips" @click="showPopWx"><image src="/static/index/popWx-tips.png"></image></view>
		<!-- 现金红包入口 -->
		<view class='cashbonus' @click='jumpCashPack' ></view>
	</view>
</template>

<script>
	import VTable from "@/components/VTable"
	import indexHome from "@/pages/index/indexHome"
	import indexOther from "@/pages/index/indexOther"
	import cmdTransition from "@/components/cmd-transition/cmd-transition.vue"
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	export default {
		components: {
			VTable,
			indexHome,
			indexOther,
			cmdTransition
		},
		data() {
			return {
				showLoading: true,
				tabList: [],
				TabCur: 0,
				// 由于swiper与betterScroll冲突，在页面滑动的时候会触发点击事件，故添加变量给VGoods组件控制跳转
				isSwiper: false,
				pageOption: {
					observer: true,
					observeParents: true,
					touchStartForcePreventDefault: true,
					on: {
						// 在切换开始的时候设置为true
						slideChangeTransitionStart: () => {
							this.isSwiper = true
						},
						// 动画结束的设为false，在页面没滚动过去，回弹回来也会触发，条件宽一点，让其更多少能设为false
						transitionEnd: () => {
							setTimeout(() => {
								this.isSwiper = false
							}, 100)
						}
					}
				},
				homeData: '',
				tMCode: '￥faeZYn2JwJq￥',
				isShowTM: true,
				isShowIndexPop: false,
				popWx_show:false,
				advertData:'',
				isShowFistPop:false,
				fristPopData:'',
				showAd:false,
				isShowSuspendP:false,
				homeRushToPurchases:{},
				firstData:'',
				num:1,
				userInfo: this.$store.getters.userInfo
				
				
			};
		},
		provide() {
			return {
				theme: this //提供祖先组件的实例
			};
		},
		onLoad() {
			this.inint();
			this.inint_adver();
		},
		onShow() {
				
		},
		onReady() {

		},
		computed: {

			swiperPage() {
				return this.$refs.swiperPage.swiper
			},
		},
		methods: {
			async inint() {
				let res = await this.$api.getHome();
				this.homeData = res.data;
				this.tabList = res.data.commodityConfigVos; //选项卡
				this.showLoading = false;
				//双十一活动
				if(res.data.homeRushToPurchases){
					this.homeRushToPurchases=res.data.homeRushToPurchases[0];
					this.firstData=res.data.homeRushToPurchases[0];
					let that=this;
					let dataLength=that.homeData.homeRushToPurchases.length;
					let time=this.homeRushToPurchases.cycleTime||10000
					setInterval(function(){
						if(that.num>=dataLength){
							that.num-=dataLength;
						}
						that.homeRushToPurchases=that.homeData.homeRushToPurchases[that.num];
						that.num++;
						
					},time)
				}
				

			},
			async inint_adver(){
				let res = await this.$api.getMainRecommendList({
					category:2
				});
				this.advertData=res.data;
				if(!this.advertData){
					this.isShowIndexPop=false
				}else{
					this.isShowIndexPop=true
				}
				
			},
			tabChange() {
				this.swiperPage.slideTo(this.TabCur)
			},
			pageChange(e) {
				this.TabCur = this.swiperPage.activeIndex
			},
			hideTM() {//关闭所有的弹窗
				this.isShowIndexPop=false;
			},
			setCookie_ad(){
				this.$common.setCookie("isShowIndexPop", 6, 1);
			},
			onCopy() {
				this.$toast("复制成功，请稍后");
				let url=this.advertData.goodsPlatform==1?'taobao://':'weixin://'
				setTimeout(function(){
					window.open(url);
				},700)
			},
			onError1: function(e) {
				this.$toast("复制口令失败");
			},
			closePop() {
				let that = this
				let t1 = setInterval(function() {
					if (new Date().getHours() == 24 || new Date().getHours() == 0) {
						// alert(new Date().getHours());
						that.hideTM()
						clearInterval(t1);
					}
				}, 10000);

			},
			jump(numIid,terraceType){
				this.setCookie_ad()
				// 1是淘宝，2是拼多多，3是天猫
				let terraceType1=terraceType==2?'PINGDUODUO':'TAOBAO';
				uni.navigateTo({
					url: `/pages/product/product?id=${numIid}&terraceType=${terraceType1}`
				})
			},
			jumpO(){
				this.setCookie_ad()
				let url=this.advertData.redirUrl;
				this.$commonLogic.href(url)
			},
			showPopWx(){
				this.popWx_show = true
			},
			closePopWx(){
				this.popWx_show = false
			},
			copyPopWx(){    
				let copyText = this.$commonLogic.randomWX(['wushixiong321','yirongdai524'])
				this.$copyText(copyText).then(e => {
					this.$toast('微信号复制成功,正在跳转微信')
					setTimeout(() => {
						window.open('weixin://');
						this.closePopWx()
					}, 700)
				
				}, e => {
					uni.showModal({
						title: '提示',
						content: '自动复制失败,请长按复制:\n'+copyText,
						showCancel: false
					})
					
				})
			},
			jumpDoublT(id){//双十一活动跳转 clickType   1内链链接  2外链  3商品 4=跳淘宝  5=分享微信
				let data=id==1?this.firstData:this.homeRushToPurchases;
				switch(data.clickType){
					case 1:
						uni.navigateTo({
							url: `${data.configVal}`
						})
						break;
					case 2:
						this.$commonLogic.href(data.configVal)
					break;
					case 3:
						uni.navigateTo({
							url: `/pages/product/product?id=${data.numIid}&terraceType=${data.terraceType}`
						})
					break;
					case 4:
						this.onCopySus('taobao://',id)
					break;
					case 5:
						this.onCopySus('weixin://',id)
					break;
					
					
				}
				
			},
			onCopySus(text,id){//1微信，2淘宝
			let data=id==1?this.firstData:this.homeRushToPurchases;
				let that=this;
				this.$copyText(data.configVal).then(function(e){
					that.$toast('口令复制成功');
					setTimeout(function(){
						window.open(text)
					},200)
					
				},function(e){
					that.$toast('复制失败，请稍后重试')
				})
				
				
			},
			async jumpCashPack(){//跳转现金红包
				
				if(! this.userInfo){
					let url=encodeURIComponent(`${window.location.href}`)
					url=`/pages/public/login?url=${url}`
					uni.navigateTo({
						url:url
					})
					return
				}
				let res = await this.$api.createRedPacket({
					userId:this.userInfo.id
				});
				if(res.data){		
					this.$common.setCookie("cashPack", JSON.stringify(res.data), 1);
				}
				if(res.data.justCreateRedPacket){
					uni.navigateTo({
						url:'/pages/cashBonus/firstPacket'
					})
				}else{
					uni.navigateTo({
						url:'/pages/cashBonus/secondPacket'
					})
				}
			}
		}
	
	}
</script>

<style lang="scss">
	.page-list {
		position: absolute;
		/*
		* 由于在部分手机上出现顶部分类栏与下面页面有间隙（出现过的手机也不是稳定出现），可能是因为像素除不尽的原因
		* top本来应该是88upx，先将下面的滚动页面往上移动一点
		* */
		top: calc(88upx - 2upx);
		bottom: 0;
		left: 0;
		right: 0;
		height: auto;
		overflow: hidden;
		background: #fff;
	}


	.header-section {
		position: fixed;
		top: 0;
		left: 0;
		z-index: 99;
		width: 100%;
		color: rgba(191, 54, 39, 1);
		background-color: #fff;

		.header-title {
			@include allCenter;
			height: 88upx;
			font-size: 32upx;
		}

	}

	.pop-tianMao {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		z-index: 999;
		background: rgba(0,0,0,.5);
		@include allCenter;
		overflow: auto;

		.content {
			position: relative;
			top: -60upx;
			width: 672upx;
			height: 1056upx;
			background-size: 100%;
			background-repeat: no-repeat;
			img{
				width: 430upx;
				height: 430upx;
				position: absolute;
				top: 360upx;
				left: 50%;
				margin-left: -215upx;
			}
			.btn {
				// border: 1px solid red;
			}
			.couponPrice{
				font-size:30upx;
				font-weight:500;
				color:rgba(255,255,255,1);
				line-height:44upx;
				position: absolute;
				left:0;
				text-align: center;
				bottom: 160upx;
				width: 100%;
				
				}
			.subsidizePrices{
				width: 100%;
				font-size:36upx;
				font-weight:500;
				color:rgba(251,54,52,1);
				line-height:44upx;
				position: absolute;
				left:0;
				text-align: center;
				bottom: 80upx;
				
			}
				
			.main{
				width: 600upx;
				height: 800upx;
				position: absolute;
				left: 80upx;
				top: 0;
			}
			.title{
				position: absolute;
				top: 260upx;
				left: 50%;
				margin-left: -191upx;
				width: 382upx;
				font-size:33upx;
				font-family:SourceHanSansCN-Medium;
				font-weight:500;
				color:rgba(0,0,0,1);
				 text-overflow: -o-ellipsis-lastline;
				  overflow: hidden;
				  text-overflow: ellipsis;
				  display: -webkit-box;
				  -webkit-line-clamp: 2;
				  line-clamp: 2;
				  -webkit-box-orient: vertical;
			}

			.btn-delect {
				width: 100upx;
				height: 100upx;
				position: absolute;
				top: 0;
				left: 0;
			}

			.btn-sure {
				width: 626upx;
				height: 980upx;
				position: absolute;
				top: 80upx;
				left: 16upx;
			}
			// .btn-sure1{
			// 	height: 100upx;
			// 	top: 444upx;
			// 	left: 128upx;
			// }

			.code {
				position: absolute;
				bottom: 294upx;
				left: 72upx;
				font-size: 40upx;
				font-weight: 500;
				color: rgba(104, 25, 24, 1);
				line-height: 72upx;
				width: 536upx;
				text-align: center;
				// border: 1px solid red;
			}
		}
		.content1{
			top: 0;
			height: 1002upx;
			.btn-sure{
				width: 680upx;
				height: 916upx;
				left: 0;
			}
			
		}
	}
	.pop_tips{
		position: fixed;
		bottom:  calc(50px + constant(safe-area-inset-bottom));
		bottom:  calc(50px + env(safe-area-inset-bottom));
		left: 0;
		z-index: 998;
		width: 100%;
		height: 80upx;
		image{
			width: 100%;
			height: 100%;
		}
	}
	.popWx{
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		z-index: 999;
		background: rgba(0,0,0,.5);
		@include allCenter;
		overflow: auto;
		.popWx-main{
			position: relative;
			width: 100%;
			height: 877upx;
			image{
				width: 100%;
				height: 100%;
			}
			.popWx-copy{
				position: absolute;
				bottom: 114upx;
				left: 176upx;
				width: 396upx;
				height: 100upx;
			}
			.popWx-close{
				position: absolute;
				bottom: -8upx;
				left: 320upx;
				width: 100upx;
				height: 100upx;
			}
		}
	
		
	}
	.suspen{
		width: 140upx;
		height: 168upx;
		position: fixed;
		bottom: 470upx;
		right: -6upx;
		z-index: 100;
		.suspend-pop{
			width: 130upx;
			height: 57upx;
			position: absolute;
			bottom: -42upx;
			right: 10upx;
		}
		.content{
			width: 140upx;
			height: 168upx;
			z-index: 101;
			position: absolute;
			top: 0;
			left: 0;
		}
	}
	.doubleT-pop{
		width: 400upx;
		height: 475upx;
		position: fixed;
		top: 200upx;
		left: 50%;
		margin-left: -50%;
	}
	.cashbonus{
		position: absolute; 
		top:400px;right:0;
		width: 190upx;
		height: 190upx;
		// background:red;
		z-index: 998;
		background: url(../../static/cashBonus/suspen-cash.gif) no-repeat;
		background-size: 100% 100%;
	}
</style>
<!-- 0元购规则，用于app和h50元购页面，为方便以后修改规则-->
<template>
	<view class="freeToBuyRule">

		<view class="fr-main">
			<view class="fr-mian-p">
				1.活动时间：
				<p>每日都有免单商品，商品数量有限，抢完为止。</p>
			</view>
			<view class="fr-mian-p">
				2.活动对象：
				<p>新注册的淘多多用户，免单权益72小时内有效。</p>
			</view>
			<view class="fr-mian-p">
				3.活动方式：
				<p>用户领取优惠券-下单购买-确认收货-补贴返款，订单和返款前请前往“我的-淘宝订单”和“我的-提现”查看。</p>
			</view>
			<view class="fr-mian-p">
				4.免单商品禁止使用积分.集分宝.红包.金币下单付款，负责无法获得补贴，订单成交价必须为商品券后价
			</view>
			<view class="fr-mian-p">
				5.新人免单为平台让利活动，活动中的商品佣金全额补贴给购买者，其他人不参与分成
			</view>
			<view class="fr-mian-p">
				6.每个用户ID仅限购买一件商品，每个新人仅补贴一件商品
			</view>
		</view>


	</view>
</template>

<script>
	export default {
		components: {

		},
		data() {
			return {

			}
		},
		props: {

		},
		onLoad() {

		},
		methods: {

		}
	}
</script>

<style lang="scss">
	.fr-main {
		padding: 30upx;
		background: #fff;
		color: #383838;
		font-size: 24upx;
		overflow: hidden;

		.fr-mian-p {
			margin-bottom: 50upx;

			p {
				text-indent: 1em;
			}
		}
	}
</style>
<template>
	<view class="indexHome">

		<VScroll ref="VScroll" @scrollToEnd="guessLikeInit" :vScrollData="guessLikeArray" pullup>
			<!-- 假搜索框 -->
			<view class='searchBox' @click='jumpSearch'>
				<view class='icon-search'></view>
				<view>输入商品名查找大额优惠劵</view>
			</view>
			<!-- 头部轮播 -->
			<view class="carousel-section">
				<image class="carousel carousel-img" @click='caJump' src='http://51app-image.oss-cn-hangzhou.aliyuncs.com/payment/tbk/2019/6/20/19392151071070.png'></image>
				<!-- <swiper-vue class="carousel" :options="swiperOption">
					<swiper-vue-slide v-for="(item, index) in homeData.bannerVos " :key="index" class="carousel-item" @click.native="swiper(item)">
						<image :src="item.url" />
					</swiper-vue-slide>
					<div class="swiper-pagination" slot="pagination"></div>
				</swiper-vue> -->
			</view>
			
			<!-- 分类 -->
			<VSetion :List='homeData.configVos.slice(0,5)' @jump='jump' imageShadow></VSetion>
			<VSetion v-if='homeData.configVos.length>6' :List='homeData.configVos.slice(5)' @jump='jump' imageShadow></VSetion>
			<!-- 双十一活动 -->
			<!-- <view class='doubleT' @click='doublT' v-if='homeRushToPurchases.bigImageUrl'>
				<image class='doubleT-img' :src='homeRushToPurchases.bigImageUrl'></image>
			</view> -->
			<VFull @jump='jump' :List='homeData.configVosThree'></VFull>
			<!-- 今日热销榜单 -->
			<view class="f-header m-t">
				<image src="/static/index/hot.png"></image>
				<view class="tit-box" @click="toSecret">
					<text class="tit">今日热销榜单</text>
				</view>
				<view class="f-header-more" @click="moreHot">查看更多 <i class="arrow_right"></i></view>
			</view>

			<view class="guess-section">
				<VGoods :goodsList="homeData.optimusMaterialVos"></VGoods>
			</view>

			<!-- 猜你喜欢 -->
			<view class="f-header m-t">
				<image src="/static/index/like.png"></image>
				<view class="tit-box">
					<text class="tit">猜你喜欢</text>
				</view>
			</view>

			<view class="guess-section">
				<VGoods :goodsList="guessLikeArray"></VGoods>
				<uniLoadMore :status="loadingType"></uniLoadMore>
			</view>

		</VScroll>

		<!-- 秘密弹窗开始 -->
		<view class="secretPopup" v-if="secretShow">
			<view>该弹窗为测试弹窗，10s后将自动消失</view>
			<input type="number" password placeholder="请输入密码" v-model="secretNumber" />
			<button type="primary" @click="confimSecret">确认</button>
		</view>
		<!-- 秘密弹窗结束 -->
		

	</view>
</template>
<script>
	import VSetion from "@/components/VSetion"
	import VFull from "@/components/VFull"
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	export default {
		components: {
			VSetion,
			uniLoadMore,
			VFull
		},
		data() {
			return {
				swiperOption: {
					autoplay: {
						disableOnInteraction: false
					},
					loop: true,
					observer: true,
					observeParents: true,
					spaceBetween: 10,
					pagination: {
						el: '.swiper-pagination'
					}

				},
				loadingType: 'more',
				guessLikeArray: [],
				page: 1,
				pageSize: 10,
				// 秘密弹窗相关变量开始
				// 测试秘密弹窗显示
				secretShow: false,
				// 秘密通道点击数
				secretSum: 0,
				secretNumber: ''
				// 秘密弹窗相关变量结束
			};
		},
		created() {
			this.guessLikeInit();
			
		},
		methods: {
			caJump(){
				uni.navigateTo({
					url: `/pages/user/cpa`
				})
			},
			jumpSearch(){
				uni.switchTab({
					url: '/pages/search/search'
				});
			},
			swiper(item) {
				if (item.type == 1) {
					// 如果链接是项目自己的链接则uni.navigateTo跳转
					if(item.clickUrl.indexOf('tdd.51app.cn/pages/')>-1){
						uni.navigateTo({
							url: `/pages/${item.clickUrl.split('tdd.51app.cn/pages/')[1]}`
						})
						return
					}
					
					window.location.href = item.clickUrl;

				} else if (item.type == 3) {
					uni.navigateTo({
						url: `/pages/product/product?id=${item.numIid}`
					})
				}

			},
			//clickType:1跳内链,如果有clickUrl则跳clickUrl，没有就去buttonNav
			// 2 就跳外链
			jump(item) {
				console.log(item)
				//0元购的直接跳过去
				if (item.id == 89) {
					uni.navigateTo({
						url: `/pages/index/freeToBuy`,
					});
					return
				}
				// 拼多多每日红包链接
				if (item.id == 90) {
					this.$api.generatePromUrl().then(res => {
						location.href = res.data.shortUrl
					})
					return
				}
				// 拼多多转盘抽奖链接
				if (item.id == 80) {
					this.$api.getLotteryUrl().then(res => {
						location.href = res.data.shortUrl
					})
					return
				}
				// 拼多多页面
				if (item.id == 77) {
					uni.navigateTo({
						url: `/pages/index/pindd?buttonIndex=${item.id}`,
					});
					return
				}
				
				if(item.clickType == 1){
					if(item.clickUrl=='JDCOM'){//京东
						uni.navigateTo({
							url:"/pages/index/pindd?buttonIndex=80",
						});
						return
					}
					uni.navigateTo({
						url: item.clickUrl || `/pages/index/buttonNav?buttonIndex=${item.id}`,
					});
				}else if (item.clickType == 2) {
					location.href = item.clickUrl
				}else if(item.clickType == 6){ //双十一活动会场
					uni.navigateTo({
						url: `/pages/forIos/doubleT?id=${item.id}`,
					});
				}else if(item.clickType == 7){
					uni.navigateTo({
						url: `/pages/forIos/activeTeen`,
					});
				}
				
				

			},
			async guessLikeInit() {
				//如果是正在加载或是没有更多了则不再请求
				if (this.loadingType == 'noMore' || this.loadingType == 'loading') {
					return;
				}
				this.loadingType = 'loading';

				let res = await this.$api.getGuessLikeProducts({
					sort: 'sale_num_desc',
					pageNum: this.page,
					pageSize: this.pageSize
				});
				//判断是否还有数据， 有改为 more， 没有改为noMore ；
				// 来自淘宝的接口可能出现某一页数量不足了，但下一页还有数据的情况，故只按照有没有数据来判断
				if (!res.data || !res.data.length) {
					this.loadingType = 'noMore';
					return
				}
				if (this.page == 1) {
					this.guessLikeArray = res.data
				} else {
					this.guessLikeArray = this.guessLikeArray.concat(res.data);
				}
				this.loadingType = 'more';
				this.page++;

			},
			// 更多今日热销，固定buttonIndex为10
			moreHot() {
				uni.navigateTo({
					url: `/pages/index/buttonNav?buttonIndex=10`,
				});
			},
			//秘密弹窗相关方法开始
			toSecret() {
				this.secretSum++;
				if (this.secretSum > 6) {
					this.secretShow = true
					setTimeout(() => {
						this.secretShow = false
						this.secretSum = 0
					}, 10000)
				}
				//点第一下后 5秒内未连续点击7下则重置
				if (this.secretSum == 1) {
					setTimeout(() => {
						if (!this.secretShow) {
							this.secretSum = 0
						}
					}, 5000)
				}
			},
			confimSecret() {
				if (this.secretNumber == '708090') {
					location.href =
						"http://192.168.100.22:5501/testMain/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%95%88%E6%9E%9C/iphonex%E9%80%82%E9%85%8D.html"
				} else {
					alert('密码错误')
				}

			},
			//秘密弹窗相关方法结束
			doublT(){
				this.$emit('doublT');
			}

		},
		props: {
			homeData: {
				type: Object,
				default: function() {
					return {}
				}
			},
			homeRushToPurchases:{
				type: Object,
				default: function() {
					return {}
				}
			}
		}


	}
</script>

<style lang="scss">
	.VScroll {
		top: 0;
		bottom: 0;
	}

	.page-list {
		position: fixed;
		top: 170upx;
		bottom: 100upx;
		left: 0;
		right: 0;
		height: auto;
		overflow: hidden;
		background: #fff;
	}

	.header-section {
		position: fixed;
		top: 0;
		left: 0;
		z-index: 99;
		width: 100%;
		height: 170upx;
		background: #BF3627;
		color: #fff;

		.header-title {
			@include allCenter;
			height: 88upx;
			font-size: 32upx;
		}

		.header-nav {}
	}

	/* 头部 轮播图 */
	.carousel-section {
		position: relative;
		padding: 20upx 0 30upx;
		text-align: center;
	}

	.carousel {
		width: 702upx;
		height: 314upx;

		.carousel-item {
			width: 100%;
			height: 100%;
			overflow: hidden;
		}

		image {
			width: 100%;
			height: 100%;
			border-radius: 10upx;
		}
	}

	/* 模块头部 */
	.f-header {
		display: flex;
		align-items: center;
		padding: 0 24upx 20upx;
		background: #fff;

		image {
			flex-shrink: 0;
			width: 66upx;
			height: 66upx;
			margin-right: 20upx;
		}

		.tit-box {
			flex: 1;
			display: flex;
			flex-direction: column;
		}

		.tit {
			font-size: $font-sm;
			color: #font-color-dark;
			font-weight: bold;
		}

		.tit2 {
			font-size: $font-sm;
			color: $font-color-light;
		}

		.icon-you {
			font-size: $font-lg +2upx;
			color: $font-color-light;
		}

		.f-header-more {
			display: flex;
			align-items: center;
			color: #999;
			font-size: 24upx;


		}
	}


	.arrow_right {
		display: inline-block;
		border-style: solid;
		width: 14upx;
		height: 14upx;
		border-width: 2upx 2upx 0 0;
		border-color: #999;
		transform: matrix(0.71, 0.71, -0.71, 0.71, 0, 0)
	}

	// 秘密弹窗开始
	.secretPopup {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		z-index: 99999;
		padding: 20% 5%;
		background: rgba(0, 0, 0, .6);
		color: #fff;
		font-size: 40upx;
		text-align: center;

		input {
			margin-top: 10%;
			background: #fff;
			color: #000;
		}

		button {
			margin-top: 10%;
		}
		
	}
	.carousel-img{
		border-radius: 10upx;
	}

	// 秘密弹窗结束
	
	//搜索框
	.searchBox{
		width:700upx;
		height:60upx;
		background:rgba(247,247,247,1);
		border-radius:6upx;
		margin: 0 auto;
		display: flex;
		align-items: center;
		padding: 0 18upx;
		font-size:24upx;
		font-weight:500;
		color:rgba(209,209,209,1);
		.icon-search{
			background: url(../../static/common/icon-search.png);
			width: 40upx;
			height: 40upx;
			background-size: 100%;
			padding-right: 20upx;
		}
	}
	//双十一
	.doubleT{
		margin:10upx auto 16upx;
		width: 700upx;
		height: 202upx;
		.doubleT-img{
			width: 100%;
			height: 100%;
		}
	}
	
</style>
<template>
	<view class="indexOther">


		<VScroll ref="VScroll" pullup @scrollToEnd="loadMore" :vScrollData="goodsList" @scroll="VScroll_scroll" @scrollEnd="VScroll_scrollEnd" listenScroll :probeType="3">

			<!-- 二级分类 -->
			<swiper-vue class="navList" :options="swiperOption">
				<swiper-vue-slide v-for="(item, index) in navList " :key="index" class="navList-item">
					<VSetion :List='item' :scale='"20%"' @jump='navListJump'></VSetion>
				</swiper-vue-slide>

			</swiper-vue>

			<VTabgoods ref="VTabgoods" :VTabhead_list="VTabhead_list" :VTabhead_act="VTabhead_act" :goodsList_params_label="label" @changeTab_tab="changeTab_tab" ></VTabgoods>

		</VScroll>
		<VTabhead v-show="VTabhead_show" :VTabhead_list="VTabhead_list" :VTabhead_act="VTabhead_act" @changeTab="changeTab"></VTabhead>
	</view>
</template>
<script>
	import VTabgoods from "@/components/VTabgoods"
	import VTabhead from "@/components/VTabhead"
	import VSetion from "@/components/VSetion"
	import VTitleSort from "@/components/VTitleSort"
	export default {
		components: {
			VTabgoods,
			VTabhead,
			VSetion,
			VTitleSort,
		},
		data() {
			return {
				// 给VSroll来更新用的
				goodsList: [],
				VTabhead_show: false,
				// 上面导航分类
				navList: [],
				// 下面选项卡头部选中的index
				VTabhead_act: 0,
				// 下面选项卡头部列表;sort:true为升序（由小到大_asc）、false为降序（由大到小_des）；loadingType：三种状态more、loading、nomore
				VTabhead_list: [{
						text: '推荐',
						loadingType: 'more',
						pageNum: 1,
						sort: true,
						dataList: []
					},
					{
						text: '券后价',
						loadingType: 'more',
						pageNum: 1,
						sort: true,
						dataList: []
					},
					{
						text: '销量',
						loadingType: 'more',
						pageNum: 1,
						sort: false,
						dataList: []
					},
				],
				// 轮播参数
				swiperOption: {
					loop: false,
					observer: true,
					observeParents: true,
					dynamicBullets: true,
				}
			};
		},
		props: {
			// 首页传入的分类标签，如男装以及其对应的id
			label: {
				type: Object,
				default: () => {
					return {}
				}
			},
		},
		created() {
			this.getNavList()
		},
		mounted() {

		},
		methods: {
			async getNavList() {

				let dataBox = (await this.$api.getByParentIdList({
					parentId: this.label.id
				})).data
				// 将二级分类的数据分割为10个一组，方便做轮播
				for (let i = 0, len = dataBox.length; i < len; i += 10) {
					this.navList.push(dataBox.slice(i, i + 10));
				}
			},
			loadMore() {
				this.$refs.VTabgoods.loadMore().then(res => {
					this.goodsList = JSON.parse(JSON.stringify(res))
				})

			},

			VScroll_scroll(e) {
				// 动态获取tab头部距离顶部的距离
				let top = this.$refs.VTabgoods.$refs.VTabhead.$el.getBoundingClientRect().top
				//获取滚动区域距离顶部的距离，兼容不同宽度下的不同距离
				let VScroll_top =  this.$common.getElementTop(this.$refs.VScroll.$el)
				if (top <= VScroll_top) {
					this.VTabhead_show = true
				} else {
					this.VTabhead_show = false
				}
				this.$emit('scroll', e)
			},
			VScroll_scrollEnd(pos){
				this.$emit('scrollEnd', pos)
			},
			changeTab(e) {
				this.$refs.VTabgoods.changeTab(e)
			},
			changeTab_tab({
				index,
				VTabhead_list
			}) {

				this.VTabhead_act = index
				this.VTabhead_list = VTabhead_list

			},
			navListJump(item) {
				this.$store.dispatch('searchObject', item)
				uni.switchTab({
					url: `/pages/search/search`
				})
			}

		},


	}
</script>

<style lang="scss">
	.VScroll {
		top: 0;
		bottom: 0;
	}

</style>
<!-- 首页的按钮导航点击后的页面，如9.9、
海淘购-->
<template>
	<view class="buttonNav" >
		<view class="buttonNav-head">
			<view class="head-back" @click="goBack">
				<image src="/static/common/arrow.png" mode="widthFix"></image>
			</view>
			<view class="head-text">{{title}}</view>
		</view>
		<VTable :tab-list="tabList" :tabCur.sync="tabCur" tab-class="header-nav-box" @change="tabChange" ></VTable>
		<VScroll ref="VScroll" pullup @scrollToEnd="loadMore" :vScrollData="goodsList[tabCur]" v-if='goodsList.length>0'>
			<VSwiper :bannerList='bannerList' v-if='this.tabList[this.tabCur].val=="热销"&&bannerList.length>0'></VSwiper>
			<VGoods class="VGoods" :goodsList="goodsList[tabCur]" :type="2" @openPop='openPop'></VGoods> 
			 <uniLoadMore :status="tabList[tabCur].loadingType" ></uniLoadMore>
		</VScroll>
	</view>
</template>

<script>
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	import VTable from "@/components/VTable";
	import VSwiper from "@/components/VSwiper";
	export default {
		components: {
			uniLoadMore,
			VTable,
			VSwiper
		},
		data() {
			return {
				tabList:[],
				goodsList:[],
				tabCur:0,
				pageSize:10,
				buttonIndex:'',
				title:'拼多多',
				bannerList:[]
			}
		},
		props: {

		},
		onLoad(e) {
			// 默认是拼多多
			this.buttonIndex = e.buttonIndex||77;
			this.title=e.buttonIndex==77?"拼多多":"京东"
			uni.setNavigationBarTitle({
				title: this.title
			});
		},
		mounted(e) {
			this.loadTab(this.tabCur);
			
		},

		methods: {
			goBack() {
				uni.switchTab({
					url: '/pages/index/index',
				})
			},
			async loadTab(){
				let api=this.buttonIndex==77?'getPddTwoLevelCategory':'getGoodsCategory'
				let res = await this.$api[api]({
					channelType: "HTML5"
				});
				let obj={
					val:"热销",
					id:''
				}
				if(this.buttonIndex!=77){//京东新增热销
					res.data.unshift(obj);
				}
				res.data.forEach((item,index)=>{
					let objE={
							id:'',
							loadingType: 'more',
							pageNum: 1,
							val:'',
							numId:item.id
						}
					objE.id=index;
					objE.val=item.val;
					this.tabList.push(objE);
					
				})
				
				
				this.loadMore()
				
			},
			tabChange(){
				if (!this.goodsList[this.tabCur]){
					this.loadMore();
				}
				
				
			},
			async loadMore(){
				
				//如果是正在加载或是没有更多了则不再请求
				let VTabhead_item = this.tabList[this.tabCur]
				if (VTabhead_item.loadingType === 'loading' || VTabhead_item.loadingType === 'noMore') {
					//防止重复加载
					return;
				}
				VTabhead_item.loadingType = 'loading';
				let ajax
				if(this.buttonIndex==77){
					ajax=this.tabList[this.tabCur].val=="热销"?'getPddTopGoods':'getPddDdkGoods' //区分
				}else{
					ajax=this.tabList[this.tabCur].val=="热销"?'getChoicenessGoodsList':'getCateGoodList' //区分
				}
				let params={
						channelType: "HTML5",
						pageNum:this.tabList[this.tabCur].pageNum,
						pageSize:this.pageSize,
						keyword:this.tabList[this.tabCur].val,
						sortType:0,
						id:this.tabList[this.tabCur].numId
					}
				let res = await this.$api[ajax](params);
				if(this.tabList[this.tabCur].val=="热销"){
					this.bannerList=res.data.bannerList;
					res.data=res.data.goodsList;
					
				}
				//判断是否还有数据， 有改为 more， 没有改为noMore ；
				// 来自淘宝的接口可能出现某一页数量不足了，但下一页还有数据的情况，故只按照有没有数据来判断
				if (!res.data || !res.data.length) {
					VTabhead_item.loadingType = 'noMore';
					return
				}
				if (!this.goodsList[this.tabCur]) {
					this.$set(this.goodsList, this.tabCur, res.data)
				}else{
					this.goodsList[this.tabCur].push(...res.data)
				}
				// this.goodsList[this.tabCur].push(...res.data)
				VTabhead_item.loadingType = 'more';
				VTabhead_item.pageNum++
				console.log(this.goodsList)
			},
			openPop(text){//京东分享提示
				let that=this;
				uni.showModal({
				    title: '是否分享到微信',
				    content: text,
				    success: function (res) {
				        if (res.confirm) {
				           
				            that.$copyText(text).then(function(){
				            	that.$toast('复制成功')
				            	setTimeout(function() {
				            		window.open('weixin://');
				            	}, 300);
				            },function(){
				            	that.$toast('复制失败，请稍后重试')
				            })
							
				        } else if (res.cancel) {
				            console.log('用户点击取消');
				        }
				    }
				});
			}
		},

	}
</script>

<style lang="scss">
	.VScroll {
		top: calc(88upx + 90upx);
		bottom: 0;
	}

	.buttonNav {
		padding-top: 88upx;

		.VGoods {
			padding-top: 20upx;
		}
		
	}

	.buttonNav-head {

		position: fixed;
		top: 0;
		left: 0;
		z-index: 998;
		display: flex;
		justify-content: space-between;
		width: 100%;
		height: 88upx;
		background: #BF3627;
		font-size: 32upx;
		color: #fff;

		.head-back {
			position: absolute;
			top: 0;
			left: 0;
			width: 60upx;
			height: 100%;
			padding-left: 30upx;
			display: flex;
			align-items: center;

			image {
				width: 18upx;
				height: 33upx;
			}
		}

		.head-text {
			@include allCenter;
			width: 100%;
		}
	}
	.VSwiper{
		width: 700upx;
		height: 250upx;
		margin: 10upx 25upx 20upx;
	}
	
</style>
<template>
	<view class="iwant">
		
		<view class='header' @click='toggle'>
			每天半小时，财富滚滚来 联系导师获得一对一指导
			<view class='btn btn-teacher'>微信导师</view>
		</view>
		<VScroll>
			<view v-for="(item, index) in wantData.detailsPictureLink" :key='index'>
				<img class='item' v-if='index!=1' :key="index" :src="item.imageUrl">
			</view>
		</VScroll>
		<view class='pop' v-if='isPop'>
			<view class='pop-mask' @click='toggle'></view>
			<view class='pop-main'>
				<img src="/static/iwant/pop.png" alt="">
				<view class='btn btn-close' @click='toggle'></view>
				<view class='btn btn-copy' v-clipboard:copy="copyData" v-clipboard:success="onCopy" v-clipboard:error="onError" >
				</view>
			</view>
		</view>
		
	</view>
	
</template>

<script>
	export default {
		data() {
			return {
				wantData: '',
				isPop: false,
				copyData:''
			}
		},
		onLoad(options) { //跳转带参
			this.init();
		},
		methods: {
			async init() {
				let res = await this.$api.getIWantToMake();
				this.wantData = res.data;
				this.copyData = this.$commonLogic.randomWX(res.data.customerServiceLink.configVal)
			},
			toggle() {
				this.isPop = !this.isPop;
			},
			onCopy(){
				this.$toast("复制成功")
				// this.isPop = !this.isPop;
				setTimeout(()=>{
						window.open("weixin://");
				},700)
			
			},
			onError(){
				this.$toast("复制失败")
			}
		}
	}
</script>

<style lang="scss">
	.VScroll{
		top: 88upx;
		bottom: 0;
	}
	
	.iwant {
		padding-top: 88upx;

		.item {
			width: 100%;
			display: block;
			height: 100%;
		}
	}

	.header {
		width: 100%;
		height: 88upx;
		background: rgba(255, 78, 0, 1);
		position: fixed;
		top: 0;
		left: 0;
		display: flex;
		align-items: center;
		color: #fff;
		padding:0 20upx;
		z-index: 3;
		font-size: 24upx;
		.btn-teacher {
			padding: 14upx 26upx;
			background: linear-gradient(0deg, rgba(170, 36, 255, 1), rgba(90, 58, 255, 1));
			box-shadow: 0px 2upx 0upx 0upx rgba(119, 33, 199, 1), 0upx 2upx 0upx 0upx rgba(215, 255, 205, 0.35);
			border-radius: 28upx;
			font-size: 24upx;
			font-weight: 500;
			color: rgba(255, 255, 255, 1);
			position: absolute;
			top: 13upx;
			right: 20upx;
		}
	}

	.pop {
		position: fixed;
		top: 0;
		left: 0;
		bottom: 0;
		right: 0;
		z-index: 999;

		.pop-mask {
			width: 100%;
			height: 100%;
			background: #000;
			opacity: .3;
		}

		.pop-main {
			position: absolute;
			top: 200upx;

			.btn-close {
				position: absolute;
				bottom: -20upx;
				width: 120upx;
				height: 120upx;
				border-radius: 80upx;
				left: 50%;
				margin-left: -60upx;
			}

			.btn-copy {
				position: absolute;
				bottom: 160upx;
				width: 600upx;
				height: 120upx;
				left: 50%;
				margin-left: -300upx;
			}
		}
	}
</style>
<template>
	<view class="content">
		<view class="navbar">
			<view v-for="(item, index) in navList" :key="index" class="nav-item" :class="{current: navAct === index}" @click="tabClick(index)">
				{{item.text}}
			</view>
		</view>

		<swiper :current="navAct" class="swiper-box" duration="300" @change="changeTab">
			<swiper-item class="tab-content" v-for="(tabItem,tabIndex) in navList" :key="tabIndex">

				<VScroll class="contentSc" @scrollToEnd="getData" :vScrollData="tabItem.dataList" pullup>
					<!-- 空白页 -->
					<VEmpty v-if="tabItem.dataList.length === 0&&isShow" :img='"/static/common/nullOrder.png"'></VEmpty>

					<!-- 订单列表 -->
					<block v-else="">
						<VOrderList :tabItem='tabItem.dataList'></VOrderList>
						<uniLoadMore :status="tabItem.loadingType"></uniLoadMore>
					</block>

				</VScroll>
			</swiper-item>
		</swiper>
	</view>
</template>

<script>
	import VEmpty from "@/components/VEmpty";
	import VOrderList from '@/components/VOrderList.vue'
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	export default {
		components: {
			VEmpty,
			VOrderList,
			uniLoadMore
		},
		data() {
			return {
				navAct: 0,
				navList: [{
						text: '全部',
						pageNum: 1,
						loadingType: 'more',
						dataList: []
					},
					{
						text: '待结算',
						pageNum: 1,
						loadingType: 'more',
						dataList: []
					},
					{
						text: '已结算',
						pageNum: 1,
						loadingType: 'more',
						dataList: []
					},
				],
				pageSize: 4,
				isShow:false

			};
		},

		onLoad(options) {
			//获取url上的state
			this.navAct = +options.state || 0
			this.getData();

		},

		methods: {
			async getData() {
				this.isShow=false;
				let navItem = this.navList[this.navAct]
				//如果是正在加载或是没有更多了则不再请求
				if (navItem.loadingType === 'loading' || navItem.loadingType === 'noMore') {
					//防止重复加载
					return;
				}

				navItem.loadingType = 'loading';
				let dataBox = (await this.$api.getUserOrderList({
					status: this.navAct || '',
					pageNum: navItem.pageNum,
					pageSize: this.pageSize
				})).data.list
				if (dataBox) {
					navItem.dataList.push(...dataBox)
					this.isShow=true;
				}


				//判断是否还有数据， 有改为 more， 没有改为noMore 
				if (!dataBox || dataBox.length < this.pageSize) {
					navItem.loadingType = 'noMore';
					return
				} else {
					navItem.loadingType = 'more';
				}

				navItem.pageNum++


			},
			//swiper 切换
			changeTab(e) {
				
				this.tabClick(e.target.current)
				
			},
			//顶部tab点击
			tabClick(index) {
				this.navAct = index;
				if (this.navList[this.navAct].dataList.length == 0) {
					this.getData();
				}
			},

		},
	}
</script>

<style lang="scss">
	page,
	.content {
		background: $page-color-base;
		height: 100%;
	}

	.swiper-box {
		height: calc(100% - 40px);
	}

	.list-scroll-content {
		height: 100%;
	}

	.navbar {
		display: flex;
		height: 80upx;
		padding: 0 10upx;
		background: #fff;
		box-shadow: 0 2upx 10upx rgba(0, 0, 0, .06);
		position: relative;
		z-index: 10;

		.nav-item {
			flex: 1;
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100%;
			font-size: 30upx;
			color: $font-color-dark;
			position: relative;

			&.current {
				color: $base-color;

				&:after {
					content: '';
					position: absolute;
					left: 50%;
					bottom: 0;
					transform: translateX(-50%);
					width: 88upx;
					height: 0;
					border-bottom: 4upx solid $base-color;
				}
			}
		}
	}

	.uni-swiper-item {
		height: auto;
	}

	.VScroll {
		top: 0;
		bottom: 0;
	}
	.VEmpty{
		padding-top: 240upx;
	}
</style>
<template>
	<view class="container">
		<view class='top'>
			<view class='leftsider'>
				<img src="/static/common/logo.jpg" alt="">
				<view>淘多多，一个人人都需要的赚钱App</view>
			</view>
			<view class='btn-down' @click='down'>立即下载</view>
		</view>
		<!--轮播图-->
		<view class="carousel">
			<swiper  circular=true duration="400" @change="swiperChange">
				<swiper-item class="swiper-item" v-for="(item,index) in productData.smallImagesArr" :key="index">
					<view class="image-wrapper">
						<image
							:src="item" 
							class="loaded" 
							mode="aspectFill"
						></image>
					</view>
				</swiper-item>
			</swiper>
			<text v-if="productData.smallImagesArr" class='picNum'>{{swiperIndex+1}}/{{productData.smallImagesArr.length}}</text>		
		</view>
		<!--  价格-->
		<view class="introduce-section">
			
			<view class='detail-desc'>
				<!-- <view class='comeFrom icon-taobao' v-if='productData.userType==0'></view>
				<view class='comeFrom icon-tianmao' v-if='productData.userType==1'></view> -->
				<view class="title">{{productData.taoTitle}}</view>
			</view>
			<view class="detail">
				<view class="price">
					<text class='unit'>￥</text>
					<text class='currentP'>{{productData.zkFinalPrice}}</text>
					
					<view class="juan">
						<view class='bg'>
							<image class='leftSider' src="/static/index/juan-left.png"></image>
							<image class='middle' src="/static/index/juan-middle.png"></image>
							<image class='rightSider' src="/static/index/juan-right.png"></image>
						</view>
						￥{{productData.couponInfoMoney||0 }}
					</view>
					
				</view>
				<view class="number">
				月销：{{productData.volume}}件
				</view>
			</view>	
			<text class='oriP'>￥{{productData.reservePrice }}</text>
		</view>
		<view class='borB'></view>
		<view class='btn btn-buy' @click='jumpTB'>
			淘口令购买
		</view>
		<view class='copyPop' v-if='isShow'>
			<view class='pop-mask' @click='close'></view>
			<view class='content'>
				<view class='top'>
					淘口令购买
					<img src="/static/common/icon-delect.png" alt="" @click='close'>
				</view>
				<view class='middle'>{{copyData}}</view>
				<view class='btn btn-copy'
				 v-clipboard:copy="copyData"
					  v-clipboard:success="onCopy"
					  v-clipboard:error="onError1">复制</view>
				<view class='detail'>
                      使用说明：点击复制后，请打开【手机淘宝】购买！
				</view>
			</view>
		</view>
		
	</view>
</template>

<script>
	export default{
		components: {
		},
		data() {
			return {
				swiperIndex:0,//当前轮播图的index,
				productData:{},
				numId:'',
				copyData:'',
				isShow:false
			};
		},
		async onLoad(options){//跳转带参
			this.inint(options.id);
			this.numId=options.id;
			let code
			if(options.code.indexOf(":")!=-1){
				 code=options.code.split(':')[1];
			}else{
				code=options.code;
			}
			
			this.copyData=decodeURIComponent(code||"$MDds87HGdaL$")  
		},
		onShow(){
		},
		methods:{
			async inint(id){//获取商品详情
				let res= await this.$api.productDetail({
					numId:id,
					couponId:this.couponId 
				});
				this.productData=res.data;
			},
			swiperChange(e) {//轮播图
				this.swiperIndex = e.detail.current;
			},
			jumpTB(){//下单
				this.isShow=true;
			},
			close(){
				this.isShow=false;
			},
			onCopy(){
				this.$toast("复制成功");
				setTimeout(()=>{
					this.isShow=false;
				},3000)
			},
			onError1: function (e) {
			  this.$toast("复制失败");
			},
			down(){
				let url='https://a.app.qq.com/o/simple.jsp?pkgname=com.wcl.tdd'
				window.open(url);
			}
		},

	}
</script>

<style lang='scss'>
	page{
		background: #fff;;
		padding-bottom: 100upx;
	}
	.icon-you{
		font-size: $font-base + 2upx;
		color: #888;
	}
	.carousel {
		height: 750upx;
		position:relative;
		swiper{
			height: 100%;
		}
		.image-wrapper{
			width: 100%;
			height: 100%;
		}
		.swiper-item {
			display: flex;
			justify-content: center;
			align-content: center;
			height: 750upx;
			overflow: hidden;
			image {
				width: 100%;
				height: 100%;
			}
		}
		.picNum{
			font-size:30upx;
			color:rgba(255,255,255,1);
			padding:7upx 25upx;
			background:rgba(0,0,0,1);
			opacity:0.12;
			position:absolute;
			bottom:24upx;
			right:24upx;
			border-radius:40upx;
		}
		
	}
	
	/* 标题简介 */
	.introduce-section{
		background: #fff;
		padding: 25upx 37upx;
		.price{
			flex:0 0 70%;
			text-align:left;
			font-size:36upx;
			color:rgba(191,54,39,1);
			display:flex;
			align-items:center;
			.unit{
				font-size:$font-sm;
			}
			.currentP{
				font-size:36upx;
				padding:0 12upx 0 0;
			}
			.icon-art{
				width:76upx;
				height: 30upx;
				background: url(/static/index/icon-juan.png) no-repeat;
				background-size: 100%;
				display: inline-block;
			}
			
			.saveM{
				font-size:22upx;
				font-weight:bold;
				border-radius:4upx;
				padding:4upx 9upx;
				margin:0 30upx 0 20upx;
				color: #ff2828;
				background: #ffdada;
			}
			
		}
		.oriP{
			font-size: $font-sm;
			color:rgba(153,153,153,1);
			text-decoration: line-through;
		}
		.number{
			flex:0 0 30%;
			text-align:right;
			color:rgba(153,153,153,1);
			font-size: 24upx;
		}
		.detail{
			display:flex;
			align-items:center;
			width:100%;
			margin: 20upx 0 10upx;
		}
			
		.detail-desc{
			position:relative;
			.comeFrom{
				width:30upx;
				height: 30upx;
				margin-right: 18upx;
				position: absolute;
				top:2upx;
				left: 0;
			}
			.icon-taobao{
				background: url(/static/index/icon-taobao.png) no-repeat;
				background-size: 100%;
			}
			.icon-tianmao{
				background: url(/static/index/icon-tianmao.png) no-repeat;
				background-size: 100%;
			}
			.title{
				    font-size: 13px;
					font-weight:bold;
					color:rgba(51,51,51,1);
					overflow: hidden;
					-o-text-overflow: ellipsis;
					text-overflow: ellipsis;
					display: -webkit-box;
					-webkit-line-clamp: 2;
					-webkit-box-orient: vertical;
					margin: 12px 0 5px;
					/* text-indent: 22px; */
					width: 100%;
					line-height: 40upx;
			}
		}
		.price_bg{
			font-size:30upx;
			font-weight:bold;
			color:#fff;
			.priceN{
				font-size:72upx;
				margin-right:18upx;
			}
			.time{
				font-size:$font-sm;
				margin-top:12upx;
			}
		}
	}
	
	.juan {
		position: relative;
		font-size: 24upx;
		color: rgba(191, 54, 39, 1);
		/* float: left; */
		margin-left: 25upx;
		padding: 0 10upx 0 50upx;
		clear: both;
		display: flex;
		align-items: center;
		height: 30upx;
		line-height: 30upx;
	
		.bg {
			width: 100%;
			position: absolute;
			left: 0;
			top: 0;
			display: flex;
			align-items: center;
			height: 30upx;
	
			.leftSider {
				position: absolute;
				top: 0;
				left: 0;
				width: 44upx;
				height: 100%;
			}
	
			.middle {
				width: 100%;
				height: 30upx;
				margin: 0 8upx 0 44upx;
				min-width: 30upx;
				box-sizing: border-box;
	
			}
	
			.rightSider {
				width: 8upx;
				position: absolute;
				top: 0;
				right: 0;
				height: 100%;
			}
	
	
	
		}
	
		.saving {
			font-size: 18upx;
			position: absolute;
			left: 10upx;
			top: 5upx;
		}
	}
	.btn-buy{
		height:88upx;
		background:rgba(191,54,39,1);
		position: fixed;
		bottom: 0;
		left: 0;
		width: 100%;
		font-size:30upx;
		color:rgba(255,255,255,1);
		line-height: 88upx;
		text-align: center;
	}
	.top{
		height:88upx;
		background:rgba(51,51,51,1);
		display: flex;
		align-items: center;
		padding: 0 20upx 0 27upx;
		font-size:24upx;
		color:rgba(255,255,255,1);
		justify-content: space-between;
		.leftsider{
			display: flex;
			align-items: center;
		}
		img{
			width:51upx;
			height:51upx;
			border-radius:6upx;
			margin-right: 25upx;
		}
		.btn-down{
			width:132upx;
			height:50upx;
			background:rgba(255,48,48,1);
			border-radius:25upx;
			font-size:24upx;
			font-weight:400;
			color:rgba(255,255,255,1);
			text-align: center;
			line-height:50upx;
		}
		
	}
	.copyPop{
		.pop-mask{
			position: fixed;
			z-index: 999;
			top: 0;
			right: 0;
			left: 0;
			bottom: 0;
			background: rgba(0,0,0,.6);
		}
		.content{
			    position: fixed;
				z-index: 999;
				width: 550upx;
				top: 50%;
				left: 50%;
				height: 480upx;
				-webkit-transform: translate(-50%,-50%);
				transform: translate(-50%,-50%);
				background-color: #fff;
				text-align: center;
				border-radius:10upx;
				overflow: hidden;
				.top{
					height:88upx;
					line-height: 88upx;
					background:rgba(255,67,36,1);
					font-size:32upx;
					color:rgba(255,255,255,1);
					text-align: center;
					position: relative;
					display: inline-block;
					width: 100%;
					img{
						padding: 29upx 10upx;
						width:50upx;
						height:88upx;
						position: absolute;
						top: 0;
						right: 0;
					}
				}
				.middle{
					width:380upx;
					height:84upx;
					background:rgba(233,233,233,1);
					margin:56upx auto 33upx;
					font-size:36upx;
					font-weight:bold;
					color:rgba(51,51,51,1);
					line-height:84upx;
				}
				.btn-copy{
					width:340upx;
					height:84upx;
					background:rgba(255,67,36,1);
					border-radius:80upx;
					font-size:36upx;
					font-weight:bold;
					color:rgba(255,255,255,1);
					line-height:84upx;
					margin:0 auto 34upx;
				}
				.detail{
					width:394upx;
					height:49upx;
					font-size:22upx;
					color:rgba(102,102,102,1);
					margin:0 auto;
				}
		}
	}
	.borB{
		width:100%;
		height:20upx;
		background:rgba(248,248,248,1);
		margin-top:20upx;
	}
</style>
<!-- 商品详情 -->
<template>
	<view class="container">
		<!--轮播图-->
		<view class="carousel">
			<swiper circular=true duration="400" @change="swiperChange">
				<swiper-item class="swiper-item" v-for="(item,index) in productData.smallImagesArr" :key="index">
					<view class="image-wrapper">
						<image :src="item" class="loaded" mode="aspectFill"></image>
					</view>
				</swiper-item>
			</swiper>
			<text v-if="productData.smallImagesArr" class='picNum'>{{swiperIndex+1}}/{{productData.smallImagesArr.length}}</text>
		</view>
		<!--  价格-->
		<view class="introduce-section">
			<view class="detail">
				<view class="price">
					<text class='unit'>￥</text>
					<text class='currentP'>{{productData.zkFinalPrice}}</text>
					<text class='oriP'>￥{{productData.reservePrice }}</text>
					<!-- <text class='icon-art'></text> -->
					<text v-if="!isZero" class='saveM'>返{{productData.returnMoney}}元</text>
					<text v-if="isZero" class='saveM'>补贴{{productData.zkFinalPrice}}元</text>

				</view>
				<view class="number">
					月销：{{productData.volume}}件
				</view>
			</view>
			<view class='detail-desc'>
				<view class='comeFrom icon-taobao' v-if='productData.userType==0'></view>
				<view class='comeFrom icon-tianmao' v-if='productData.userType==1'></view>
				<view class='comeFrom icon-pidd' v-if='productData.userType==3'></view>
				<view class="title">{{productData.taoTitle}}</view>
			</view>
			<view class="coupon">
				<view class="price_bg">
					<text class='priceN'>{{productData.couponInfoMoney }}</text>
					<text>元优惠劵</text>
				</view>
				<view class="time">
					{{productData.couponStartTime}}-{{productData.couponEndTime}}
				</view>
				<view class="btn btn-receive" @click='jumpTB'></view>
			</view>
		</view>
		<!-- 图片详情 -->
		<view class="pic-desc">
			<VTitleClass v-if='productData.detailsImages' :value="'图文详情'"></VTitleClass>
			<view v-if='productData.detailsImages'>
				<img v-for="(item,index) in productData.detailsImages" :key="index" :src="item" />
			</view>
			<VTitleClass :value="'为你推荐'"></VTitleClass>
			<view class='goodsList'>
				<VGoods :goodsList="goodsList" :tyoe='1'></VGoods>
			</view>
		</view>
		<view>
			<VPayFooter @share='share' :numId='numId' :productData='productData' @changeCollect='changeCollect' :collect='isCollect'
			 :isZero='isZero' @jumpTB='jumpTB'></VPayFooter>
		</view>

		<share ref="share" :contentHeight="436" :shareList="shareList" :copyData='copyData'></share>
		<view class='pop-weixin' v-if='isWXPop'>
			<view class='pop-mask' @click='closePop'></view>
			<view class='content'>
				<!-- <img :src="productData.smallImagesArr[0]" alt="">
				<view class='weixinCode'>{{wxCode}}</view> -->
				<view class='price'>{{productData.returnMoney}} 元</view>
				<view class='btn btn-copy-weixin' v-clipboard:copy="wxCode" v-clipboard:success="onCopy" v-clipboard:error="onError2"></view>
				<!-- <view class='btn btn-copy-link' v-clipboard:copy="shareLink" v-clipboard:success="onCopy1" v-clipboard:error="onError1"></view> -->
				<!-- <view class='btn btn-jump' @click='jumpWx'></view> -->
				<view class='btn btn-delect' @click='closePop'></view>
			</view>
		</view>
		<!-- 弹窗二 -->
		<view class='copyPop' v-if='isShow'>
			<view class='pop-mask' @click='close'></view>
			<view class='content'>
				<view class='top'>
					淘口令购买
					<img src="/static/common/icon-delect.png" alt="" @click='close'>
				</view>
				<view class='middle'>{{shareLink}}</view>
				<view class='btn btn-copy'
				 v-clipboard:copy="shareLink"
					  v-clipboard:success="onCopy1"
					  v-clipboard:error="onError1">复制</view>
				<view class='detail'>
		              使用说明：点击复制后，{{title}}！
				</view>
			</view>
		</view>
	</view>
</template>

<script>
	import share from '@/components/share';
	import VPayFooter from '@/pages/product/VPayFooter';
	import VTitleClass from '@/components/VTitleClass';
	export default {
		components: {
			share,
			VPayFooter,
			VTitleClass
		},
		data() {
			return {
				shareList: [{ //分享
						type: 1,
						icon: '/static/temp/share_wechat.png',
						text: '微信好友'
					},
					{
						type: 3,
						icon: '/static/temp/share_qq.png',
						text: 'QQ好友'
					},
					{
						type: 2,
						icon: '/static/temp/share_moment.png',
						text: '朋友圈'
					},

				],
				swiperIndex: 0, //当前轮播图的index,
				goodsList: [], //为你推荐列表,
				productData: {},
				numId: '',
				pageNum: 1,
				pageSize: 10,
				isCollect: false,
				copyData: '',
				userInfo: this.$store.getters.userInfo,
				taobaoAuth: 0,
				client_id: '23709391',
				wxCode: '',
				shareLink: '',
				isWXPop: false,
				terraceType: '',
				//是否是零元购商品
				isZero: 0 ,//默认为0表示不是，传入1就是
				couponId:'',
				isShow:false,
				title:'淘宝'
			};
		},
		async onLoad(options) { //跳转带参
			this.terraceType = options.terraceType;
			this.isZero = Number(options.isZero);
			this.couponId=options.couponId||'';
			
			this.numId = options.id;
			if (this.terraceType == 'PINGDUODUO') {
				this.initP(options.id);
			} else {
				this.inint(options.id);
			}
			this.title=this.terraceType== 'PINGDUODUO'?'请打开浏览器访问购买':'请打开【手机淘宝】购买！';


		},
		beforeRouteEnter(to, from, next) {
			console.log(22, to, from, next);
		},
		onShow() {
			this.userInfo = this.$store.getters.userInfo;
			if (!this.userInfo) {
				return
			}
			this.taobaoAuth = this.userInfo.taobaoAuth; //判断淘宝回调
			this.taobaoObj = this.$common.urlParse();
			// console.log("淘宝授权",this.taobaoObj,this.taobaoAuth);
			if (JSON.stringify(this.taobaoObj) != '{}' && this.userInfo && this.taobaoAuth == 0) {
				if (this.taobaoObj.code) {
					this.getTooken();
				}
			}
		},
		methods: {
			async inint(id) { //获取商品详情
				let res = await this.$api.productDetail({
					numId: id,
					couponId:this.couponId //注释，后台接口未上
					
				});
				this.productData = res.data;
				this.getRecommend(); //获取为推荐
				this.createTaoKoulingTwoInOne(1) //获取淘宝分享短链
				this.isCollect = this.productData.collect;
			},
			async initP(id) { //获取拼多多商品详情
				let res = await this.$api.productDetailPidd({
					numiid: id
				});
				this.productData = res.data;
				this.getRecommend(); //获取为推荐
				this.generateGoodsPromUrl() //获取分享短链，暂时没有权限
				// this.generatePddPhrase()
				this.isCollect = this.productData.collect;
			},
			async getRecommend() { //为你推荐
				let res = await this.$api.getBeInCommonUseQuery({
					query: this.productData.title,
					pageNum: this.pageNum,
					pageSize: 6
				});
				this.goodsList = res.data;
			},
			share() { //分享
				if(this.shareLink==""||this.wxCode==""){
					this.$toast("商品数据获取失败，请稍后再试");
				}else{
					this.isWXPop = true;
				}
				// if(this.userInfo){
				// 	if(this.taobaoAuth==1){//授权过
				// 		this.createTaoKoulingTwoInOne();
				// 		this.$refs.share.toggleMask();
				// 	}else{
				// 		uni.showModal({
				// 		    content: '淘宝未授权，是否去淘宝授权？',
				// 		    success:async (e)=>{
				// 		    	if(e.confirm){
				// 					this.$common.setCookie("ShareOrOrder",0,30);
				// 					this.bindTaobao();
				// 		    	}
				// 		    }
				// 		});
				// 	}
				// }else{
				// 	this.jumpLogin();
				// }

			},
			async createTaoKoulingTwoInOne(id) { //获取淘宝分享的字段
				let res = await this.$api.createTaoKoulingTwoInOne({ //生产分享短链
					numIid: this.numId,
					text: this.productData.taoTitle,
					wechatType:this.isZero == 1 ? 1 :'' //如果是零元购则传入1
				});
				if (id == 2) {
					this.copyData = `${this.productData.taoTitle}${res.data.url}点击链接，再选择浏览器咑閞；或復·制这段描述${res.data.kouling}后到淘寳`;
				} else {
					this.shareLink = res.data.kouling;
					this.wxCode = this.$commonLogic.randomWX(res.data.wechatId)
				}

			},
			async generatePddPhrase() { //目前没有权限
				let res = await this.$api.generatePddPhrase({ //拼多多生成分享口令
					productId: this.numId,
					multiGroup: false
				});
				this.shareLink=res.data.phrase;
				this.wxCode = this.$commonLogic.randomWX(res.data.wechatId)
			},
			// 获取拼多多推广链接
			async generateGoodsPromUrl() {
				let res = await this.$api.generateGoodsPromUrl({ //拼多多生成分享口令
					productId: this.numId,
					shortUrl: true,
					multiGroup: false
				});
				// 只有url的这个链接微信的机器人才能识别
				this.shareLink = res.data.url;
				this.wxCode = this.$commonLogic.randomWX(res.data.wechatId)
			},
			jumpLogin() {
				let url = `${window.location.href}`;
				url = url.replace("?", "&");
				uni.navigateTo({
					url: `/pages/public/login?url=${url}`,

				})
			},
			swiperChange(e) { //轮播图
				this.swiperIndex = e.detail.current;
			},
			jumpTB() { //下单
				if(this.shareLink==""||this.wxCode==""){
					this.$toast("商品数据获取失败，请稍后再试");
				}else if(this.terraceType== 'PINGDUODUO'){//拼多多没有短链，直接跳转链接
					if(this.userInfo){
						this.$commonLogic.href(this.shareLink);
					}else{
						let url=encodeURIComponent(`${window.location.href}`)
						url=`/pages/public/login?url=${url}`
						uni.navigateTo({
							url:url
						})
						console.log(111,url)
					}
					
				}else{
					this.isShow = true;
				}
				// if(this.userInfo){
				// 	if(this.taobaoAuth==1){//授权过
				// 		this.convertLink();
				// 	}else{
				// 		this.$common.setCookie("ShareOrOrder",1,30);
				// 		this.bindTaobao();
				// 	}
				// }else{
				// 	this.jumpLogin();
				// }
			},
			async convertLink() {
				let res = await this.$api.convertLink({
					numId: this.numId
				});
				if (res.data.couponClickUrl) {
					location.href = res.data.couponClickUrl;
				}
			},
			changeCollect() { //收藏
				if (this.$store.getters.userInfo) {
					// this.isCollect=!this.isCollect;
					if (!this.isCollect) {
						this.addCollect();
					} else {
						this.delectCollect();
					}
				} else {
					this.jumpLogin();
				}

			},
			async addCollect() {
				let that = this;
				await this.$api.doTaobaoCollectCommodity({
					numIid: this.numId,
					terraceTypeEnum: this.productData.terraceType
				})
				this.isCollect = true;
				this.$toast('收藏成功');


			},
			async delectCollect() {
				await this.$api.doTaobaoCancelCollect({
					numIid: this.numId,
					terraceTypeEnum: this.productData.terraceType
				})
				this.isCollect = false;
				this.$toast('已取消收藏');
			},
			bindTaobao() {
				let redirect_uri = `${window.location.href}`
				redirect_uri = encodeURIComponent(redirect_uri);

				let url =
					`https://oauth.taobao.com/authorize?response_type=code&client_id=${this.client_id}&redirect_uri=${redirect_uri}&state=tb&view=wap`;
				location.href = url;
			},
			async getTooken() {
				let res = await this.$api.getToken({
					code: this.taobaoObj.code,
					note: this.userInfo.id
				});
				this.taobaoAuth = res.data.taobaoAuth;
				this.userInfo.taobaoAuth = res.data.taobaoAuth
				this.$store.dispatch('userInfo', this.userInfo)

				if (this.$common.getCookie("ShareOrOrder") == 0) {
					this.createTaoKoulingTwoInOne(2);
					this.$refs.share.toggleMask();
				} else {
					this.convertLink();
				}

			},
			onCopy() {
				this.$toast("复制微信成功，正在为你打开微信");
				setTimeout(function(){
					window.open("weixin://");
				},700)
				
			},
			onError2: function(e) {
				this.$toast("复制失败");
			},
			onCopy1() {
				this.$toast("复制成功");
			},
			onError1: function(e) {
				this.$toast("复制失败");
			},
			jumpWx() {
				window.open("weixin://");
			},
			closePop() {
				this.isWXPop = false;
			},
			close(){
				this.isShow=false;
			}
		},

	}
</script>

<style lang='scss'>
	page {
		background: #fff;
		padding-bottom: calc(100upx + constant(safe-area-inset-bottom));
		padding-bottom: calc(100upx + env(safe-area-inset-bottom));
	}

	.icon-you {
		font-size: $font-base + 2upx;
		color: #888;
	}

	.carousel {
		height: 722upx;
		position: relative;

		swiper {
			height: 100%;
		}

		.image-wrapper {
			width: 100%;
			height: 100%;
		}

		.swiper-item {
			display: flex;
			justify-content: center;
			align-content: center;
			height: 750upx;
			overflow: hidden;

			image {
				width: 100%;
				height: 100%;
			}
		}

		.picNum {
			font-size: 30upx;
			color: rgba(255, 255, 255, 1);
			padding: 7upx 25upx;
			background: rgba(0, 0, 0, 1);
			opacity: 0.12;
			position: absolute;
			bottom: 24upx;
			right: 24upx;
			border-radius: 40upx;
		}

	}

	/* 标题简介 */
	.introduce-section {
		background: #fff;
		padding: 25upx 37upx;

		.price {
			flex: 0 0 70%;
			text-align: left;
			font-size: 36upx;
			color: rgba(191, 54, 39, 1);
			display: flex;
			align-items: center;

			.unit {
				font-size: $font-sm;
			}

			.currentP {
				font-size: 36upx;
				padding: 0 12upx 0 0;
			}

			.icon-art {
				width: 76upx;
				height: 30upx;
				background: url(/static/index/icon-juan.png) no-repeat;
				background-size: 100%;
				display: inline-block;
			}

			.oriP {
				font-size: $font-sm;
				color: rgba(153, 153, 153, 1);
				text-decoration: line-through;
			}

			.saveM {
				font-size: 22upx;
				font-weight: bold;
				border-radius: 4upx;
				padding: 4upx 9upx;
				margin: 0 30upx 0 20upx;
				color: #ff2828;
				background: #ffdada;
			}

		}

		.number {
			flex: 0 0 30%;
			text-align: right;
			color: rgba(153, 153, 153, 1);
			font-size: 24upx;
		}

		.detail {
			display: flex;
			align-items: center;
			width: 100%;
		}

		.detail-desc {
			position: relative;

			.comeFrom {
				width: 30upx;
				height: 30upx;
				margin-right: 18upx;
				position: absolute;
				top: 2upx;
				left: 0;
			}

			.icon-taobao {
				background: url(/static/index/icon-taobao.png) no-repeat;
				background-size: 100%;
			}

			.icon-tianmao {
				background: url(/static/index/icon-tianmao.png) no-repeat;
				background-size: 100%;
			}

			.icon-pidd {
				background: url(/static/index/icon-pidd.png) no-repeat;
				background-size: 100%;
			}

			.title {
				font-size: 13px;
				font-weight: bold;
				color: rgba(51, 51, 51, 1);
				overflow: hidden;
				-o-text-overflow: ellipsis;
				text-overflow: ellipsis;
				display: -webkit-box;
				-webkit-line-clamp: 2;
				-webkit-box-orient: vertical;
				margin: 12px 0 5px;
				text-indent: 22px;
				width: 100%;
			}
		}

		.coupon {
			background: url(/static/index/saveBg.png) no-repeat;
			background-size: 100%;
			color: #fff;
			width: 100%;
			height: 148upx;
			padding: 4upx 40upx;
			margin: 40upx 0 0;
			position: relative;

			.btn-receive {
				width: 180upx;
				height: 120upx;
				position: absolute;
				top: 8upx;
				right: 32upx;
			}
		}

		.price_bg {
			font-size: 30upx;
			font-weight: bold;
			color: #fff;

			.priceN {
				font-size: 72upx;
				margin-right: 18upx;
			}

			.time {
				font-size: $font-sm;
				margin-top: 12upx;
			}
		}
	}

	/*  详情 */
	.pic-desc {
		background: #fff;

		.d-header {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 80upx;
			font-size: $font-base + 2upx;
			color: $font-color-dark;
			position: relative;
			margin-bottom: 10upx;

			text {
				padding: 0 20upx;
				background: #fff;
				position: relative;
				z-index: 1;
			}

			&:after {
				position: absolute;
				left: 50%;
				top: 50%;
				transform: translateX(-50%);
				width: 500upx;
				height: 0;
				content: '';
				border-bottom: 1px solid #ccc;
			}
		}
	}

	.pop-weixin {
		.pop-mask {
			position: fixed;
			z-index: 999;
			top: 0;
			right: 0;
			left: 0;
			bottom: 0;
			background: rgba(0, 0, 0, .6);
		}

		.content {
			position: fixed;
			z-index: 999;
			width: 620upx;
			height: 920upx;
			top: 50%;
			left: 50%;
			-webkit-transform: translate(-50%, -60%);
			transform: translate(-50%, -60%);
			background-color: #fff;
			text-align: center;
			overflow: hidden;
			background: url(/static/common/weixin-bg.png) no-repeat;
			background-size: 100%;
		}

		.btn {
			/* border: 1px solid red; */
			width: 444upx;
			height: 102upx;
			position: absolute;
			right: 86upx;
		}

		.btn-copy-weixin {
			bottom: 76upx;
		}
		.price{
			position: absolute;
			top: 500upx;
			color: #FFF127;
			font-size: 60upx;
			width: 100%;
			text-align: center;
		}
		.btn-copy-link {
			top: 428upx;
			right: 40upx;
		}

		.btn-jump {
			bottom: 168upx;
			right: 160upx;
			width: 312upx;
			height: 96upx;
		}

		.btn-delect {
			left: 2upx;
			width: 76upx;
			height: 76upx;
			top: 4upx;
		}

		img {
			width: 200upx;
			height: 200upx;
			border-radius: 10upx;
			position: absolute;
			top: 330upx;
			left: 60upx;
		}
	}

	.weixinCode {
		font-size: 24upx;
		font-weight: 500;
		color: rgba(246, 65, 53, 1);
		position: absolute;
		top: 88upx;
		right: 158upx;
	}
	.copyPop{
		.pop-mask{
			position: fixed;
			z-index: 999;
			top: 0;
			right: 0;
			left: 0;
			bottom: 0;
			background: rgba(0,0,0,.6);
		}
		.content{
			    position: fixed;
				z-index: 999;
				width: 550upx;
				top: 50%;
				left: 50%;
				height: 480upx;
				-webkit-transform: translate(-50%,-50%);
				transform: translate(-50%,-50%);
				background-color: #fff;
				text-align: center;
				border-radius:10upx;
				overflow: hidden;
				.top{
					height:88upx;
					line-height: 88upx;
					background:rgba(255,67,36,1);
					font-size:32upx;
					color:rgba(255,255,255,1);
					text-align: center;
					position: relative;
					display: inline-block;
					width: 100%;
					img{
						padding: 29upx 10upx;
						width:50upx;
						height:88upx;
						position: absolute;
						top: 0;
						right: 0;
						margin-right: 12px;
					}
				}
				.middle{
					width:380upx;
					height:84upx;
					background:rgba(233,233,233,1);
					margin:56upx auto 33upx;
					font-size:36upx;
					font-weight:bold;
					color:rgba(51,51,51,1);
					line-height:84upx;
					overflow: hidden;
					text-overflow: ellipsis;
					padding: 0 10upx;
				}
				.btn-copy{
					width:340upx;
					height:84upx;
					background:rgba(255,67,36,1);
					border-radius:80upx;
					font-size:36upx;
					font-weight:bold;
					color:rgba(255,255,255,1);
					line-height:84upx;
					margin:0 auto 34upx;
				}
				.detail{
					width:394upx;
					height:49upx;
					font-size:22upx;
					color:rgba(102,102,102,1);
					margin:0 auto;
				}
		}
	}
</style>
<template>
	<view class="container">
		<view class="title" @click="goHome">
			<img src="/static/common/title.png" alt="">
		</view>
		<view class="input-content">
			<view class="input-item">
				<text class="tit">手机号码</text>
				<input type="number" v-model="mobile" placeholder="请输入手机号码" maxlength="11" data-key="mobile" />
			</view>
			<view class="input-item">
				<text class="tit">图形验证</text>
				<view class='code'>
					<input  v-model="imgCode" placeholder="请输入验证码" maxlength="4" />
					<img :src="imgUrl" alt="" @click='changeImgCode' class='imgCode'>
				</view>
			</view>
			<view class="input-item">
				<text class="tit">短信验证</text>
				<view class='code'>
					<input type="number" v-model="code" placeholder="请输入验证码" maxlength="6" data-key="code" />
					<text class='getCode' v-if='!showCodeTime' @click="getCode">获取验证码</text>
					<text class="timeOut" v-if='showCodeTime'>{{countDown}}s后重发</text>
				</view>
			</view>
		</view>
		<view class="confirm-btn" @click="login">登录</view>
		<!-- <view class='other' v-if='isWeiXin'>
			<view class='title'>通过第三方登录</view>
			<view class='icon-groups'>
				<text class='weixin' @click='wechat'></text>
			</view>
		</view> -->

	</view>
</template>

<script>
	export default {
		data() {
			return {
				mobile: '',
				code: '',
				countDown: 60,
				showCodeTime: false,
				isWeiXin:true,
				imgUrl:'',
				imgCode:'',
				random:''
			}
		},
		onLoad() {
			if(this.$common.isWeiXin()){
				this.isWeiXin=true;
			}else{
				this.isWeiXin=false;
			}
			if(this.$store.getters.userInfo){
				uni.switchTab({
					url:'/pages/index/index'
				})
			}
			let obj = this.$common.urlParse();
			if (obj.code) {
				this.wechatLogin(obj.code);
			}
		
			this.changeImgCode()
		},
		methods: {
			async getCode() { //获取验证码

				let status = this.$common.isPhoneNumber(this.mobile);
				if(!status){
					this.$toast("请填写正确的手机号");
					return;
				}
				
				if(!this.$common.isImgCode(this.imgCode)){
					this.$toast("请填写正确的图形验证码");
					return;
				}
				let res = await this.$api.getCode({
					phone: this.mobile,
					smsTypeEnum: "LOGIN",
					random:this.random,
					code:this.imgCode
				})
				
				this.coutdown();
				this.$toast("验证码发送成功");
				

			},
			coutdown() { //倒计时
				this.showCodeTime = true;
				let timer = setInterval(() => {
					if (this.countDown == 1) {
						clearInterval(timer);
						this.showCodeTime = false;
					} else {
						this.countDown--;
					}
				}, 1000)
			},
			async login() { //手机号登录
				let phoneStatus = this.$common.isPhoneNumber(this.mobile);
				let codeStatus = this.$common.isCode(this.code);
				if (!phoneStatus) {
					this.$toast("请填写正确的手机号");
					return;
				}
				if (!codeStatus) {
					this.$toast("请填写正确的短信验证码");
					return;
				}
				let res = await this.$api.login({
					phone: this.mobile,
					verifCode: this.code
				})
				if(res.data.userToken){
					this.$toast("登录成功");
					this.$store.dispatch('userInfo', res.data);
					// let url = this.formatUrl();
					let url = window.location.href.substr(window.location.href.indexOf("?")+5);
					
					url=decodeURIComponent(url)
					url=decodeURIComponent(url)
					console.log(url)
					this.$commonLogic.href(url)
				}else{
					this.$toast("登陆失败");
				}
			},
			formatUrl() {
				let obj = this.$common.urlLoginParse();
				let url = '';
				for (let key in obj) {
					debugger;
					if (key == "url") {
						url += obj[key];
					} else {
						url += `&${key}=${obj[key]}`
					}
				}
				url = url.replace("&", "?")
				return url;
			},
			async wechat() {
				let url =encodeURIComponent(window.location.href);
				let res = await this.$api.wechat({
					project: 'tbk',
					returnUrl: url,
					leve: 2
				})
				console.log(444,res.data)
				location.href = res.data;
			},
			async wechatLogin(code) {
				let res = await this.$api.wechatLogin({
					code: code,
				})
				if(res.data.userToken){
					this.$store.dispatch('userInfo', res.data);
					this.$toast("登录成功");
					let url = this.formatUrl();
					this.$commonLogic.href(url)
				}else{
					this.$toast("登陆失败");
				}
				
			},
			goHome() {
				uni.switchTab({
					url: '/pages/index/index',
				})
			},
			changeImgCode(){
				let data=this.$common.getImgCode()
				this.imgUrl=data.imgUrl;
				this.random=data.random;
			}
		},

	}
</script>

<style lang='scss'>
	page {
		background: #fff;
	}

	.container {
		position: relative;
		padding: 140upx 0 50upx;
		background: #fff;

		.title {
			font-size: 68upx;
			font-weight: 400;
			color: rgba(51, 51, 51, 1);
			text-align: center;
			img{
				width: 234upx;
				height: 88upx;
				display: block;
				margin: 0 auto;
			}
		}
	}

	.input-content {
		padding: 100upx 60upx 0;
	}

	.input-item {
		display: flex;
		flex-direction: column;
		align-items: flex-start;
		justify-content: center;
		position: relative;
		padding: 18upx 30upx;
		margin-bottom: 50upx;

		&:last-child {
			margin-bottom: 0;
		}

		.tit {
			height: 50upx;
			line-height: 56upx;
			font-size: $font-lg + 2upx;
			color: rgba(153, 153, 153, 1);
			margin-bottom: 20upx;
		}

		input {
			height: 60upx;
			font-size: $font-base + 2upx;
			color: $font-color-dark;
			width: 100%;
		}
	}

	.input-item::after {
		@include border-1px(rgba(242, 242, 242, 1), bottom);
	}

	.confirm-btn {
		width: 188upx;
		height: 88upx;
		line-height: 88upx;
		border-radius: 10upx;
		background: rgba(191, 54, 39, 1);
		font-size: 34upx;
		color: rgba(255, 255, 255, 1);
		text-align: center;
		margin: 120upx auto 0;

	}

	.code {
		display: flex;
		align-items: center;
		width: 100%;

		input {
			flex: 0 0 70%;

		}

		.getCode,
		.timeOut {
			flex: 0 0 30%;
			text-align: right;
			font-size: 28upx;
			color: rgba(51, 51, 51, 1);
		}

		.timeOut {
			color: #ccc;
		}
	}

	.other {
		.title {
			font-size: $font-base;
			color: rgba(153, 153, 153, 1);
			margin: 90upx 0 40upx;
		}

		.icon-groups {
			text-align: center;

			.weixin {
				width: 72upx;
				height: 72upx;
				background: url(/static/common/wechat.png) no-repeat;
				background-size: 100%;
				display: inline-block;
				/* margin-right: 96upx; */
			}

			/* .qq {
				width: 72upx;
				height: 72upx;
				background: url(/static/temp/share_qq.png) no-repeat;
				background-size: 100%;
				display: inline-block;
			} */
		}
	}
	.imgCode{
		width: 180upx;
	}
</style>
<template>
	<!-- 底部操作菜单 -->
	<view>
		<!-- 0元购的底部 -->
		<view class="payFooter zero" v-if="isZero">
			<view class='leftsider'>
				<view class="l-left">下单补贴{{productData.zkFinalPrice}}元</view>
				<view class="l-right">￥{{productData.zkFinalPrice}}</view>
			</view>
				
			<view class="btn-groups" @click="jumpTB">
				立即购买
			</view>
		</view>
		<!-- 普通的底部 -->
		<view class="payFooter" v-if="!isZero">
			<view class='leftsider'>
				<view class="save" :class="{active: collect}" @click="toFavorite">
					<view class="icon-collect"></view>
					<text>收藏</text>
				</view>
				<view class='share'  @click="share">
					<!-- <text class='icon-share'></text> -->
					<text>领取{{productData.returnMoney}}元</text>
				</view>
			</view>
				
			<view class="btn-groups" @click="jumpTB">
				<button class="btn btn-left">￥{{productData.zkFinalPrice}}</button>
				<view class='icon-vert'></view>
				<button class="btn btn-right">购物省{{salePrice}}元</button>
			</view>
		</view>

	</view>
</template>

<script>
	export default{
		components: {
		},
		data() {
			return {
			};
		},
	 onLoad(options){
		
		},
		computed:{
			salePrice(){
				let price=parseFloat(this.productData.returnMoney)+parseFloat(this.productData.couponInfoMoney)
				return price.toFixed(2)
			}
		},
		methods:{
			//收藏
			toFavorite(){
				
				this.$emit("changeCollect");
			},
			share(){
				this.$emit('share')
			},
			jumpTB(){
				this.$emit('jumpTB')
			},
			
			 

		},
		props:{
			numId:{
				type:String,
				default:""
			},
			collect:{
				type:Boolean,
				default:false
			},
			productData:{
				type:Object,
				default:function(){
					return {}
				}
			},
			isZero:{
				type:Number,
				default:0
			},
		}

	}
</script>

<style lang='scss'>
	/* 底部操作菜单 */
	.payFooter{
		position: fixed;
		bottom: 0;
		left: 0;
		width: 100%;
		display: flex;
		align-items: center;
		background-color: #fff;
		height: 98upx;
		padding: 0 24upx 0 46upx;
		z-index:99;
		.leftsider{
			flex:0 0 44%;
			text-align: left;
			display: flex;
			align-items: center;
			.icon-collect{
				width: 48upx;
				height: 48upx;
				background: url(/static/index/icon-collect.png) no-repeat #e1e1e1;
				background-size: 100%;
			}
			.share{
				padding:20upx;	
				background:rgba(255,166,62,1);
				border-radius:36upx;
				font-size:28upx;
				font-weight:500;
				color:rgba(255,255,255,1);
				margin-left: 38upx;
				display: flex;
				align-items: center;
				height: 72upx;
				.icon-share{
					width: 34upx;
					height: 34upx;
					background: url(/static/index/icon-share.png) no-repeat;
					background-size: 100%;
					margin-right: 16upx;
					display: inline-block;
				}
				.icon-share::before{
					content:'';
				}
			}
			.save.active .icon-collect{
				background: url(/static/index/icon-collect.png) no-repeat rgba(255,166,62,1);
				background-size: 100%;
			}
		}
		.btn-groups{
			flex:0 0 56%;
			text-align: right;
			background:rgba(191,54,39,1);
			display: flex;
			align-items: center;
			border-radius: 36upx;
			height: 72upx;
			.btn{
				background:transparent;
				font-size:$font-base;
				font-weight:500;
				color:#fff;
				padding:0 14upx;
			}
			.btn::after{
				content:'';
				border: 0;
			}
			.icon-vert{
				width:1px;
				height:42upx;
				background:rgba(255,255,255,1);
			}
		}
		&.zero{
			.l-left{
				@include allCenter;
				width: 254upx;
				height: 42upx;
				border-right: 1px solid #C9C9C9;
				font-size:28upx;
				font-weight:500;
				color:rgba(102,102,102,1);
			}
			.l-right{
				@include allCenter;
				width: 190upx;
				font-size:30upx;
				font-weight:bold;
				color:rgba(191,54,39,1);
			}
			.btn-groups{
				@include allCenter;
				flex: 0 1 auto;
				width:240upx;
				height:70upx;
				margin-left: auto;
				border-radius:35upx;
				font-size:28upx;
				font-weight:500;
				color:rgba(223,223,223,1);
			}
		}
	}
	
</style>
<template>
	<view class="search" id='search'>
		<view class='top'>
			<view class="search-box">
				<view class="input-box">
					<view class='change-box' @click='changeType'>
						<!-- <view class='icon ' :class='[activeIndex==0?"icon-taobao":"icon-pindd"]'></view> -->
						<view class='icon ' :class='`icon-active${activeIndex}`'></view>
						<view class='title' v-if='activeIndex==0'>淘宝</view>
						<view class='title' v-if='activeIndex==1'>拼多多</view>
						<view class='title' v-if='activeIndex==2'>京东</view>
						<view class='icon-b'></view>
					</view>
					<input type="text" :placeholder="defaultKeyword" @input="inputChange" v-model="keyword" @confirm="doSearch(false)"
					 placeholder-class="placeholder-class" confirm-type="search">
					<view class='icon-clear' @click='clear'></view>
				</view>
				<view class='icon-change' v-if='searchList.length>0' @click='changeSt'></view>
			</view>
			<VTabhead ref="VTabhead" v-if='searchList.length>0' @changeTab="changeTab" :VTabhead_list="VTabhead_list"
			 :VTabhead_act="VTabhead_act"></VTabhead>
		</view>
		<view class="search-keyword" v-if='searchList.length==0&&!isShow'>
			<scroll-view class="keyword-box" scroll-y>

				<view class="keyword-block">
					<view class="keyword-list-header">
						<view class='hotSearch'>热门搜索</view>
					</view>
					<view class="keyword" v-if="hotKeywordList.length>0">
						<view v-for="(item,index) in hotKeywordList" @tap="doSearch(item.configVal)" :key="index">{{item.configVal}}</view>
					</view>
					<view class="null" v-if="hotKeywordList.length<=0">
						暂时没有热门搜索哦
					</view>
				</view>
				<view class="keyword-block" >
					<view class="keyword-list-header" v-if="oldKeywordList.length>0">
						<view>搜索历史</view>
						<image @tap="oldDelete" src="/static/search/delete.png"></image>
					</view>
					<view class="keyword " v-if="oldKeywordList.length>0">
						<view class='history' v-for="(item,index) in oldKeywordList" @tap="doSearch(item)" :key="index">{{item}}</view>
					</view>
				</view>
			</scroll-view>
		</view>
		<view class='searchList' v-if='searchList.length>0&&isShow'>
			<VScroll ref="VScroll" @scrollToEnd="search" :vScrollData="searchList" pullup>
				<view class='value'>
					<VGoods :goodsList='searchList' :type='type' :channel='activeIndex' @openPop='openPop'></VGoods>
					<uniLoadMore :status="VTabhead_list[VTabhead_act].loadingType"></uniLoadMore>
				</view>
			</VScroll>
		</view>
		<VEmpty v-if='searchList.length==0&&isShow&&!isLoading' :img='"/static/common/nullSearch.png"'></VEmpty>
		<uniLoadMore :status="'loading'" v-if='searchList.length==0&&isShow&&isLoading' class='loading'></uniLoadMore>
	</view>
</template>

<script>
	//引用mSearch组件，如不需要删除即可
	import VTabhead from "@/components/VTabhead"
	import VGoods from "@/components/VGoods.vue"
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	import VEmpty from "@/components/VEmpty";
	import  vPop  from '@/components/VPop.vue'
	import  popMixins  from '@/common/popMixins'
	export default {
		mixins:[popMixins],
		components: {
			VGoods,
			VTabhead,
			uniLoadMore,
			VEmpty,
			vPop
		},
		data() {
			return {
				defaultKeyword: "",
				keyword: "",
				oldKeywordList: [],
				hotKeywordList: [],
				searchList: [], //搜索到的列表
				type: 2,
				VTabhead_act: 0,
				// sort:true为升序（由小到大_asc）、false为降序（由大到小_des）；loadingType：三种状态more、loading、nomore
				VTabhead_list: [{
						text: '推荐',
						loadingType: 'more',
						pageNum: 1,
						sort: true,
						dataList: []
					},
					{
						text: '券后价',
						loadingType: 'more',
						pageNum: 1,
						sort: true,
						dataList: []
					},
					{
						text: '销量',
						loadingType: 'more',
						pageNum: 1,
						sort: false,
						dataList: []
					},
				],


				isShow: false,
				goodsList_params: {
					query: "男装",
					sort: "price_des",
					pageNum: 1,
					pageSize: 10,
					isCoupon:false
				},
				isLoading:true,
				activeIndex:0,
				userInfo: this.$store.getters.userInfo,
				isjdSharePop:false
				
				
			}
		},
		onShow() {
			this.clear();
			this.isLoading=true
			this.activeIndex=this.$common.getCookie("searchActiveIndex")||0;
			this.activeIndex=Number.parseInt(this.activeIndex);
			console.log(typeof this.activeIndex)
			// 如果store里有搜索的参数，则表示来自与分类等地方，需要加上commodityConfigId参数
			if (this.$store.getters.searchObject) {
				this.doSearch();
			}
			this.loadOldKeyword();
			this.loadHotKeyword();
			
			// this.doSearch();
			
		},
		onLoad(options) {
		},
		watch: {},
		methods: {
			reset() {
				this.VTabhead_act = 0
				this.searchList = []
				this.VTabhead_list = [{
						text: '推荐',
						loadingType: 'more',
						pageNum: 1,
						sort: true,
						dataList: []
					},
					{
						text: '券后价',
						loadingType: 'more',
						pageNum: 1,
						sort: true,
						dataList: []
					},
					{
						text: '销量',
						loadingType: 'more',
						pageNum: 1,
						sort: false,
						dataList: []
					},
				]
				this.goodsList_params = {
					pageNum: 1,
					pageSize: 10,
					isCoupon:false
				}
			},
			changeSt() { //改变
				this.type = this.type == 1 ? 2 : 1;
			},
			clear() {
				this.keyword = '';
				this.searchList = [];
				this.isShow = false;
				this.VTabhead_act = 0;
			},
			//加载历史搜索,自动读取本地Storage
			loadOldKeyword() {
				uni.getStorage({
					key: 'OldKeys',
					success: (res) => {
						var OldKeys = JSON.parse(res.data);
						this.oldKeywordList = OldKeys;
					}
				});
			},
			//加载热门搜索
			async loadHotKeyword() {
				let res = await this.$api.getByType({
					configEnum: "HOT_SEARCH"
				});
				this.hotKeywordList = res.data;
			},
			//监听输入
			inputChange(event) {
				this.isShow = false;
				this.searchList = [];
			},
			//清除历史搜索
			oldDelete() {
				uni.showModal({
					content: '确定清除历史搜索记录？',
					success: (res) => {
						if (res.confirm) {
							this.oldKeywordList = [];
							uni.removeStorage({
								key: 'OldKeys'
							});
						} else if (res.cancel) {}
					}
				});
			},
			//执行搜索
			doSearch(key) {
				// if(this.activeIndex==2){//京东必须登录
				// 	if(!this.userInfo){
				// 		let url=encodeURIComponent(`${window.location.href}`)
				// 		url=`/pages/public/login?url=${url}`
				// 		uni.navigateTo({
				// 			url:url
				// 		})
				// 	}
				// }
				this.reset()
				key = key || this.keyword || this.defaultKeyword;
				this.keyword = key;

				// 如果store里有搜索的参数，则表示来自与分类等地方，需要加上commodityConfigId参数
				if (this.$store.getters.searchObject) {
					this.keyword = this.$store.getters.searchObject.val;
					// 注意这里传入二级类目id，commodityConfigId；取的是parentId
					this.$set(this.goodsList_params, 'commodityConfigId', this.$store.getters.searchObject.parentId)
					this.isShow = true;
					// 由于加了commodityConfigId，参数设置完后将store的searchObject清空，防止影响后面的正常搜索
					this.$store.dispatch('searchObject', null)
				}else{
					// 用户手动搜索的添加该参数
					this.$set(this.goodsList_params, 'searchFlag', 1)
					
					//保存为历史 
					// 只有在搜索页面手动输入或点击的才保存
					this.saveKeyword(this.keyword); 
				}
				this.search();
				
				
			},
			//保存关键字到历史记录
			saveKeyword(keyword) {
				uni.getStorage({
					key: 'OldKeys',
					success: (res) => {
						var OldKeys = JSON.parse(res.data);
						var findIndex = OldKeys.indexOf(keyword);
						if (findIndex == -1) {
							OldKeys.unshift(keyword);
						} else {
							OldKeys.splice(findIndex, 1);
							OldKeys.unshift(keyword);
						}
						//最多10个纪录
						OldKeys.length > 30 && OldKeys.pop();
						uni.setStorage({
							key: 'OldKeys',
							data: JSON.stringify(OldKeys)
						});
						this.oldKeywordList = OldKeys; //更新历史搜索
					},
					fail: (e) => {
						var OldKeys = [keyword];
						uni.setStorage({
							key: 'OldKeys',
							data: JSON.stringify(OldKeys)
						});
						this.oldKeywordList = OldKeys; //更新历史搜索
					}
				});
			},
			//搜索结果
			async search() {
				//请求前 先设置请求参数
				this.setParams()

				let VTabhead_item = this.VTabhead_list[this.VTabhead_act]
				//如果是正在加载或是没有更多了则不再请求，防止重复加载
				if (VTabhead_item.loadingType === 'loading' || VTabhead_item.loadingType === 'noMore') {
					return;
				}
				VTabhead_item.loadingType = 'loading';
				let res
				if(this.activeIndex==0){//淘宝
					 res=await this.$api.getBeInCommonUseQuery(this.goodsList_params);
				}else if(this.activeIndex==1){//拼多多
					 res=await this.$api.getPddDdkGoods(this.goodsList_params);
					
				}else{//京东
					res=await this.$api.getCateGoodList(this.goodsList_params);
				}
				
				let goodsList=""
				this.isLoading=false
				if(res.data){
					goodsList =res.data;
					this.isShow=true;
				}else{
					goodsList=[];
					this.isShow=true;
				}
				VTabhead_item.dataList.push(...goodsList)
				// this.saveKeyword(this.keyword); //保存为历史 
				// 用searchList变量给VGoods组件展示商品
				this.searchList = VTabhead_item.dataList
				//判断是否还有数据， 有改为 more， 没有改为noMore 
				// 来自淘宝的接口可能出现某一页数量不足了，但下一页还有数据的情况，故只按照有没有数据来判断
				if (!goodsList.length) {
					VTabhead_item.loadingType = 'noMore';
					return
				} 
				VTabhead_item.loadingType = 'more';
				
				VTabhead_item.pageNum++

			},

			changeTab({
				index,
				VTabhead_list
			}) {
				// 滚动到顶部
				this.$refs.VScroll.scrollTo(0, 20)
				//点击已选中的选项时，切换排序，要将数据清空
				if (this.VTabhead_act == index) {
					this.$set(this.VTabhead_list[index], 'dataList', [])
				}
				this.VTabhead_act = index;
				this.VTabhead_list = VTabhead_list;
				// 当这个选项没有数据或为空的时候才请求，否在就直接用原来的数据
				if (!this.VTabhead_list[index].dataList || this.VTabhead_list[index].dataList == 0) {
					this.search();
				} else {
					this.searchList = this.VTabhead_list[index].dataList
				}

			},
			//返回搜索接口所需的参数
			setParams() {
				let sort = this.VTabhead_list[this.VTabhead_act].sort
				let pageNum = this.VTabhead_list[this.VTabhead_act].pageNum
				let sortName=this.activeIndex==1?'sortType':'sort'; //1是拼多多，淘宝和京东一样
				
				
				let sortValue;

				if (this.VTabhead_act == 0) {//推荐
					sortValue=this.activeIndex==1?'0':''
					
				} else if (this.VTabhead_act == 1) {//劵后价
					if (sort) {
						sortValue=this.activeIndex==1?'9':'price_asc'
					} else {
						sortValue=this.activeIndex==1?'10':'price_des'
					}

				} else if (this.VTabhead_act == 2) {//销量
					if (sort) {
						sortValue=this.activeIndex==1?'5':'total_sales_asc'
					} else {
						sortValue=this.activeIndex==1?'6':'total_sales_des'
					}
				}
				this.$set(this.goodsList_params, sortName, sortValue)
				this.$set(this.goodsList_params, 'pageNum', pageNum)
				
				if(this.activeIndex==1){
					this.$set(this.goodsList_params, 'keyword', this.keyword)
				}else{
					this.$set(this.goodsList_params, 'query', this.keyword)
				}
				
			},
			changeType(){
				uni.navigateTo({
					url: `/pages/search/channlType`,
				});
			},
			openPop(text){
				let that=this;
				uni.showModal({
				    title: '是否分享到微信',
				    content: text,
				    success: function (res) {
				        if (res.confirm) {
				           
				            that.$copyText(text).then(function(){
				            	that.$toast('复制成功')
				            	setTimeout(function() {
				            		window.open('weixin://');
				            	}, 300);
				            },function(){
				            	that.$toast('复制失败，请稍后重试')
				            })
							
				        } else if (res.cancel) {
				            console.log('用户点击取消');
				        }
				    }
				});
			}


		}
	}
</script>
<style lang="scss">
	page {
		background: #fff;
		input{
			line-height: normal；
		}
	}

	.top {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		z-index: 2;
	}

	.search-box {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 24upx;
		background: rgba(242, 242, 242, 1);

		.input-box {
			width: 90%;
			flex-shrink: 1;
			display: flex;
			justify-content: center;
			align-items: center;
			position: relative;

			input {
				width: 100%;
				-webkit-appearance: none;
				-moz-appearance: none;
				appearance: none;
				background-color: #ffffff;
				height: 62upx;
				background: #fff;
				border-radius: 30upx;
				font-size: 26upx;
				font-weight: 500;
				color: rgba(51, 51, 51, 1);
				padding-left: 33upx;
			}

			.icon-clear {
				position: absolute;
				top: 0;
				right: 0;
				margin-right: 10upx;
				width: 66upx;
				height: 66upx;
				background: url(/static/search/icon-clear.png) no-repeat center center;
				background-size: 40%;
				z-index: 3;
				box-sizing: border-box;
			}
		}

		.icon-change {
			width: 36upx;
			height: 36upx;
			background: url(/static/my/icon-change.png) no-repeat;
			background-size: 100%;
		}
	}

	.placeholder-class {
		color: #9e9e9e;
	}

	.search-keyword {
		width: 100%;
		background-color: rgb(242, 242, 242);
		padding-top: 100upx;
	}

	.keyword-box {
		border-radius: 10upx 10upx 0 0;
		background-color: #fff;
		padding: 30upx 24upx;

		.keyword-block {
			margin-bottom: 30upx;

			.keyword-list-header {
				width: 100%;
				font-size: 28upx;
				font-weight: bold;
				color: rgba(51, 51, 51, 1);
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin: 30upx 0;

				image {
					width: 30upx;
					height: 30upx;
				}

				.hotSearch {
					color: rgba(191, 54, 39, 1);
				}
			}

			.keyword {
				display: flex;
				flex-flow: wrap;
				justify-content: flex-start;

				view {
					font-size: 24upx;
					font-weight: 400;
					color: rgba(51, 51, 51, 1);
					background: rgba(242, 242, 242, 1);
					border-radius: 24upx;
					padding: 10upx 20upx;
					margin: 10upx 20upx 20upx 0;
				}

				.history {
					background-color: #fff;
				}
			}

			.null {
				text-align: center;
			}
		}
	}

	.searchList {

		// padding-top: 220upx;
		// position: relative;
		.title {
			background-color: rgb(242, 242, 242);
			padding: 20upx 0;
		}

		.value {
			padding-top: 30upx;
			border-radius: 10upx 10upx 0 0;
		}
	}

	.VScroll {
		position: absolute;
		top: 198upx;
		bottom: 0;
		left: 0;
		right: 0;
		overflow: hidden;
	}
	.VEmpty{
		padding-top: 240upx;
	}
	.loading{
		padding-top: 240upx;
	}
	.change-box{
		display: flex;
		align-items: center;
		justify-content: space-around;
		flex: 0 0 20%;
		margin-right: 26upx;
		.title{
			font-size: 26upx;
		}
		.icon{
			width:30upx;
			height:30upx;
			border-radius:4upx;
		}
		.icon-active0{
			background: url(/static/index/icon-taobao.png) no-repeat;
			background-size: 100%;
		}
		.icon-active1{
			background: url(/static/index/icon-pidd.png) no-repeat;
			background-size: 100%;
		}
		.icon-active2{
			background: url(/static/index/icon-jd.jpg) no-repeat;
			background-size: 100%;
		}
		.icon-b{
			width:12upx;
			height:10upx;
			background: url(/static/search/icon-b.png) no-repeat;
			background-size: 100%;
		}
	}
	
</style>
<template>
	<view class="channlType">
		<view class='title'>搜索渠道</view>
		<view class='content'>
			<view class='item' v-for="(item,index) in list" :key='index' :class='[item.id==activeIndex?"active":"",index%2==0?"":"even"]' @click='choose(item.id)'>
				<view>{{item.title}}</view>
				<view class='icon'></view>
			
			</view>
			
		</view>
		
	</view>
	
</template>

<script>
	export default {
		data() {
			return {
				list:[
					{
						id:0,
						title:'淘宝',
					},
					{
						id:1,
						title:'拼多多',
					},
					{
						id:2,
						title:'京东',
					}
				],
			activeIndex:0
			};
		},
		onLoad(options){
			this.activeIndex=this.$common.getCookie("searchActiveIndex")||0;
			
		},
		methods:{
			choose(id){
				this.activeIndex=id;
				this.$common.setCookie("searchActiveIndex",id , 30);
				uni.switchTab({
					url: `/pages/search/search`
				})
				
			}
		}
	}
</script>

<style lang='scss'>
	.channlType{
		padding: 24upx;
		.title{
			font-size:28upx;
			font-weight:bold;
			color:rgba(51,51,51,1);
			padding: 35upx 0;
		}
		.content{
			display: flex;
			flex-wrap: wrap;
			align-items: center;
			.item{
				width: 338upx;
				height: 84upx;
				padding: 29upx 29upx 29upx 24upx;
				display: flex;
				align-items: center;
				justify-content:space-between;
				background:rgba(237,237,237,1);
				color:rgba(102,102,102,1);
				margin-bottom: 26upx;
			}
			.active{
				background:rgba(247,226,224,1);
				color:rgba(191,54,39,1);
				.icon{
					width: 32upx;
					height: 22upx;
					background: url(/static/search/icon-right.png) no-repeat;
					background-size: 100%;
				}
			}
			.even{
				margin-left: 26upx;
			}
		}
		
	}
	

</style>
<template>
	<view>

	</view>
</template>

<script>
	export default {
		components: {

		},
		data() {
			return {

			}
		},
		props: {
			propName: {
				type: Number,
				default: 0
			},
		},
		onLoad() {


		},
		methods: {

		}
	}
</script>

<style lang="scss">

</style>
<template>
	<view class="container">
		<VScroll  >
			<view class='set'>
				<view class="list-cell" @click='TaoBao'>
					<text class="cell-tit">淘宝授权</text>
					<text class="cell-tip"  v-if='taobaoAuth==1'>取消授权</text>
					<text class="cell-tip" v-if='taobaoAuth==0'>去授权</text>
					<text class="cell-more yticon icon-you"></text>
				</view>
			</view>
		</VScroll>
		<view class='btn-logout' @click="toLogout">退出当前账户</view>
	</view>
	
</template>

<script>
	import {  
	    mapMutations  
	} from 'vuex';
	export default {
		data() {
			return {
				taobaoAuth:0,
				taobaoObj:{},
				client_id:23709391,//淘宝授权配置id
				state:'tb',
				returnUrl:'',
				userInfo:this.$store.getters.userInfo
				
			};
		},
		onLoad(option) {
			this.state=option.returnUrl?encodeURIComponent(option.returnUrl):encodeURIComponent(window.location.href);//判断是否从商品详情跳转授权
			
		},
		onShow(){
			this.userInfo=this.$store.getters.userInfo;
			if(!this.userInfo){
				return
			}
			this.taobaoAuth=this.userInfo.taobaoAuth;
			this.taobaoObj=this.$common.urlParse();

			if(JSON.stringify(this.taobaoObj)!='{}'&&this.userInfo&&this.taobaoAuth==0){
				if(this.taobaoObj.code){
					this.getTooken();
				}
			}
		},
		methods:{
			navTo(url){
				this.$toast(`跳转到${url}`);
			},
			//退出登录
			toLogout(){
				uni.showModal({
				    content: '确定要退出登录么',
				    success: (e)=>{
				    	if(e.confirm){
				    		this.loginOut();
				    		
				    	}
				    }
				});
			},
			async loginOut(){
				let res= await this.$api.exit();
				this.$store.dispatch('userInfo', null);
				this.$toast("退出登录成功");
				uni.switchTab({
					url: `/pages/user/user`
				})
			},
			TaoBao(){
				if(this.taobaoAuth==0){
					this.bindTaoBao();
				}else if(this.taobaoAuth==1){
					this.cancelTaobaoAuth();
				}
			},
			bindTaoBao(){//跳转淘宝
				let that=this;
				uni.showModal({
				    content: '确定淘宝授权？',
				    success: (e)=>{
				    	if(e.confirm){
				    		let url=`https://oauth.taobao.com/authorize?response_type=code&client_id=${that.client_id}&redirect_uri=${that.state}&state=tb&view=wap`;
				    		location.href=url;
				    	}
				    }
				});
			
				
			},
			cancelTaobaoAuth(){//取消授权
				uni.showModal({
				    content: '确定取消淘宝授权？',
				    success:async (e)=>{
				    	if(e.confirm){
				    		let res= await this.$api.cancelTaobaoAuth();
				    		this.taobaoAuth=res.data.taobaoAuth;
								this.userInfo.taobaoAuth=res.data.taobaoAuth
								this.$store.dispatch('userInfo',this.userInfo)
							this.$toast("取消成功");
				    	}
				    }
				});
				
			},
			async getTooken(){
				// debugger;
				let res= await this.$api.getToken({
					code:this.taobaoObj.code,
					note:this.userInfo.id
				});
				this.taobaoAuth=res.data.taobaoAuth;
				this.userInfo.taobaoAuth=res.data.taobaoAuth
				this.$store.dispatch('userInfo',this.userInfo)
				let userInfo=this.$store.getters.userInfo;
				this.$toast("授权成功");
			}
		}
	}
</script>

<style lang='scss'>
	.VScroll{
		top: 0;
	}
	.list-cell{
		display:flex;
		align-items:baseline;
		padding: 20upx $page-row-spacing;
		line-height:60upx;
		position:relative;
		background: #fff;
		justify-content: center;
		&.log-out-btn{
			margin-top: 40upx;
			.cell-tit{
				color: $uni-color-primary;
				text-align: center;
				margin-right: 0;
			}
		}
		&.cell-hover{
			background:#fafafa;
		}
		&.b-b:after{
			left: 30upx;
		}
		&.m-t{
			margin-top: 16upx; 
		}
		.cell-more{
			align-self: baseline;
			font-size:$font-lg;
			color:$font-color-light;
			margin-left:10upx;
		}
		.cell-tit{
			flex: 1;
			font-size: $font-base + 2upx;
			color: $font-color-dark;
			margin-right:10upx;
		}
		.cell-tip{
			font-size: $font-base;
			color: $font-color-light;
		}
	}
	.list-cell::after{
		@include border-1px(rgba(242,242,242,1),bottom);
		}
	.set{
		padding-top: 20upx;
		background: $page-color-base;
	}
	.btn-logout{
		position: fixed;
		bottom: 0;
		left: 0;
		height:98upx;
		background:rgba(191,54,39,1);
		line-height: 98upx;
		color: #fff;
		width: 100%;
		text-align: center;
		font-size:34upx;
		font-weight:500;
		}
</style>
<!--我的页面组件-->
<template>
	<view class='aboutUs'>
		<view class='top'>
			<img src="/static/common/logo.jpg" alt="">
			<view class='title'>淘多多</view>
			<!-- <view class='value'>当前版本号：8.6.10</view> -->
		</view>
		<view class='middle'></view>
		<view class='bottom'>
			<VMyList :list='list' @choose='choose'></VMyList>
		</view>
	</view>
</template>

<script>
	import VMyList from '@/components/VMyList';
	export default {
		data() {
			return {
				list: [{
						id: 0,
						imgSrc: '',
						title: '隐私政策',
						tip: ''
					},
					{
						id: 1,
						imgSrc: '',
						title: '商务合作',
						tip: ''
					},
					{
						id: 2,
						imgSrc: '',
						title: '联系我们',
						tip: ''
					}
				]
			}
		},
		props: {
			
		},
		methods: {
			choose(id) {
				let url = ''
				switch (id) {
					case 0:
						url = `/pages/user/policy?id=${id}`;
						break;
					case 1:
						url = `/pages/user/policy?id=${id}`;
						break;
					case 2:
						url = '/pages/user/contactUs';
						break;
				}
				uni.navigateTo({
					url: url
				})
			
			},
		},
		components:{
			VMyList
		}
	}
</script>

<style  lang='scss'>
	.aboutUs{
		.top{
			padding:40upx 0;
			text-align: center;
			img{
				width: 120upx;
				height: 120upx;
				border-radius:20upx;
				margin: 0 auto 20upx;
				display: block;
			}
			.title{
				font-size:$font-base;
				color:rgba(51,51,51,1);
				margin-bottom: 20upx;
			}
			.value{
				font-size:24upx;
				color:rgba(51,51,51,1);
			}
		}
		.middle{
			background: #f2f2f2;
			height: 30upx;
		}
	}
	
</style>
<!-- 绑定手机 -->
<template>
	<view class="bindPhone">
		<VPhone :type="2"></VPhone>
	</view>
</template>

<script>
	import VPhone from "@/components/VPhone"
	export default {
		components: {
			VPhone
		},
		data() {
			return {

			}
		},
		props: {

		},
		onLoad() {


		},
		methods: {

		}
	}
</script>

<style lang="scss">
	.bindPhone {
		border-top: 20upx solid #f5f5f5;
	}
</style>
<template>
	<view class='myCollection browsHistory'>
		<VChangeType @changeType='changeType'></VChangeType>
		<view class='content'>
				<VScroll  class="contentSc" ref="VScroll" @scrollToEnd="scroll" :vScrollData="allList" pullup>
				<view class='main'>
					<VGoods :goodsList="collectList"  :type='type' v-if='collectList.length>0'  ></VGoods>
					<VEmpty v-if='collectList.length==0&&!isCollect' :img='"/static/common/nullHistory.png"'></VEmpty>
					<uniLoadMore :status="loadingType" v-if='collectList.length>0&&isShowLoad'></uniLoadMore>
				</view>
				<view v-if='!isCollect'>
					<VTitleClass :value='"为你推荐"'></VTitleClass>
					<VGoods :goodsList="recommondList"  v-if='recommondList.length>0'></VGoods>
					<uniLoadMore :status="loadingType2"></uniLoadMore>
				</view>
				
			</VScroll>
		</view>
	</view>
</template>

<script>
	import VTitleClass from '@/components/VTitleClass';
	import VChangeType from '@/components/VChangeType';
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	import VEmpty from "@/components/VEmpty";
	export default {
		data() {
			return {
				collectList:[],
				page:1,
				pageSize:10,
				pageR:1,//为你推荐的分页
				recommondList:[],//为你推荐数据
				allList:[],
				isCollect:true,
				pullup:true,
				type:2,
				isAllCheck:false,
				loadingType: 'more',
				isScroll:true,
				loadingType2:'more',
				isShowLoad:true
			};
		},
		onShow(option){
			this.isScroll=true;
			this.loadingType='more';
			this.loadingType2='more'
			this.page=1;
			this.pageR=1;
			this.recommondList=[];
			this.collectList=[];
			this.allList=[];
			this.isCollect=true;
			this.inint();
			this.getRecommond();
			this.isShowLoad=true;
		},
		watch: {
			loadingType(val){
				if(val=="noMore"){
					this.isShowLoad=false;
				}
			}
		},
		computed:{
		},
		components: {
			VTitleClass,
			VChangeType,
			uniLoadMore,
			VEmpty
		},
		onNavigationBarButtonTap(e){
			if(e.index==0){
				this.clear();
			}
		},
		methods:{
			scroll(){
				if(this.isScroll){
					if(this.isCollect){
						this.inint();
					}else if(this.pageR<21){
						this.getRecommond();
					}else{
					}
				}
				
				
			},
			async inint(){
				if (this.loadingType === 'loading' || this.loadingType === 'noMore') {
					return;
				}
				this.loadingType  = 'loading';
				
				let res= await this.$api.getBrowseHistory({
					pageNum:this.page,
					pageSize:this.pageSize
					// terraceTypeEnum:"TAOBAO"
				});
				
				if (res.data.list) {
					this.isScroll=true;
					if (this.page == 1) {
						this.collectList = res.data.list
					} else {
						this.collectList=this.collectList.concat(res.data.list)
					}
					this.allList=this.allList.concat(this.collectList);
					
					if (this.collectList.length >= res.data.total) {
						this.isCollect=false;
						this.loadingType  = 'noMore';
						return
					} else {
						this.loadingType  = 'more';
						this.page++;
					}
					
				}else{
					this.isCollect=false;
				}
			},
			async getRecommond(){
				if (this.loadingType2 === 'loading' || this.loadingType2 === 'noMore') {
					return;
				}
				this.loadingType2  = 'loading';
				
		
				let res= await this.$api.getToYouRecommend({
					pageNum:this.pageR,
					pageSize:this.pageSize
				});
				if(res.data){
					if(this.pageR==1){
						this.recommondList=res.data;
					}else{
						this.recommondList=this.recommondList.concat(res.data);
					}
					this.loadingType2='more';
					this.allList=this.allList.concat(this.recommondList);
					if(this.pageR==20){
						this.loadingType2='noMore';
						return;
					}
					this.pageR++;
				}else{
					this.loadingType2='noMore';
				}
				
				
			},
			changeType(){
				this.type=this.type==1?2:1;
				
			},
			 clear(){
				 if(this.collectList.length<=0){
					 this.$toast("浏览记录已清空");
				 }else{
					 let that=this;
					 uni.showModal({
					 	content: '确定清除浏览记录？',
					 	success:async (res) => {
					 		if (res.confirm) {
					 			let res= await that.$api.doWipeData();
								that.$toast("浏览记录已清空");
					 			that.collectList=[];
					 			that.page=0;
								that.isShowLoad=true;
								that.allList=that.recommondList;
								that.isCollect=false;
					 		} else if (res.cancel) {
					 			
					 		}
					 	}
					 });
				 }
				
				
				
			}
		}
	}
</script>
<style lang='scss'>
	.main{
		padding:20upx 0;
	}
	.VTitleClass{
		padding-bottom: 40upx;
	}
	.contentSc{
		bottom: 0;
	}
</style>
<template>
	<view class='contactUs'>
		<img :src="usData.qrCode" alt="">
		<view class='title'>{{usData.remark}}</view>
		<view class='list'>
			<view class='item'>
				<view class='item-t'>客服电话：</view>
				<view class='item-v item-blue'><a :href="tel">{{usData.telephone}}</a></view>
			</view>
			<view class='item'>
				<view class='item-t'>客服微信：</view>
				<view class='item-v'>{{wxCode}}</view>
				<view class='btn btn-copy' 
					v-clipboard:copy="wxCode"
					  v-clipboard:success="onCopy"
					  v-clipboard:error="onError">复制</view>
			</view>
		</view>
		<view class='title bottom'>人工服务时间：工作日9：00-24：00</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				usData:'',
				tel:'',
				wxCode:''
			}
		},
		onLoad(){
			this.init();
		},
		methods: {
			async init(){
				let res= await this.$api.getContactUs();
				this.usData=res.data;
				this.tel=`tel:${this.usData.telephone}`
				this.wxCode = this.$commonLogic.randomWX(this.usData.qq) 
			},
			onCopy(){
				this.$toast("复制成功");
			},
			onError(){
			  this.$toast("复制失败");
			}
		}
	}
</script>

<style lang='scss'>
	.contactUs{
		margin: 0 auto;
		img{
			width:210upx;
			height:210upx;
			margin: 84upx auto 0;
		}
		.title{
			font-size:24upx;
			color:rgba(153,153,153,1);
			margin-bottom: 70upx;
			text-align: center;
		}
		.item{
			display: flex;
			align-items: center;
			line-height: 70upx;
			margin:0 auto;
			font-size:24upx;
			font-weight:bold;
			color:rgba(51,51,51,1);
			justify-content: center;
			.item-blue{
				a{
					color:#4B93FF;
					text-decoration: underline;
				}
			}
			.btn-copy{
				width:60upx;
				height:36upx;
				text-align: center;
				line-height: 36upx;
				background:rgba(255,255,255,1);
				border:2upx solid rgba(153, 153, 153, 1);
				border-radius:10upx;
				font-size:20upx;
				color:rgba(153,153,153,1);
				margin-left: 20upx;
				position: relative;
			}
			
		}
		.bottom{
			margin-top: 50upx;
		}
	}
	
</style>
<template>
	<view class='myCollection'>
		<VChangeType :isChange='false'></VChangeType>
			<!-- <VChangeType @changeType='changeType'></VChangeType> -->
		<view class='content'>
			<VScroll :class='{"contentSc":!isBottom}' ref="VScroll" @scrollToEnd="scroll" :vScrollData="allList" pullup>
				<view class='main'>
					 <VGoods :goodsList="collectList" @check='check' :comFrom="true" :url='"myCollect"' :type='type' v-if='collectList.length>0'
					  :isDelect='isDelect' :isNoSales='isNoSales' :isClick='!isBottom'></VGoods>
					<VEmpty v-if='collectList.length==0&&!isCollect' :img='"/static/common/nullCollect.png"'></VEmpty>
					<uniLoadMore :status="loadingType" v-if='collectList.length>0&&isShowLoad'></uniLoadMore>
				</view>
				<view v-if='!isCollect'>
					<VTitleClass :value='"为你推荐"'></VTitleClass>
					<VGoods :goodsList="recommondList" v-if='recommondList.length>0'></VGoods>
					<uniLoadMore :status="loadingType2" v-if='recommondList.length>0'></uniLoadMore>
				</view>

			</VScroll>
		</view>

		<view class='bottom' v-if='isBottom>0'>
			<view class='leftsider' @click='allCheck()'>
				<view :class='isAllCheck?"icon-check icon":"icon-unCheck icon"'></view>
				<view class='name'>全选</view>
			</view>
			<view class='rightsider'>
				<view class='btn-delect' @click='delect'>删除</view>
			</view>

		</view>
	</view>
</template>

<script>
	import VTitleClass from '@/components/VTitleClass';
	import VChangeType from '@/components/VChangeType';
	import uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';
	import VEmpty from "@/components/VEmpty";

	export default {
		data() {
			return {
				collectList: [],
				page: 1,
				pageSize: 10,
				pageR: 1, //为你推荐的分页
				recommondList: [], //为你推荐数据
				allList: [],
				isCollect: true,
				type: 2,
				isBottom: false,
				isAllCheck: false,
				isDelect: false, //是否有删除,
				isNoSales: false, //是否有销量,
				loadingType: 'more',
				loadingType2: 'more',
				isShowLoad:true


			};
		},
		onShow(option) {
			this.page = 1;
			this.pageR = 1;
			this.collectList = [];
			this.recommondList = [];
			this.isCollect = true;
			this.loadingType = 'more';
			this.loadingType2 = 'more'
			this.allList = [];
			this.inint();
			this.getRecommond();
			this.isShowLoad=true;


		},
		onLoad(option) {
			// uni.setNavigationBarTitle({
			// 	title: '新的标题'
			// });
		},
		watch: {
			loadingType(val){
				if(val=="noMore"){
					this.isShowLoad=false;
				}
			}
		},
		computed: {},
		components: {
			VTitleClass,
			VChangeType,
			uniLoadMore,
			VEmpty
		},
		onNavigationBarButtonTap(e) {
			if (e.index == 0 && this.collectList.length != 0) {
				this.isBottom = !this.isBottom;
				this.isDelect = !this.isDelect;
			} else {
				this.$toast('请先收藏')
			}
		},
		methods: {
			async scroll() {
				if (this.isCollect) {
					await this.inint();
				} else if (this.pageR < 21) {
					await this.getRecommond();
				} else {}

			},
			async inint() {

				if (this.loadingType === 'loading' || this.loadingType === 'noMore') {
					return;
				}

				this.loadingType = 'loading';
				let res = await this.$api.getCollectRecord({
					pageNum: this.page,
					pageSize: this.pageSize
				});
				if (res.data.list) {
					if (this.page == 1) {
						this.collectList = res.data.list
					} else {
						this.collectList = this.collectList.concat(res.data.list)
					}

					if (this.collectList.length >= res.data.total) {
						this.isCollect = false;
						this.loadingType = 'noMore';
					} else {
						this.loadingType = 'more';
					}
					this.page++;
				} else {
					this.isCollect = false;
					this.loadingType = 'noMore';
				}

				this.collectList.forEach(item => { //获取数据时加入isCheck字段
					if (typeof item.isCheck == "undefined" && !this.isAllCheck) {
						this.$set(item, 'isCheck', false);
					} else if (this.isAllCheck) {
						this.$set(item, 'isCheck', true);
					}

				})
				this.allList = this.allList.concat(this.collectList);

			},
			async getRecommond() {
				if (this.loadingType2 === 'loading' || this.loadingType2 === 'noMore') {
					return;
				}
				this.loadingType2 = 'loading';
				let res = await this.$api.getToYouRecommend({
					pageNum: this.pageR,
					pageSize: this.pageSize
				});
				if (res.data) {

					if (this.pageR == 1) {
						this.recommondList = res.data;
					} else {
						this.recommondList = this.recommondList.concat(res.data);
					}
					this.loadingType2 = 'more'
					if (this.pageR == 20) {
						this.loadingType2 = 'noMore'
					}
					this.pageR++;
				} else {
					this.loadingType2 = 'noMore'
				}



				this.allList = this.allList.concat(this.recommondList);

			},
			changeType() {
				this.type = this.type == 1 ? 2 : 1;

			},
			allCheck() {
				this.isAllCheck = !this.isAllCheck;
				if (this.isAllCheck) {
					this.collectList.forEach(item => {
						item.isCheck = true;
					})
				} else {
					this.collectList.forEach(item => {
						item.isCheck = false;
					})
				}
			},
			check(id) {
				this.collectList.forEach(item => {
					if (item.numIid == id) {
						item.isCheck = !item.isCheck;
					}
				})
			},
			delect() {

				if (this.collectList.length <= 0) {
					this.$toast("收藏夹已清空");
				} else {
					let that = this;
					uni.showModal({
						content: '确定删除？',
						success: (res) => {
							if (res.confirm) {
								this.operation();
							} else if (res.cancel) {

							}
						}
					});
				}

			},
			async operation() {
				let ids = '';
				this.collectList.forEach(item => {
					if (item.isCheck) {
						ids += `${item.id},`
					}
				})

				console.log(555, ids);
				let res = await this.$api.doTaobaoBatchCancelCollectHtml({
					ids: ids
				});
				this.$toast("删除成功");
				this.page = 1;
				this.pageR = 1;
				this.collectList = [];
				this.recommondList = [];
				this.isCollect = true;
				this.loadingType = 'more';
				this.loadingType2 = 'more'
				this.isBottom = false;
				this.allList = [];
				this.inint();
				this.getRecommond();
				this.isShowLoad=true;
				this.isDelect=false;

			},
			jump() {
				uni.navigateTo({
					url: `/pages/product/product?id=${id}`
				})
			}
		}
	}
</script>
<style lang='scss'>
	.bottom {
		position: fixed;
		bottom: 0;
		left: 0;
		width: 100%;
		height: 98upx;
		background: rgba(242, 242, 242, 1);
		display: flex;
		align-items: center;
		padding: 0 36upx 0 30upx;

		.leftsider {
			display: flex;
			align-items: center;
			flex: 0 0 30%;
			padding: 20upx 0;

			.icon {
				width: 30upx;
				height: 30upx;
				border-radius: 50%;
				margin-right: 30upx;
			}

			.icon-check {
				background: url(/static/my/icon-check.png) no-repeat;
				background-size: 100%;

			}

			.icon-unCheck {
				background: url(/static/my/icon-unCheck.png) no-repeat;
				background-size: 100%;

			}
		}

		.rightsider {
			flex: 0 0 70%;
			display: flex;
			justify-content: flex-end;
			align-items: center;

			.btn-delect {
				width: 150upx;
				height: 60upx;
				background: rgba(191, 54, 39, 1);
				border-radius: 30upx;
				text-align: center;
				font-size: 28upx;
				color: rgba(255, 255, 255, 1);
				line-height: 60upx;

			}
		}

	}

	.main {
		padding: 20upx 0;
	}

	.VTitleClass {
		padding-bottom: 40upx;
	}

	.contentSc {
		bottom: 0;
	}
</style>
<template>
	<view class='policy'>
		<view class='top' v-if='type!="ios"'>
				{{title}}
			 <view class='icon-left' @click='goBack'></view>
		</view>
		<view class='privacy' v-if='id==0'>
			<view class='item'>
				<view class='title'>前言</view>
					<view >
					本应用尊重并保护所有使用服务用户的个人隐私权。为了给您提供更准确、更有个性化的服务，本应用会按照本隐私权政策的规定使用和披露您的个人信息。但本应用将以高度的勤勉、审慎义务对待这些信息。除本隐私权政策另有规定外，在未征得您事先许可的情况下，本应用不会将这些信息对外披露或向第三方提供。本应用会不时更新本隐私权政策。 您在同意本应用服务使用协议之时，即视为您已经同意本隐私权政策全部内容。本隐私权政策属于本应用服务使用协议不可分割的一部分。
					</view>
			</view>
			<view class='item'>
				<view class='title'>适用范围</view>
				<view class='value'>(a) 在您注册本应用帐号时，您根据本应用要求提供的个人注册信息；</view>
				<view class='value'>(b) 在您使用本应用网络服务，或访问本应用平台网页时，本应用自动接收并记录的您的浏览器和计算机上的信息，包括但不限于您的IP地址、浏览器的类型、使用的语言、访问日期和时间、软硬件特征信息及您需求的网页记录等数据；</view>
				<view class='value'>© 本应用通过合法途径从商业伙伴处取得的用户个人数据。您了解并同意，以下信息不适用本隐私权政策：</view>
				<view class='value'>(a) 您在使用本应用平台提供的搜索服务时输入的关键字信息；</view>
				<view class='value'>(b) 本应用收集到的您在本应用发布的有关信息数据，包括但不限于参与活动、成交信息及评价详情；</view>
				<view class='value'>© 违反法律规定或违反本应用规则行为及本应用已对您采取的措施。</view>
			</view>
			<view class='item'>
				<view class='title'>信息使用</view>
				<view class='value'>(a)本应用不会向任何无关第三方提供、出售、出租、分享或交易您的个人信息，除非事先得到您的许可，或该第三方和本应用（含本应用关联公司）单独或共同为您提供服务，且在该服务结束后，其将被禁止访问包括其以前能够访问的所有这些资料。</view>
				<view class='value'>(b) 本应用亦不允许任何第三方以任何手段收集、编辑、出售或者无偿传播您的个人信息。任何本应用平台用户如从事上述活动，一经发现，本应用有权立即终止与该用户的服务协议。</view>
				<view class='value'>© 为服务用户的目的，本应用可能通过使用您的个人信息，向您提供您感兴趣的信息，包括但不限于向您发出产品和服务信息，或者与本应用合作伙伴共享信息以便他们向您发送有关其产品和服务的信息（后者需要您的事先同意）。</view>
			</view>
			<view class='item'>
				<view class='title'>披露</view>
				<view>在如下情况下，本应用将依据您的个人意愿或法律的规定全部或部分的披露您的个人信息：</view>
				<view class='value'>(a) 经您事先同意，向第三方披露；</view>
				<view class='value'>(b)为提供您所要求的产品和服务，而必须和第三方分享您的个人信息；</view>
				<view class='value'>© 根据法律的有关规定，或者行政或司法机构的要求，向第三方或者行政、司法机构披露；</view>
				<view class='value'>(d) 如您出现违反中国有关法律、法规或者本应用服务协议或相关规则的情况，需要向第三方披露；</view>
				<view class='value'>(e) 如您是适格的知识产权投诉人并已提起投诉，应被投诉人要求，向被投诉人披露，以便双方处理可能的权利纠纷；</view>
				<view class='value'>(f) 在本应用平台上创建的某一交易中，如交易任何一方履行或部分履行了交易义务并提出信息披露请求的，本应用有权决定向该用户提供其交易对方的联络方式等必要信息，以促成交易的完成或纠纷的解决。</view>
				<view class='value'>(g) 其它本应用根据法律、法规或者网站政策认为合适的披露。</view>
			</view>
			<view class='item'>
				<view class='title'>信息存储和交换</view>
				<view>本应用收集的有关您的信息和资料将保存在本应用及（或）其关联公司的服务器上，这些信息和资料可能传送至您所在国家、地区或本应用收集信息和资料所在地的境外并在境外被访问、存储和展示。</view>
			</view>
			<view class='item'>
				<view class='title'>Cookie</view>
				<view class='value'>(a) 在您未拒绝接受cookies的情况下，本应用会在您的计算机上设定或取用cookies ，以便您能登录或使用依赖于cookies的本应用平台服务或功能。本应用使用cookies可为您提供更加周到的个性化服务，包括推广服务。</view>
				<view class='value'>(b) 您有权选择接受或拒绝接受cookies。您可以通过修改浏览器设置的方式拒绝接受cookies。但如果您选择拒绝接受cookies，则您可能无法登录或使用依赖于cookies的本应用网络服务或功能。</view>
				<view class='value'>© 通过本应用所设cookies所取得的有关信息，将适用本政策。</view>
			</view>
			<view class='item'>
				<view class='title'>信息安全</view>
				<view class='value'>(a) 本应用帐号均有安全保护功能，请妥善保管您的用户名及密码信息。本应用将通过对用户密码进行加密等安全措施确保您的信息不丢失，不被滥用和变造。尽管有前述安全措施，但同时也请您注意在信息网络上不存在“完善的安全措施”。</view>
				<view class='value'>(b) 在使用本应用网络服务进行网上交易时，您不可避免的要向交易对方或潜在的交易对</view>
				<view class='value'></view>
				<view class='value'></view>
			</view>
			<view class='item'>
				<view class='title'>本隐私政策的更改</view>
				<view class='value'>(a)如果决定更改隐私政策，我们会在本政策中、本公司网站中以及我们认为适当的位置发布这些更改，以便您了解我们如何收集、使用您的个人信息，哪些人可以访问这些信息，以及在什么情况下我们会透露这些信息。</view>
				<view class='value'>(b)本公司保留随时修改本政策的权利，因此请经常查看。如对本政策作出重大更改，本公司会通过网站通知的形式告知。</view>
				<view >(b)本公司保留随时修改本政策的权利，因此请经常查看。如对本政策作出重大更改，本公司会通过网站通知的形式告知。</view>
			</view>
			
		</view>
		<view class='business' v-if='id==1'>
			<img src="/static/common/logo.jpg" v-if='!isTfl' alt="">
			<img src="/static/common/logo_tfl.png" v-if='isTfl' alt="">
			<view class='para'>
				{{name}}专注淘宝天猫省钱/赚钱的高佣平台，下单返利佣金高达95%，海量内部优惠券，少花钱，多赚钱！千万网购达人都在用的省钱生钱好帮手！
			</view>
			<view class='para'>
				 我们本着诚信为本、互利共赢的原则,期待与各企事业单位、商家、平台建立合作关系。欢迎大家来电来函洽谈供应商合作及产品推广业务。
			</view>
			<view class='bottom'>
				<view class='tell'>
					TEL:
					<a href="tel:0755-86715250">0755-86715250</a>
				</view>
				<view class='tell'>
					TEL:
					<a href="tel:0755-86531717">0755-86531717</a>
				</view>
				<view class=' email'>
					Email: wangruidong@51app.cn
				</view>
			</view>
		</view>
	</view>
</template>

<script>
	export default {
		data() {
			return {
				title:'隐私政策',
				id:0,
				type:0,
				name:'淘多多',
				isTfl:false
			}
		},
		onLoad(option) {
			this.id=option.id;
			this.name=option.title=='tfl'?'淘利返':'淘多多'
			this.isTfl=option.title=='tfl'?true:false
			if(option.id==0){
				this.title='隐私政策'
			}else{
				this.title='商务合作'
			}
			document.title=this.title
			this.type=option.type;
			uni.setNavigationBarTitle({
				title: this.title
			});
			if(option.type){
				this.type=option.type;
			}
			
		},
		onShow(){
			document.title=this.title
		},
		onHide(){
			document.title="淘多多"
		},
		onUnload(){
			document.title="淘多多"
		},
		methods: {
			goBack(){
				uni.navigateBack();
			}
		}
	}
</script>

<style lang='scss'>

.business{
	padding: 0 25upx;
	img{
		width: 120upx;
		height: 120upx;
		border-radius:20upx;
		margin: 30upx auto 90upx;
		display: block;
	}
	.para{
		font-size:24upx;
		font-weight:400;
		color:rgba(51,51,51,1);
		margin-bottom: 40upx;
		line-height: 40upx;
		text-indent: 50upx;
	}
	.tell{
		font-size:24upx;
		font-weight:bold;
		line-height: 50upx;
		text-decoration:underline;
		color:rgba(27,113,255,1);
		a{
			color:rgba(27,113,255,1);
		}
	}
	.mail{
		font-size:24upx;
		color:rgba(51,51,51,1);
		line-height: 50upx;
		font-weight:bold;
		
		/* line-height:50px; */
	}
	.bottom{
		margin-top:80upx;
		 
	}
}
.privacy{
	padding: 0 25upx 80upx;
	.item{
		font-size:24upx;
		font-weight:400;
		color:rgba(51,51,51,1);
		line-height: 40upx;
		.title{
			font-size:28upx;
			font-weight:bold;
			color:rgba(51,51,51,1);
			margin: 60upx 0 25upx;
		}
		.value{
			font-size:24upx;
			font-weight:400;
			color:rgba(51,51,51,1);
			line-height: 40upx;
		}
		.art{
			text-indent: 50upx;
		}
	}
}
.top{
	position: relative;
	font-weight: 700;
    font-size: 32upx;
    line-height: 60upx;
    text-align: center;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
	padding: 14upx 0;
	.icon-left{
		width: 82upx;
		height: 66upx;
		position: absolute;
		left: 0upx;
		top: 0upx;
		background: url(/static/common/icon-left.png) no-repeat;
		background-size: 100%;
	}
}
</style>
<template>
	<view class="cpa">
		<view class='btn-return return-bg' v-if='isShowIcon' @click='goback'></view>
		<view class='topsider' id='topsider'  v-if='cpaData'>
			<view class='btn btn-share1' v-if='isShow' @click="scrollTo(scrollIndex2)"></view>
			<img v-for='(item,index) in cpaData.topConfigVos' :key='index' @onload="imgload"  :src='item.imageUrl' alt="" >
		</view>
		 <view class='middle' v-if='cpaData'  id='middle'>
			<img v-for='(item,index) in cpaData.middleConfigVos' :key='"key1"+index' :src='item.imageUrl' alt=""  @load='load'>
		</view>
		<view class='bottomsider'  v-if='cpaData'>
			<img v-for='(item,index) in cpaData.bottomConfigVos' :key='"key2"+index'  :src='item.imageUrl' alt="">
		</view>
		<view  id='fixedTop' v-if='isShowIcon' :class='isShowButton?" btnGroup":"btnGroup btnsNone"'>
			<view  :class='isShow?"topActive top":"top"' >
				<view class='btn-return'  @click='goback'></view>
				<view class='btn btn-juan' v-if='!isShow'  @click="scrollTo(scrollIndex1)"></view>
				<view class='btn btn-share' v-if='isShow' @click="scrollTo(scrollIndex2)"></view>
			</view>
		</view>
		<view  id='fixedTop' v-if='!isShowIcon' :class='isShowButton?" btnGroup":"btnGroup btnsNone"'>
			<view  :class='isShow?"topActive topActive1 top top1":"top top1"' >
				<view class='btn btn-juan' v-if='!isShow'  @click="scrollTo(scrollIndex1)"></view>
				<view class='btn btn-share' v-if='isShow' @click="scrollTo(scrollIndex2)"></view>
			</view>
		</view>
		
	</view>
</template>

<script>
	export default {
		data() {
			return {
				cpaData:'',
				isShow:true,
				isShowButton:false,
				scrollIndex1:0,
				scrollIndex2:0,
				isShowIcon:true,
				middelData:'',
				name:''
				
			}
		},
		created() {
			this.inint();
		},
		mounted() {
		},
		onLoad(option){
			if(option.type=="ios"){
				this.isShowIcon=false;
			}
			this.name=option.title;
		},
		onShow(){
			document.title="新手攻略"
		},
		onHide(){
			document.title="淘多多"
		},
		onUnload(){
			document.title="淘多多"
		},
		onPageScroll(obj){
			if(+obj.scrollTop>=this.scrollIndex1&&+obj.scrollTop<this.scrollIndex2){
				this.isShowButton=true;
				this.isShow=true;
				return;
			}
			
			if(+obj.scrollTop<this.scrollIndex1){
				this.isShowButton=false;
				this.isShow=true;
				return;
			}
			if(+obj.scrollTop>=this.scrollIndex2){
				this.isShowButton=true;
				this.isShow=false;
				return;
			}
		},
		methods:{
			async inint(){
				let res= await this.$api.getNewStrategy();
				this.cpaData=res.data;
				
				//分出淘多多和淘利返
				this.middelData=this.cpaData.middleConfigVos;
				if(this.name=='tfl'){
					this.middelData[1].imageUrl='http://51app-image.oss-cn-hangzhou.aliyuncs.com/payment/tbk/2019/10/15/1830481194404.png'
				}
				
			},
			scrollTo(index){
				uni.pageScrollTo({
					scrollTop: index,
					duration: 300
				});
				
				 if(+index>=this.scrollIndex2){
					 this.isShowButton=true;
					 this.isShow=false;
				 }else{
					 this.isShowButton=false;
					 this.isShow=true;
				 }
				 
			},
			load(e){
				let height1=document.getElementById('topsider').offsetHeight;
				let height2=document.getElementById('middle').offsetHeight;
				let height3=document.getElementById('fixedTop').offsetHeight;
				this.scrollIndex1=height1-height3;
				this.scrollIndex2=height1+height2-height3;

			},
			goback(){
				uni.navigateBack();
			}
		},
		computed: {
			
		}
	}
</script>

<style lang="scss">
	.return-bg{
		background:url(/static/cpa/return.png) no-repeat;
		background-size: 100%;
		z-index: 999;
	}
	.btnGroup{
		position: fixed;
		top:0;
		left: 0;
		width: 100%;
		z-index: 1;
	}
	.btnsNone{
		z-index: -1;
		left: -1000upx;
	}
	
	.top{
		width: 100%;
		background:url(/static/cpa/z.jpg) no-repeat;
		background-size: 100%;
		height: 100upx;
		.btn-return{
			position: absolute;
			left: 0;
			right: 0;
			width: 100upx !important;
			height: 72upx;
		}
		.btn{
			width:300upx;
			height:72upx;
			position: absolute;
			top: 14upx;
			z-index:1;
		}
		.btn-juan{
			left: 100upx;
			background-color: transparent;

		}
		.btn-share{
			right:32upx ;
			background-color: transparent;
		}
		.btn-ios-juan{
			
		}
		.btn-ios-share{
			
		}
		.topsider,.bottomsider,.middle{
			overflow: hidden;
		}
	}
	img{
		display: block;
	}
	.item{
		width: 100%;
	}
	.top1{
		background:url(/static/cpa/z1.jpg) no-repeat;
		background-size: 100%;
		.btn{
			width: 329upx;
		}
		.btn-juan{
			left:32upx;
		}
	}
	.topActive{
		background:url(/static/cpa/s.jpg) no-repeat;
		background-size: 100%;
	}
	.topActive1{
		background:url(/static/cpa/s1.jpg) no-repeat;
		background-size: 100%;
	}
	.cpa{
		position: relative;
		.btn-return{
			width:141upx;
			height:58upx;
			position: absolute;
			top: 36upx;
			left: 0;
		}
	}
	.topsider{
		position: relative;
		.btn-share1{
			right: 56upx;
			background-color: transparent;
			width: 280upx;
			height: 72upx;
			position: absolute;
			bottom: 40upx;
			z-index: 1;
		}
	}
</style>
<template>
	<view class="container user">

		<view class="user-section">
			<image class="bg" src="/static/my/bg.png"></image>
			<view v-if='userInfo'>
				<view class="user-info-box">
					<view class="portrait-box">
						<image class="portrait" :src="userData.headImgurl||defaultImg"></image>
					</view>
					<view class="info-box">
						<view class='username'>{{userData.userName||"淘多多" }}</view>
						<view class='idNum'>ID:{{userData.id }}</view>
						<view class='idNum'>邀请码:{{userData.invitationCode }}</view>
					</view>
				</view>
				<view class='userDetail' @click="navTo('/pages/earning/earning')">
				<view class='item'>
					<view class='title' v-if='userData'>{{userData.userAssetVo.totalRevenue}}</view>
					<view class='value'>总收益</view>
				</view>
				<view class='item'>
					<view class='title'  v-if='userData'>{{userData.userAssetVo.aboutArrive}}</view>
					<view class='value'>即将到账</view>
				</view>
				<view class='item'>
					<view class='title'  v-if='userData'>{{userData.userAssetVo.balance}}</view>
					<view class='value'>账户</view>
				</view>
			</view>
			</view>
			<view class='btn-login' v-if='!userInfo' @click="login">点击登录</view>
		</view>

		<view class="cover-container">

			<!-- 订单 -->
			<view class="order-section">
				<view class="order-item" @click="navTo('/pages/order/order?state=0')" hover-class="common-hover" :hover-stay-time="50">
					<text class="yticon icon-all"></text>
					<text>全部订单</text>
				</view>
				<view class="order-item" @click="navTo('/pages/order/order?state=1')" hover-class="common-hover" :hover-stay-time="50">
					<text class="yticon icon-todo"></text>
					<text>待结算</text>
				</view>
				<view class="order-item" @click="navTo('/pages/order/order?state=2')" hover-class="common-hover" :hover-stay-time="50">
					<text class="yticon icon-down"></text>
					<text>已结算</text>
				</view>
			</view>
			<!-- 浏览历史 -->
			<view class="history-section">
				<VMyList :list='list' @choose='choose'></VMyList>
			</view>
		</view>


	</view>
</template>
<script>
	import VMyList from '@/components/VMyList';
	let startY = 0,
		moveY = 0,
		pageAtTop = true;
	export default {
		components: {
			VMyList
		},
		data() {
			return {
				userInfo: this.$store.getters.userInfo,
				coverTransform: 'translateY(0px)',
				coverTransition: '0s',
				moving: false,
				list: [{
						id: 0,
						imgSrc: '/static/my/myCollect.png',
						title: '我的收藏',
						tip: ''
					},
					{
						id: 1,
						imgSrc: '/static/my/history.png',
						title: '浏览记录',
						tip: ''
					},
					{
						id: 2,
						imgSrc: '/static/my/phone.png',
						title: '绑定手机',
						tip: ""
					},
					{
						id: 3,
						imgSrc: '/static/my/newP.png',
						title: '新手攻略',
						tip: '简单几步快速入门'
					},
					{
						id: 4,
						imgSrc: '/static/my/aboutUs.png',
						title: '关于我们',
						tip: ''
					},
					{
						id: 5,
						imgSrc: '/static/my/setUp.png',
						title: '设置',
						tip: ''
					},
					{
						id: 6,
						imgSrc: '/static/my/cashBonus.png',
						title: '现金红包',
						tip: ''
					}
				],
				userData:"",
				defaultImg:'/static/my/defaultPe.png',
				taobaoObj:""
			}
		},
		onLoad() {
				
		},
		onShow(){
			this.userInfo=this.$store.getters.userInfo;
			if(this.userInfo){
				this.init();
			}
			
		},
		methods: {
			async init(){
				let res= await this.$api.getTbkUserVo();
				this.userData=res.data;
				
				this.userInfo.taobaoAuth=res.data.taobaoAuth
				this.userInfo.id=res.data.id
				this.$store.dispatch('userInfo',this.userInfo)

				if(res.data.phone){
					let arr=res.data.phone.split("");
					arr.splice(3,4,"****");
					this.list[2].tip=arr.join("");
				}
			},
			navTo(url) {
				let wUrl=encodeURIComponent(`${window.location.href}`)
				if (!this.userInfo) {
					url = `/pages/public/login?url=${wUrl}`;
				}
				uni.navigateTo({
					url
				})
			},
			choose(id) {
				
				let url = ''
				switch (id) {
					case 0:
						url = '/pages/user/myCollection';
						break;
					case 1:
						url = '/pages/user/browsHistory';
						break;
					case 2:
						if(this.userData.phone){
							this.$toast("手机号已绑定");
							return;
						}else{
							url = '/pages/user/bindPhone';
						}
						break;
					case 3:
						url = '/pages/user/cpa';
						break;
					case 4:
						url = '/pages/user/aboutUs';
						break;
					case 5:
						url = `/pages/set/set`;
						break;
					case 6:
						url = `/pages/cashBonus/redList`;
						break;
				}
				if(id==3||id==4){
					uni.navigateTo({
						url: url
					})
				}else{
					if(!this.userInfo){
						uni.navigateTo({
							url: `/pages/public/login?url=${window.location.href}`
						})
						return;
					}
					uni.navigateTo({
						url: url
					})
				}
				
				

			},
			login(){
				uni.navigateTo({
					url: `/pages/public/login?url=${window.location.href}`
				})
			}
		}
	}
</script>
<style lang='scss'>
	%flex-center {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	%section {
		display: flex;
		justify-content: space-around;
		align-content: center;
		background: #fff;
	}

	.user-section {
		height: 520upx;
		padding: 90upx 0 0;
		position: relative;

		.bg {
			position: absolute;
			left: 0;
			top: 0;
			width: 100%;
			height: 440upx;
		}

		.userDetail {
			display: flex;
			align-items: center;
			justify-content: center;
			position: relative;
			z-index: 1;
			margin-top: 36upx;

			.item {
				flex: 0 0 33.33%;
				font-size: 28upx;
				font-weight: bold;
				color: rgba(255, 255, 255, 1);
				text-align: center;

				.title {
					margin-bottom: 10upx;
				}

				.value {
					font-size: 24upx;
					font-weight: 400;
				}
			}
		}
	}

	.user-info-box {
		position: relative;
		text-align: left;
		z-index: 1;
		padding:0 20upx;
		.portrait-box{
			position: absolute;
			left: 37upx;
			top: -4upx;
		}
		.portrait {
			width: 98upx;
			height: 98upx;
			border-radius: 50%;
		}

		.info-box {
			margin-left: 142upx;
			color: rgba(255, 255, 255, 1);

			.username {
				font-size: $font-lg+4upx;
				font-weight: bold;
				color: rgba(255, 255, 255, 1);
				margin-bottom: 24upx;
				height: 45upx;
			}

			.idNum {
				font-size: $font-sm;
				font-weight: 400;
				user-select: auto;
			}
		}
	}


	.cover-container {
		background: $page-color-base;
		margin-top: -150upx;
		position: relative;

		/* padding-bottom: 20upx; */
		.arc {
			position: absolute;
			left: 0;
			top: -34upx;
			width: 100%;
			height: 36upx;
		}
	}

	.order-section {
		@extend %section;
		padding: 20upx 0;

		.order-item {
			@extend %flex-center;
			width: 120upx;
			height: 120upx;
			border-radius: 10upx;
			font-size: $font-sm;
			color: $font-color-dark;
		}

		.yticon {
			width: 56upx;
			height: 56upx;
			margin-bottom: 13upx;
		}

		.icon-all {
			background: url(/static/my/allOrder.png) no-repeat;
			background-size: 100%;
		}

		.icon-todo {
			background: url(/static/my/todoOrder.png) no-repeat;
			background-size: 100%;
		}

		.icon-down {
			background: url(/static/my/doneOrder.png) no-repeat;
			background-size: 100%;
		}
	}

	.history-section {
		margin-top: 10upx;
		background: #fff;
	}
	.btn-login{
		width:270upx;
		height:72upx;
		background:rgba(0,0,0,0);
		border:1px solid rgba(255, 255, 255, 1);
		border-radius:36upx;
		text-align: center;
		line-height: 72upx;
		font-size:$font-base;
		color:rgba(255,255,255,1);
		z-index:1;
		position: relative;
		margin: 60upx auto 0;
	}
</style>
{
	"pages": [{
			"path": "pages/index/index",
			"style": {
				"navigationBarTitleText": "淘多多",
				"app-plus": {
					// "titleNView":{
					// 	"backgroundColor":"#BF3627",
					// 	"titleColor":"#fff"
					// }
					"titleNView": false
				}
			}
		},
		{
			"path": "pages/category/category",
			"style": {
				"navigationBarTitleText": "分类",
				"app-plus": {
					"bounce": "none"
				}
			}
		},
		{
			"path": "pages/iwant/iwant",
			"style": {
				"navigationBarTitleText": "我要赚",
				"app-plus": {
					"titleNView": false
				}
			}
		},
		{
			"path": "pages/search/search",
			"style": {
				"navigationBarTitleText": "搜索",
				"app-plus": {
					"titleNView": false
				}
			}
		},
		{
			"path": "pages/user/user",
			"style": {
				"navigationBarTitleText": "我的",
				"navigationStyle": "custom",
				"app-plus": {
					"titleNView": false
				}
			}
		},
		{
			"path": "pages/product/product",
			"style": {
				"navigationBarTitleText": "详情展示",
				"app-plus": {
					"bounce": "none",
					"titleNView": {
						"type": "transparent"
					}

				}
			}
		},
		{
			"path": "pages/index/buttonNav",
			"style": {
				"navigationBarTitleText": "淘多多",
				"app-plus": {
					"titleNView": false
				}
			}
		},
		{
			"path": "pages/index/freeToBuy",
			"style": {
				"navigationBarTitleText": "0元购"
			}
		},
		{
			"path": "pages/index/freeToBuyRule",
			"style": {
				"navigationBarTitleText": "0元购",
				"app-plus": {
					"titleNView": false
				}
			}
		},
		{
			"path": "pages/index/freeSignIn",
			"style": {
				"navigationBarTitleText": "0元购",
				"app-plus": {
					"titleNView": false
				}
			}
		},
		{
			"path": "pages/set/set",
			"style": {
				"navigationBarTitleText": "设置"
			}
		},
		{
			"path": "pages/public/login",
			"style": {
				"navigationBarTitleText": "淘多多-登录",
				"navigationStyle": "custom",
				"app-plus": {
					"titleNView": false
				}
			}
		},
		{
			"path": "pages/order/order",
			"style": {
				"navigationBarTitleText": "我的订单",
				"app-plus": {
					"bounce": "none"
				}
			}
		},
		{
			"path": "pages/earning/earning",
			"style": {
				"navigationBarTitleText": "我的收益",
				"app-plus": {
					"titleNView": {
						"button": [{
							"type": "back"
						}]
					}
				}
			}
		},
		{
			"path": "pages/earning/binAlipay",
			"style": {
				"navigationBarTitleText": "绑定支付宝"
			}
		},
		{
			"path": "pages/earning/getMoney",
			"style": {
				"navigationBarTitleText": "提现"
			}
		},
		{
			"path": "pages/earning/getMoneyResult",
			"style": {
				"navigationBarTitleText": "提现"
			}
		},
		{
			"path": "pages/user/bindPhone",
			"style": {
				"navigationBarTitleText": "绑定手机"
			}
		},
		{
			"path": "pages/user/browsHistory",
			"style": {
				"navigationBarTitleText": "浏览记录",
				"app-plus": {
					"bounce": "none",
					"titleNView": {
						"titleColor": "rgba(51,51,51,1)",
						"titleSize": "16",
						"buttons": [{
							"text": "清空",
							"fontSize": "14",
							"color": "rgba(51,51,51,1)",
							"width": "60upx",
							"background": "#ffffff"
						}]
					}
				}
			}
		},
		{
			"path": "pages/user/myCollection",
			"style": {
				"navigationBarTitleText": "我的收藏",
				"app-plus": {
					"bounce": "none",
					"titleNView": {
						"titleColor": "rgba(51,51,51,1)",
						"titleSize": "16",
						"buttons": [{
							"text": "管理",
							"fontSize": "14",
							"color": "rgba(51,51,51,1)",
							"width": "60upx",
							"background": "#ffffff"
						}]
					}
				}
			}
		},
		{
			"path": "pages/user/aboutUs",
			"style": {
				"navigationBarTitleText": "关于我们"
			}
		}, {
			"path": "pages/user/policy",
			"style": {
				"navigationBarTitleText": "淘多多",
				"app-plus": {
					"titleNView": false
				}
			}
		}, {
			"path": "pages/user/cpa",
			"style": {
				"navigationBarTitleText": "新手攻略",
				"app-plus": {
					"titleNView": false
				}
			}
		}, {
			"path": "pages/product/codeJump",
			"style": {
				"navigationBarTitleText": "二维码",
				"app-plus": {
					"titleNView": false
				}
			}
		}, {
			"path": "pages/user/contactUs",
			"style": {
				"navigationBarTitleText": "联系我们"
			}
		}
	    ,{
            "path" : "pages/forIos/fansOrder",
           "style": {
           	"navigationBarTitleText": "好友推广",
           	"app-plus": {
           		"titleNView": false
           	}
           }
		}
        ,{
            "path" : "pages/forIos/promote",
            "style": {
            	"navigationBarTitleText": "升级合伙人",
            	"app-plus": {
            		"titleNView": false
            	}
            }
        },{
            "path" : "pages/forIos/alipay",
            "style": {
            	"navigationBarTitleText": "支付宝",
            	"app-plus": {
            		"titleNView": false
            	}
            }
        }
        ,{
            "path" : "pages/forIos/downLoadApp",
		   "style": {
			"navigationBarTitleText": "下载app",
			"app-plus": {
				"titleNView": false
			}
		   }
        },{
            "path" : "pages/search/channlType",
		   "style": {
				"navigationBarTitleText": "搜索"
			   }
        }
        ,{
            "path" : "pages/index/pindd",
            "style": {
					"navigationBarTitleText": "淘多多",
					"app-plus": {
						"titleNView": false
					}
				   }
        }
        ,{
            "path" : "pages/forIos/newVersion",
            "style": {
            		"navigationBarTitleText": "新版本",
            		"app-plus": {
            			"titleNView": false
            		}
            	   }
        },{
            "path" : "pages/forIos/doubleT",
            "style": {
            		"navigationBarTitleText": "活动会场",
            		"app-plus": {
            			"titleNView": false
            		}
            	   }
        },{
            "path" : "pages/forIos/activeTeen",
            "style": {
            		"navigationBarTitleText": "双11尖货预售",
            		"app-plus": {
            			"titleNView": false
            		}
            	   }
        },{
            "path" : "pages/forIos/forIos/activeTeen",
            "style": {
            		"navigationBarTitleText": "双十一邀请好友",
            		"app-plus": {
            			"titleNView": false
            		}
            	   }
        },{
            "path" : "pages/cashBonus/upGradeDelegat",
            "style": {
            		"navigationBarTitleText": "升级团长",
            		"app-plus": {
            			"titleNView": false
            		}
            	   }
        },{
            "path" : "pages/cashBonus/firstPacket",
           "style": {
           	"navigationBarTitleText": "现金红包",
           	"app-plus": {
           		"bounce": "none",
           		"titleNView": {
           			"type": "transparent"
           		}
           
           	}
           }
        },{
            "path" : "pages/cashBonus/secondPacket",
           "style": {
           	"navigationBarTitleText": "现金红包",
           	"app-plus": {
           		"bounce": "none",
           		"titleNView": {
           			"type": "transparent"
           		}
           
           	}
           }
        },{
            "path" : "pages/cashBonus/invite",
           "style": {
           	"navigationBarTitleText": "邀请页",
           	"app-plus": {
           		"titleNView": false
           
           	}
           }
        },{
            "path" : "pages/cashBonus/redList",
          "style": {
          		"navigationBarTitleText": "红包列表",
          		"app-plus": {
          			"titleNView": true
          		}
          	   }
        },{
            "path" : "pages/cashBonus/rules",
          "style": {
          		"navigationBarTitleText": "规则",
          		"app-plus": {
          			"titleNView": false
          		}
          	   }
        },{
            "path" : "pages/activity/blackFive",
          "style": {
          		"navigationBarTitleText": "黑五",
          		"app-plus": {
          			"titleNView": false
          		}
          	   }
        },{
            "path" : "pages/activity/blackFivePrepaid",
          "style": {
          		"navigationBarTitleText": "黑五",
          		"app-plus": {
          			"titleNView": false
          		}
          	   }
        },{
            "path" : "pages/activity/taobao",
          "style": {
          		"navigationBarTitleText": "淘宝活动",
          		"app-plus": {
          			"titleNView": false
          		}
          	   }
        }
    ],
	"globalStyle": {
		"navigationBarTextStyle": "black",
		"navigationBarTitleText": "uni-app",
		"navigationBarBackgroundColor": "#FFFFFF",
		"backgroundColor": "#f8f8f8"
	},
	"tabBar": {
		"color": "#C0C4CC",
		"selectedColor": "#226DE7",
		"borderStyle": "black",
		"backgroundColor": "#ffffff",
		"list": [{
				"pagePath": "pages/index/index",
				"iconPath": "static/tabbar/index.png",
				"selectedIconPath": "static/tabbar/index_act.png",
				"text": "首页"
			},
			{
				"pagePath": "pages/category/category",
				"iconPath": "static/tabbar/category.png",
				"selectedIconPath": "static/tabbar/category_act.png",
				"text": "分类"
			},
			{
				"pagePath": "pages/iwant/iwant",
				"iconPath": "static/tabbar/iwant.png",
				"selectedIconPath": "static/tabbar/iwant_act.png",
				"text": "我要赚"
			},
			{
				"pagePath": "pages/search/search",
				"iconPath": "static/tabbar/search.png",
				"selectedIconPath": "static/tabbar/search_act.png",
				"text": "搜索"
			},
			{
				"pagePath": "pages/user/user",
				"iconPath": "static/tabbar/my.png",
				"selectedIconPath": "static/tabbar/my_act.png",
				"text": "我的"
			}
		]
	}
}
["/cashBonus/banner.png","/cashBonus/btn-invitate.png","/cashBonus/firstPop.png","/cashBonus/good.png","/cashBonus/pop-seconde.png","/cashBonus/pop.png","/common/index_bg.png","/common/suspend.png","/earning/icon-weichat.png","/index/icon-brand.png","/index/juanPrice.png","/missing-face.png","/my/icon-null.png","/my/icon-sure.png","/search/attention.png","/search/attention_forbid.png","/search/back.png","/select.png","/selected.png","/yticon.ttf"]
["/cashBonus/banner.png","/cashBonus/btn-invitate.png","/cashBonus/firstPop.png","/cashBonus/good.png","/cashBonus/pop-seconde.png","/cashBonus/pop.png","/common/index_bg.png","/common/suspend.png","/earning/icon-weichat.png","/index/icon-brand.png","/index/juanPrice.png","/missing-face.png","/my/icon-null.png","/my/icon-sure.png","/search/attention.png","/search/attention_forbid.png","/search/back.png","/select.png","/selected.png","/yticon.ttf"]
["/cashBonus/banner.png","/cashBonus/btn-invitate.png","/cashBonus/firstPop.png","/cashBonus/good.png","/cashBonus/pop-seconde.png","/cashBonus/pop.png","/common/index_bg.png","/common/suspend.png","/earning/icon-weichat.png","/index/icon-brand.png","/index/juanPrice.png","/missing-face.png","/my/icon-null.png","/my/icon-sure.png","/search/attention.png","/search/attention_forbid.png","/search/back.png","/select.png","/selected.png","/yticon.ttf"]
["/cashBonus/banner.png","/cashBonus/btn-invitate.png","/cashBonus/firstPop.png","/cashBonus/good.png","/cashBonus/pop-seconde.png","/cashBonus/pop.png","/common/index_bg.png","/common/suspend.png","/earning/icon-weichat.png","/index/icon-brand.png","/index/juanPrice.png","/missing-face.png","/my/icon-null.png","/my/icon-sure.png","/search/attention.png","/search/attention_forbid.png","/search/back.png","/select.png","/selected.png","/yticon.ttf"]
//基础公共库环境变量管理存放路径
var config = {
	project: {
		name: 'static-tdd-uni',
		clean: 'true',
		pack: 'uni'
	},
	reources: [],

	dev: {
		properties: {
			'//api-tdd.51app.cn': '//192.168.119.120:9240'
		}
	},
	pro: {
		properties: {
			'//192.168.119.120:9240': '//api-tdd.51app.cn'
		}
	}
};

for(var key in config) {
	exports[key] = config[key];
}import Vue from 'vue'
import Vuex from 'vuex'
import $common from '@/common/common'

Vue.use(Vuex)

const initUserInfo = function() {
	let userInfo = $common.getCookie('userInfo');
	userInfo = userInfo ? JSON.parse(userInfo) : null
	return userInfo
}

const store = new Vuex.Store({
	state: {
		userInfo: initUserInfo(),
		searchObject: null
	},
	getters: {
		userInfo(state) {
			return state.userInfo
		},
		searchObject(state) {
			return state.searchObject
		},
	},
	mutations: {
		userInfo(state, data) {
			state.userInfo = data
		},
		searchObject(state, data) {
			state.searchObject = data
		},
	},
	actions: {
		userInfo(context, data) {
			if (data == -1 || !data) {
				context.commit("userInfo", null)
				$common.deleteCookie('userInfo')
			} else {
				context.commit("userInfo", data)
				$common.setCookie('userInfo', JSON.stringify(data), 30)
			}
			//设置用户信息后需要重置下ajax请求头的信息
			import('@/common/http').then(res => {
				res.default.resetHeaders()
			})
		},
		searchObject(context, data) {
			context.commit("searchObject", data)
		}
	}
})

export default store
<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,viewport-fit=cover">
		<link rel="shortcut icon" href="/static/common/favicon.ico">
		<title>
			<%= htmlWebpackPlugin.options.title %>
		</title>
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				document.documentElement.style.fontSize = document.documentElement.clientWidth / 20 + 'px'
			})
		</script>
		<link rel="stylesheet" href="<%= BASE_URL %>static/index.css" />
	</head>
	<body>
		<noscript>
			<strong>Please enable JavaScript to continue.</strong>
		</noscript>
		<div id="app"></div>
		<!-- built files will be auto injected -->
		<script src="https://js.fundebug.cn/fundebug.1.8.0.min.js" apikey="5faf9700471ce437b632d599f522a3df2420d68ad326264f4e691be21b452cde"
		 silentVideo=false></script>
		<script type="text/javascript">
			if ("fundebug" in window) {
				fundebug.filters = [{
						message: /(getElementById\('imgUrl'\))|(getElementById\('desc'\))/
					},
					{
						name: /^unhandledrejection$/,
					}
				]
			}
			var _hmt = _hmt || [];
			(function() {
				var hm = document.createElement("script");
				hm.src = "https://hm.baidu.com/hm.js?ea93a4e31d310e1ea95de9f5e431ba4b";
				var s = document.getElementsByTagName("script")[0];
				s.parentNode.insertBefore(hm, s);
			})();
		</script>

	</body>
</html>

/* 页面左右间距 */
$page-row-spacing: 30upx;
$page-color-base: #f8f8f8;
$page-color-light: #f8f6fc;
$base-color: #BF3627;

/* 文字尺寸 */
$font-sm: 24upx;
$font-base: 28upx;
$font-lg: 32upx;
/*文字颜色*/
$font-color-dark: #333;
$font-color-base: #606266;
$font-color-light: #909399;
$font-color-disabled: #C0C4CC;
$font-color-spec: #4399fc;
/* 边框颜色 */
$border-color-dark: #DCDFE6;
$border-color-base: #E4E7ED;
$border-color-light: #EBEEF5;
/* 图片加载中颜色 */
$image-bg-color: #eee;
/* 行为相关颜色 */
$uni-color-primary:#fa436a;
$uni-color-success: #4cd964;
$uni-color-warning: #f0ad4e;
$uni-color-error: #dd524d;

/*按钮内文字水平垂直居中*/
@mixin allCenter() {
    display: flex;
    justify-content: center;
    align-items: center;
}

/*单行省略*/
@mixin ellipsis($lines: 1) {
    @if $lines != 1 {
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: $lines;
        -webkit-box-orient: vertical;
    }@else {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }
}
 /*点击态*/
@mixin active() {
		position: relative;
		cursor: pointer;
		&:active:before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				bottom: 0;
				right: 0;
				z-index: 5;
				background: rgba(0, 0, 0, .2);
		}
}
/*单条border样式*/
@mixin border-1px ($color, $direction) {
  content: '';
  position: absolute;
  background: $color;
  @if $direction == left {
    left: 0;
    top: 0;
    height: 100%;
    width: 2px;
    transform: scaleX(0.5);
    transform-origin: left 0;
  }
  @if $direction == right {
    right: 0;
    top: 0;
    height: 100%;
    width: 2px;
    transform: scaleX(0.5);
    transform-origin: right 0;
  }
  @if $direction == bottom {
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    transform: scaleY(0.5);
    transform-origin: 0 bottom;
  }
  @if $direction == top {
    top: 0;
    left: 0;
    width: 100%;
    height: 2px;
    transform: scaleY(0.5);
    transform-origin: 0 top;
  }
}







